# åŠ¨æ€è§„åˆ’

## åŠ¨æ€è§„åˆ’åŸºç¡€

[åŠ¨æ€è§„åˆ’åŸºç¡€ - OI Wiki (oi-wiki.org)](https://oi-wiki.org/dp/basic/#%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97)

### æœ€é•¿å…¬å…±å­åºåˆ—


```cpp
for (int i = 1; i <= n;i++) {
    for (int j = 1; j <= m;j++)
    {
        if(a[i] == b[j]) {
            f[i][j] = f[i - 1][j - 1] + 1;
        } else {
            f[i][j] = max(f[i - 1][j], f[i][j - 1]);
        }
    }
}
res = f[n][m];

```


### æœ€é•¿ä¸ä¸‹é™å­åºåˆ—

#### ç®—æ³•ä¸€
æ—¶é—´å¤æ‚åº¦$O(n^2)$
```cpp
int a[MAXN], d[MAXN];

int dp() {
  d[1] = 1;
  int ans = 1;
  for (int i = 2; i <= n; i++) {
    d[i] = 1;
    for (int j = 1; j < i; j++)
      if (a[j] <= a[i]) {
        d[i] = max(d[i], d[j] + 1);
        ans = max(ans, d[i]);
      }
  }
  return ans;
}

```

#### ç®—æ³•äºŒ
æ—¶é—´å¤æ‚åº¦$O(nlogn)$
```cpp
for (int i = 0; i < n; ++i) scanf("%d", a + i);
memset(dp, 0x1f, sizeof dp);
mx = dp[0];
for (int i = 0; i < n; ++i) {
  *std::upper_bound(dp, dp + n, a[i]) = a[i];
}
ans = 0;
while (dp[ans] != mx) ++ans;
```

### å­åºåˆ—ä¸ªæ•°




## èƒŒåŒ…é—®é¢˜

[èƒŒåŒ… DP - OI Wiki (oi-wiki.org)](https://oi-wiki.org/dp/knapsack/)

çŠ¶æ€è¡¨ç¤ºï¼š$f(i,j)$

çŠ¶æ€è®¡ç®—ï¼šé›†åˆåˆ’åˆ†

==å…³é”®==ï¼šçŠ¶æ€è½¬ç§»æ–¹ç¨‹

### 0-1èƒŒåŒ…é—®é¢˜
$$f[j] = max(f[j], f[j - v[i]] + w[i])$$

```cpp
// 0-1èƒŒåŒ…é—®é¢˜
#include <iostream>
#include <algorithm>
#include <cstring>

using namespace std;
const int N = 1010;

int n, m;
int f[N];
int v[N], w[N];
int main()
{
Â  Â  cin >> n >> m;
Â  Â  int i, j;
Â  Â  for (i = 1; i <= n; i++)
Â  Â  {
Â  Â  Â  Â  cin >> v[i] >> w[i];
Â  Â  }
  
Â  Â  for (i = 1; i <= n; i++)
Â  Â  {
Â  Â  Â  Â  for (j = m; j >= v[i]; j--)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  f[j] = max(f[j], f[j - v[i]] + w[i]);
Â  Â  Â  Â  }
Â  Â  }
Â  Â  int res = 0;
Â  Â  for (i = 1; i <= m; i++)
Â  Â  {
Â  Â  Â  Â  res = max(res, f[i]);
Â  Â  }
Â  Â  cout << res << endl;
Â  Â  return 0;
}
```

### å®Œå…¨èƒŒåŒ…é—®é¢˜
$$f[j] = max(f[j], f[j - v[i]] + w[i])$$
```cpp
#include<iostream>//å®Œå…¨èƒŒåŒ…é—®é¢˜
#include<algorithm>
using namespace std;

const int N=1010;
int n,m;
int v[N],w[N];
int f[N];

int main()
{
    cin>>n>>m;
    int i,j,k;
    for(i=1;i<=n;i++)
    {
        cin>>v[i]>>w[i];
    }
    for (i = 1; i <= n; i++)
        {
            for (j = v[i]; j <= m; j++)
            {
                f[j] = max(f[j], f[j - v[i]] + w[i]);
            }
        }
    cout<<f[m];
    return 0;
}
```

### å¤šé‡èƒŒåŒ…é—®é¢˜

[4. å¤šé‡èƒŒåŒ…é—®é¢˜ I - AcWingé¢˜åº“](https://www.acwing.com/problem/content/4/)

```cpp
#include <bits/stdc++.h>
using namespace std;

const int N = 1e6 + 10;

int n, m;
int v[N],w[N],s[N];
int f[N];

int main()
{
    cin >> n >> m;
    for (int i = 1; i <= n; i++)
    {
        cin >> v[i] >> w[i] >> s[i];
    }
    for (int i = 1;i<=n;i++)
    {
        for (int j = m; j >= 0 && j >= v[i];j--)
        {
            for (int k = 0; k <=s[i]&&k*v[i]<=j;k++)
            {
                f[j] = max(f[j], f[j - k * v[i]] + k * w[i]);
            }
        }
    }
    cout << f[m] << endl;

    return 0;
}
```

#### äºŒè¿›åˆ¶ä¼˜åŒ–

ã€‚ã€‚ã€‚

### æ··åˆèƒŒåŒ…é—®é¢˜

```
for (å¾ªç¯ç‰©å“ç§ç±») {
  if (æ˜¯ 0 - 1 èƒŒåŒ…)
    å¥—ç”¨ 0 - 1 èƒŒåŒ…ä»£ç ;
  else if (æ˜¯å®Œå…¨èƒŒåŒ…)
    å¥—ç”¨å®Œå…¨èƒŒåŒ…ä»£ç ;
  else if (æ˜¯å¤šé‡èƒŒåŒ…)
    å¥—ç”¨å¤šé‡èƒŒåŒ…ä»£ç ;
}
```

 
 ### äºŒç»´è´¹ç”¨èƒŒåŒ…
 [P1855 æ¦¨å–kkksc03 - æ´›è°·](https://www.luogu.com.cn/problem/P1855)

## åŒºé—´DP

[åŒºé—´ DP - OI Wiki (oi-wiki.org)](https://oi-wiki.org/dp/interval/)

### çŸ³å­åˆå¹¶

è®¾æœ‰Â NÂ å †çŸ³å­æ’æˆä¸€æ’ï¼Œå…¶ç¼–å·ä¸ºÂ 1,2,3,â€¦,Nã€‚

æ¯å †çŸ³å­æœ‰ä¸€å®šçš„è´¨é‡ï¼Œå¯ä»¥ç”¨ä¸€ä¸ªæ•´æ•°æ¥æè¿°ï¼Œç°åœ¨è¦å°†è¿™Â NÂ å †çŸ³å­åˆå¹¶æˆä¸ºä¸€å †ã€‚

æ¯æ¬¡åªèƒ½åˆå¹¶ç›¸é‚»çš„ä¸¤å †ï¼Œåˆå¹¶çš„ä»£ä»·ä¸ºè¿™ä¸¤å †çŸ³å­çš„è´¨é‡ä¹‹å’Œï¼Œåˆå¹¶åä¸è¿™ä¸¤å †çŸ³å­ç›¸é‚»çš„çŸ³å­å°†å’Œæ–°å †ç›¸é‚»ï¼Œåˆå¹¶æ—¶ç”±äºé€‰æ‹©çš„é¡ºåºä¸åŒï¼Œåˆå¹¶çš„æ€»ä»£ä»·ä¹Ÿä¸ç›¸åŒã€‚

ä¾‹å¦‚æœ‰Â 4Â å †çŸ³å­åˆ†åˆ«ä¸ºÂ `1 3 5 2`ï¼Œ æˆ‘ä»¬å¯ä»¥å…ˆåˆå¹¶ 1ã€2 å †ï¼Œä»£ä»·ä¸ºÂ 4ï¼Œå¾—åˆ°Â `4 5 2`ï¼Œ åˆåˆå¹¶Â 1ã€2Â å †ï¼Œä»£ä»·ä¸ºÂ 9ï¼Œå¾—åˆ°Â `9 2`Â ï¼Œå†åˆå¹¶å¾—åˆ°Â 11ï¼Œæ€»ä»£ä»·ä¸ºÂ 4+9+11=24ï¼›

å¦‚æœç¬¬äºŒæ­¥æ˜¯å…ˆåˆå¹¶Â 2ã€3Â å †ï¼Œåˆ™ä»£ä»·ä¸ºÂ 7ï¼Œå¾—åˆ°Â `4 7`ï¼Œæœ€åä¸€æ¬¡åˆå¹¶ä»£ä»·ä¸ºÂ 11ï¼Œæ€»ä»£ä»·ä¸ºÂ 4+7+11=22ã€‚

é—®é¢˜æ˜¯ï¼šæ‰¾å‡ºä¸€ç§åˆç†çš„æ–¹æ³•ï¼Œä½¿æ€»çš„ä»£ä»·æœ€å°ï¼Œè¾“å‡ºæœ€å°ä»£ä»·ã€‚

**è¾“å…¥æ ¼å¼**

ç¬¬ä¸€è¡Œä¸€ä¸ªæ•°Â NÂ è¡¨ç¤ºçŸ³å­çš„å †æ•°Â Nã€‚

ç¬¬äºŒè¡ŒÂ NÂ ä¸ªæ•°ï¼Œè¡¨ç¤ºæ¯å †çŸ³å­çš„è´¨é‡(å‡ä¸è¶…è¿‡Â 1000)ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæœ€å°ä»£ä»·ã€‚

**æ•°æ®èŒƒå›´**

1â‰¤Nâ‰¤300

**è¾“å…¥æ ·ä¾‹ï¼š**

```
4
1 3 5 2
```

**è¾“å‡ºæ ·ä¾‹ï¼š**

```
22
```


**Code**

```cpp
read(n);
for (int i = 1; i <= n; i++)
{
    read(a[i]);
}
for (int i = 1; i <= n; i++)
{
    a[i] += a[i - 1];
}
// len åˆå¹¶åŒºåŸŸçš„é•¿åº¦
// i + (len - 1) = j
for (int len = 2; len <= n; len++)
{
    for (int i = 1; i + len - 1 <= n; i++)
    {
        int l = i;
        int r = i + len - 1;
        f[l][r] = 1e8;
        for (int k = l; k < r; k++)
        {
            // (f[l][k] + f[k+1][r]) + (a[r] - a[l - 1]) åˆå¹¶çš„æˆæœ¬
            f[l][r] = min(f[l][r], f[l][k] + f[k + 1][r] + a[r] - a[l - 1]);
        }
    }
}
cout << f[1][n] << endl;
return 0;
```

## æ ‘å½¢DP

### æ²¡æœ‰ä¸Šå¸çš„èˆä¼š

**é¢˜ç›®æè¿°**

æŸå¤§å­¦æœ‰ $n$ ä¸ªèŒå‘˜ï¼Œç¼–å·ä¸º $1\ldots n$ã€‚

ä»–ä»¬ä¹‹é—´æœ‰ä»å±å…³ç³»ï¼Œä¹Ÿå°±æ˜¯è¯´ä»–ä»¬çš„å…³ç³»å°±åƒä¸€æ£µä»¥æ ¡é•¿ä¸ºæ ¹çš„æ ‘ï¼Œçˆ¶ç»“ç‚¹å°±æ˜¯å­ç»“ç‚¹çš„ç›´æ¥ä¸Šå¸ã€‚

ç°åœ¨æœ‰ä¸ªå‘¨å¹´åº†å®´ä¼šï¼Œå®´ä¼šæ¯é‚€è¯·æ¥ä¸€ä¸ªèŒå‘˜éƒ½ä¼šå¢åŠ ä¸€å®šçš„å¿«ä¹æŒ‡æ•° $r_i$ï¼Œä½†æ˜¯å‘¢ï¼Œå¦‚æœæŸä¸ªèŒå‘˜çš„ç›´æ¥ä¸Šå¸æ¥å‚åŠ èˆä¼šäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªèŒå‘˜å°±æ— è®ºå¦‚ä½•ä¹Ÿä¸è‚¯æ¥å‚åŠ èˆä¼šäº†ã€‚

æ‰€ä»¥ï¼Œè¯·ä½ ç¼–ç¨‹è®¡ç®—ï¼Œé‚€è¯·å“ªäº›èŒå‘˜å¯ä»¥ä½¿å¿«ä¹æŒ‡æ•°æœ€å¤§ï¼Œæ±‚æœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚

**è¾“å…¥æ ¼å¼**

è¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° $n$ã€‚

ç¬¬ $2$ åˆ°ç¬¬ $(n + 1)$ è¡Œï¼Œæ¯è¡Œä¸€ä¸ªæ•´æ•°ï¼Œç¬¬ $(i+1)$ è¡Œçš„æ•´æ•°è¡¨ç¤º $i$ å·èŒå‘˜çš„å¿«ä¹æŒ‡æ•° $r_i$ã€‚

ç¬¬ $(n + 2)$ åˆ°ç¬¬ $2n$ è¡Œï¼Œæ¯è¡Œè¾“å…¥ä¸€å¯¹æ•´æ•° $l, k$ï¼Œä»£è¡¨ $k$ æ˜¯ $l$ çš„ç›´æ¥ä¸Šå¸ã€‚

**è¾“å‡ºæ ¼å¼**

è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°ä»£è¡¨æœ€å¤§çš„å¿«ä¹æŒ‡æ•°ã€‚

**æ ·ä¾‹ #1**

**æ ·ä¾‹è¾“å…¥ #1**

```
7
1
1
1
1
1
1
1
1 3
2 3
6 4
7 4
4 5
3 5
```

**æ ·ä¾‹è¾“å‡º #1**

```
5
```

**æç¤º**

**æ•°æ®è§„æ¨¡ä¸çº¦å®š**

å¯¹äº $100\%$ çš„æ•°æ®ï¼Œä¿è¯ $1\leq n \leq 6 \times 10^3$ï¼Œ$-128 \leq r_i\leq 127$ï¼Œ$1 \leq l, k \leq n$ï¼Œä¸”ç»™å‡ºçš„å…³ç³»ä¸€å®šæ˜¯ä¸€æ£µæ ‘ã€‚
***
- ä¸Šå¸ä¸å‚åŠ èˆä¼šæ—¶ï¼Œä¸‹å±å¯ä»¥å‚åŠ ï¼Œä¹Ÿå¯ä»¥ä¸å‚åŠ ï¼Œæ­¤æ—¶æœ‰ $f(i,0) = \sum max{f(x,1),f(x,0)}$
- ä¸Šå¸å‚åŠ èˆä¼šæ—¶ï¼Œä¸‹å±éƒ½ä¸ä¼šå‚åŠ ï¼Œæ­¤æ—¶æœ‰ $f(i,1) = \sum f(x,0)+a_{i}$

å› æ­¤å¯ä»¥ä½¿ç”¨dfsï¼Œä»æ ¹èŠ‚ç‚¹å¼€å§‹éå†æ ‘ï¼Œåœ¨è¿”å›ä¸Šä¸€å±‚æ—¶æ›´æ–°èŠ‚ç‚¹

#### Code

```cpp
int f[N][2];
int is_h[N];
int h[N], e[N], ne[N], idx;
bool st[N];

void add(int a, int b)
{
    idx++;
    e[idx] = b;
    ne[idx] = h[a];
    h[a] = idx;
}

void dfs(int k)
{
    st[k] = 1;
    for (int i = h[k]; i; i = ne[i]) // æšä¸¾è¯¥ç»“ç‚¹çš„æ¯ä¸ªå­ç»“ç‚¹
    {
        int j = e[i];
        if (st[j])
            continue;
        solve(j);
        f[k][1] += f[j][0];
        f[k][0] += max(f[j][0], f[j][1]); // è½¬ç§»æ–¹ç¨‹
    }
    return;
}

int main()
{
    IOS;

    int n;
    cin >> n;
    for (int i = 1; i <= n; i++)
    {
        cin >> f[i][1];
    }
    for (int i = 1; i < n; i++)
    {
        int l, k;
        cin >> l >> k;
        is_h[l] = 1;
        add(k, l);
    }
    for (int i = 1; i <= n; i++)
    {
        if (!is_h[i]) // ä»æ ¹ç»“ç‚¹å¼€å§‹DFS
        {
            dfs(i);
            printf("%d", max(f[i][1], f[i][0]));
            return 0;
        }
    }

    return 0;
}
```


## æ ‘ä¸ŠèƒŒåŒ…

## çŠ¶å‹DP

ç›¸å…³å†…å®¹
[ä½è¿ç®—](ğŸ§ç®—æ³•ç¬”è®°.md#ä½è¿ç®—)
[æœ€å°è¡¨ç¤ºæ³• - OI Wiki (oi-wiki.org)](https://oi-wiki.org/string/minimal-string/)

**äº’ä¸ä¾µçŠ¯**

åœ¨$N \times N$çš„æ£‹ç›˜é‡Œé¢æ”¾$K$ä¸ªå›½ç‹(1<=N<=9,1<=K<=N * N)ï¼Œä½¿ä»–ä»¬äº’ä¸æ”»å‡»ï¼Œå…±æœ‰å¤šå°‘ç§æ‘†æ”¾æ–¹æ¡ˆã€‚

å›½ç‹èƒ½æ”»å‡»åˆ°å®ƒä¸Šä¸‹å·¦å³ï¼Œä»¥åŠå·¦ä¸Šå·¦ä¸‹å³ä¸Šå³ä¸‹å…«ä¸ªæ–¹å‘ä¸Šé™„è¿‘çš„å„ä¸€ä¸ªæ ¼å­ï¼Œå…±8ä¸ªæ ¼å­ã€‚



**å®ç°**
```cpp
#include <algorithm>
#include <iostream>
using namespace std;
long long sta[2005], sit[2005], f[15][2005][105];
int n, k, cnt;

void dfs(int x, int num, int cur) {
  if (cur >= n) {  // æœ‰æ–°çš„åˆæ³•çŠ¶æ€
    sit[++cnt] = x;
    sta[cnt] = num;
    return;
  }
  dfs(x, num, cur + 1);  // curä½ç½®ä¸æ”¾å›½ç‹
  dfs(x + (1 << cur), num + 1,
      cur + 2);  // curä½ç½®æ”¾å›½ç‹ï¼Œä¸å®ƒç›¸é‚»çš„ä½ç½®ä¸èƒ½å†æ”¾å›½ç‹
}

bool compatible(int j, int x) {
  if (sit[j] & sit[x]) return false;
  if ((sit[j] << 1) & sit[x]) return false;
  if (sit[j] & (sit[x] << 1)) return false;
  return true;
}

int main() {
  cin >> n >> k;
  dfs(0, 0, 0);  // å…ˆé¢„å¤„ç†ä¸€è¡Œçš„æ‰€æœ‰åˆæ³•çŠ¶æ€
  for (int j = 1; j <= cnt; j++) f[1][j][sta[j]] = 1;
  for (int i = 2; i <= n; i++)
    for (int j = 1; j <= cnt; j++)
      for (int x = 1; x <= cnt; x++) {
        if (!compatible(j, x)) continue;  // æ’é™¤ä¸åˆæ³•è½¬ç§»
        for (int l = sta[j]; l <= k; l++) f[i][j][l] += f[i - 1][x][l - sta[j]];
      }
  long long ans = 0;
  for (int i = 1; i <= cnt; i++) ans += f[n][i][k];  // ç´¯åŠ ç­”æ¡ˆ
  cout << ans << endl;
  return 0;
}

```

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://piakocode.github.io/Web%E5%BC%80%E5%8F%91/%E5%90%8E%E7%AB%AF%E5%BC%80%E5%8F%91/SpringCloud/SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89/">
      
      
        <link rel="prev" href="../SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/">
      
      
        <link rel="next" href="../SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/">
      
      
      <link rel="icon" href="../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>ÂæÆÊúçÂä°Â∫îÁî® - Piako's notebook</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Piako&#39;s notebook" class="md-header__button md-logo" aria-label="Piako's notebook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Piako's notebook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ÂæÆÊúçÂä°Â∫îÁî®
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../Read%20List/" class="md-tabs__link">
        
  
    
  
  Read List

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../%E5%AD%A6%E4%B9%A0%E7%BB%8F%E9%AA%8C/" class="md-tabs__link">
        
  
    
  
  Â≠¶‰π†ÁªèÈ™å

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" class="md-tabs__link">
        
  
    
  
  ÊØï‰∏öËÆæËÆ°

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" class="md-tabs__link">
          
  
  AI

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Algorithm/ICPC%20%E6%A8%A1%E6%9D%BF/" class="md-tabs__link">
          
  
  Algorithm

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../Misc/RPC%E5%AD%A6%E4%B9%A0/" class="md-tabs__link">
          
  
  Misc

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../System/System/" class="md-tabs__link">
          
  
  System

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../Linux%E7%BC%96%E7%A8%8B/IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" class="md-tabs__link">
          
  
  WebÂºÄÂèë

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E5%85%B6%E4%BB%96/CMU15445/CMU-15-445-spring2023%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" class="md-tabs__link">
          
  
  ÂÖ∂‰ªñ

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Bash%20%E8%84%9A%E6%9C%AC/" class="md-tabs__link">
          
  
  Â∑•ÂÖ∑‰ΩøÁî®

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/C%2B%2B%E4%BB%A3%E7%A0%81%E6%A0%B7%E4%BE%8B/" class="md-tabs__link">
          
  
  ÁºñÁ®ãËØ≠Ë®Ä

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Piako&#39;s notebook" class="md-nav__button md-logo" aria-label="Piako's notebook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Piako's notebook
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Read%20List/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Read List
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%AD%A6%E4%B9%A0%E7%BB%8F%E9%AA%8C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Â≠¶‰π†ÁªèÈ™å
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÊØï‰∏öËÆæËÆ°
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AI
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1" >
        
          
          <label class="md-nav__link" for="__nav_5_1" id="__nav_5_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Êú∫Âô®Â≠¶‰π†
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1">
            <span class="md-nav__icon md-icon"></span>
            Êú∫Âô®Â≠¶‰π†
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Êú∫Âô®Â≠¶‰π†
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%AE%9E%E6%88%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Êú∫Âô®Â≠¶‰π†ÂÆûÊàò
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Êú∫Âô®Â≠¶‰π†Ôºà‰∫åÔºâ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4" id="__nav_5_1_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Â∏∏Áî®Â∫ì
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_1_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4">
            <span class="md-nav__icon md-icon"></span>
            Â∏∏Áî®Â∫ì
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/Keras/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Keras
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/numpy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    numpy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/opencv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    opencv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/pandas%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    pandas Âü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4_5" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4_5" id="__nav_5_1_4_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Matplotlib
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4_5">
            <span class="md-nav__icon md-icon"></span>
            Matplotlib
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/matplotlib/matplotlib/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    matplotlib
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4_6" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4_6" id="__nav_5_1_4_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Seaborn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4_6">
            <span class="md-nav__icon md-icon"></span>
            Seaborn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/seaborn/seaborn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    seaborn
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_1_4_7" >
        
          
          <label class="md-nav__link" for="__nav_5_1_4_7" id="__nav_5_1_4_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Sklearn
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_1_4_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_1_4_7">
            <span class="md-nav__icon md-icon"></span>
            Sklearn
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/sklearn/sklearn%20%E5%85%A5%E9%97%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sklearn ÂÖ•Èó®
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E5%B8%B8%E7%94%A8%E5%BA%93/sklearn/sklearn%E5%B8%B8%E7%94%A8%E4%BB%A3%E7%A0%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SKlearn Â∏∏Áî®‰ª£Á†Å
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ê∑±Â∫¶Â≠¶‰π†
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Ê∑±Â∫¶Â≠¶‰π†
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Code-%E4%BA%BA%E5%B7%A5%E6%99%BA%E8%83%BD/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code-‰∫∫Â∑•Êô∫ËÉΩ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/Pytorch%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pytorch ‰ΩøÁî®
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ê∑±Â∫¶Â≠¶‰π†
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4" >
        
          
          <label class="md-nav__link" for="__nav_5_2_4" id="__nav_5_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CV
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_4">
            <span class="md-nav__icon md-icon"></span>
            CV
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_4_1" >
        
          
          <label class="md-nav__link" for="__nav_5_2_4_1" id="__nav_5_2_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Yolo
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="4" aria-labelledby="__nav_5_2_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_4_1">
            <span class="md-nav__icon md-icon"></span>
            Yolo
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/CV/yolo/yolo%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    yoloV5Âü∫Êú¨‰ªãÁªç
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_2_5" >
        
          
          <label class="md-nav__link" for="__nav_5_2_5" id="__nav_5_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Âç∑ÁßØÁ•ûÁªèÁΩëÁªú
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_5">
            <span class="md-nav__icon md-icon"></span>
            Âç∑ÁßØÁ•ûÁªèÁΩëÁªú
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C/%E5%8D%B7%E7%A7%AF%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âç∑ÁßØÁ•ûÁªèÁΩëÁªúÂü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ÈÅáÂà∞ÁöÑÈóÆÈ¢ò
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            ÈÅáÂà∞ÁöÑÈóÆÈ¢ò
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../AI/%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98/%E7%BC%96%E7%A8%8B%E7%BB%86%E8%8A%82%E7%9B%B8%E5%85%B3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÁºñÁ®ãÁªÜËäÇÁõ∏ÂÖ≥
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Algorithm
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Algorithm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/ICPC%20%E6%A8%A1%E6%9D%BF/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ICPC Ê®°Êùø
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âä®ÊÄÅËßÑÂàí
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%F0%9F%A7%90%E7%AE%97%E6%B3%95%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tricks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4" id="__nav_6_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ÂÅöÈ¢òËÆ∞ÂΩïüí≠üí°üéà
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4">
            <span class="md-nav__icon md-icon"></span>
            ÂÅöÈ¢òËÆ∞ÂΩïüí≠üí°üéà
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%F0%9F%92%AD%F0%9F%92%A1%F0%9F%8E%88/ACwing%E9%A2%98%E9%9B%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ACwingÈ¢òÈõÜ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_2" >
        
          
          <label class="md-nav__link" for="__nav_6_4_2" id="__nav_6_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ACwing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_2">
            <span class="md-nav__icon md-icon"></span>
            ACwing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%F0%9F%92%AD%F0%9F%92%A1%F0%9F%8E%88/ACwing/1499%20%E6%A0%91%E7%9A%84%E9%81%8D%E5%8E%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ê†ëÁöÑÈÅçÂéÜ 1499
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%F0%9F%92%AD%F0%9F%92%A1%F0%9F%8E%88/ACwing/284%20%E7%9F%B3%E5%AD%90%E5%90%88%E5%B9%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    284 Áü≥Â≠êÂêàÂπ∂
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_3" >
        
          
          <label class="md-nav__link" for="__nav_6_4_3" id="__nav_6_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Codeforces
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_3">
            <span class="md-nav__icon md-icon"></span>
            Codeforces
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%F0%9F%92%AD%F0%9F%92%A1%F0%9F%8E%88/Codeforces/1307D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BFS #ÂõæËÆ∫ #Codeforces
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6_4_4" >
        
          
          <label class="md-nav__link" for="__nav_6_4_4" id="__nav_6_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Ê¥õË∞∑
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_6_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6_4_4">
            <span class="md-nav__icon md-icon"></span>
            Ê¥õË∞∑
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%F0%9F%92%AD%F0%9F%92%A1%F0%9F%8E%88/%E6%B4%9B%E8%B0%B7/P1119%20%E7%81%BE%E5%90%8E%E9%87%8D%E5%BB%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    P1119 ÁÅæÂêéÈáçÂª∫
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Algorithm/%E5%81%9A%E9%A2%98%E8%AE%B0%E5%BD%95%F0%9F%92%AD%F0%9F%92%A1%F0%9F%8E%88/%E6%B4%9B%E8%B0%B7/P5076%20%E6%99%AE%E9%80%9A%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%88%E7%AE%80%E5%8C%96%E7%89%88%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‰∫åÂèâÊ†ë #‰∫åÂèâÊêúÁ¥¢Ê†ë
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Misc
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Misc
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/RPC%E5%AD%A6%E4%B9%A0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RPCÂ≠¶‰π†
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/Record/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Record
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/Todo%20List/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TODO LIST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/mermaid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    mermaid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/obsidian%20%E5%A5%BD%E7%94%A8%E7%9A%84%E6%8F%92%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Obsidian Â•ΩÁî®ÁöÑÊèí‰ª∂
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/%E5%90%84%E7%A7%8D%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÂêÑÁßçÈÖçÁΩÆÊñá‰ª∂
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/%E5%B0%8F%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Â∞èËÆ∞
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../Misc/%E8%80%83%E7%A0%94%E9%99%A2%E6%A0%A1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ËÄÉÁ†îÈô¢Ê†°ËÆ∞ÂΩï
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    System
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            System
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/System/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/%E5%B9%B6%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âπ∂Âèë
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_3" >
        
          
          <label class="md-nav__link" for="__nav_8_3" id="__nav_8_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    RISC V
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_3">
            <span class="md-nav__icon md-icon"></span>
            RISC V
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/RISC-V/RISC-V/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RISC-V
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/RISC-V/%E5%9F%BA%E6%9C%AC%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RISC-VÂü∫Êú¨Êåá‰ª§
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/RISC-V/%E6%B5%8B%E8%AF%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÊµãËØï
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4" id="__nav_8_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    rCore
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_8_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4">
            <span class="md-nav__icon md-icon"></span>
            rCore
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/rCore/ch0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ch0
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/rCore/ch1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ch1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/rCore/ch5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ch5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8_4_4" >
        
          
          <label class="md-nav__link" for="__nav_8_4_4" id="__nav_8_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    rCoreÂ≠¶‰π†ËÆ∞ÂΩï
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_8_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8_4_4">
            <span class="md-nav__icon md-icon"></span>
            rCoreÂ≠¶‰π†ËÆ∞ÂΩï
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../System/rCore/rCore%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/rCore%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Â≠¶‰π†ËÆ∞ÂΩï
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  <span class="md-ellipsis">
    WebÂºÄÂèë
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            WebÂºÄÂèë
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1" >
        
          
          <label class="md-nav__link" for="__nav_9_1" id="__nav_9_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    LinuxÁºñÁ®ã
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1">
            <span class="md-nav__icon md-icon"></span>
            LinuxÁºñÁ®ã
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux%E7%BC%96%E7%A8%8B/IO%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    epoll
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux%E7%BC%96%E7%A8%8B/Linux%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Linux ÁΩëÁªúÁºñÁ®ã
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux%E7%BC%96%E7%A8%8B/connect%E3%80%81listen%E5%92%8Caccept/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    connect„ÄÅlistenÂíåaccept
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux%E7%BC%96%E7%A8%8B/epoll/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    epoll
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux%E7%BC%96%E7%A8%8B/io_uring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    io_uring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_1_6" >
        
          
          <label class="md-nav__link" for="__nav_9_1_6" id="__nav_9_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Linux UnixÁºñÁ®ãÊâãÂÜå
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_1_6">
            <span class="md-nav__icon md-icon"></span>
            Linux UnixÁºñÁ®ãÊâãÂÜå
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../Linux%E7%BC%96%E7%A8%8B/Linux-Unix%E7%BC%96%E7%A8%8B%E6%89%8B%E5%86%8C/1.%20%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âü∫Êú¨Ê¶ÇÂøµ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_2" >
        
          
          <label class="md-nav__link" for="__nav_9_2" id="__nav_9_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ÂâçÁ´Ø
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_2">
            <span class="md-nav__icon md-icon"></span>
            ÂâçÁ´Ø
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%89%8D%E7%AB%AF/CSS%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSSÂü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%89%8D%E7%AB%AF/HTML%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTMLÁ¨îËÆ∞
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E5%89%8D%E7%AB%AF/%E5%89%8D%E7%AB%AF%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÂâçÁ´ØÂü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3" checked>
        
          
          <label class="md-nav__link" for="__nav_9_3" id="__nav_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ÂêéÁ´ØÂºÄÂèë
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_3">
            <span class="md-nav__icon md-icon"></span>
            ÂêéÁ´ØÂºÄÂèë
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Java%E7%9A%84%E5%9D%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaÁöÑÂùë
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Jwt%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JwtÁªìÊûÑ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../%E6%9E%B6%E6%9E%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ËΩØ‰ª∂Êû∂ÊûÑ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3_4" >
        
          
          <label class="md-nav__link" for="__nav_9_3_4" id="__nav_9_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Spring
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3_4">
            <span class="md-nav__icon md-icon"></span>
            Spring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/Mybatis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mybatis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/SSM%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89Spring%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSMÁ¨îËÆ∞Ôºà‰∏ÄÔºâSpringÂü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/SSM%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89SpringSecurity%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SSMÁ¨îËÆ∞Ôºà‰∏âÔºâSpringSecurityÂü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/SSM%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89SpringMvc%E5%9F%BA%E7%A1%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringMVCÂü∫Á°Ä
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/SpringMVC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringMVC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/SpringSecurity/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringSecurity
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/spring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Spring/%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âõæ‰π¶ÁÆ°ÁêÜÁ≥ªÁªü
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3_5" >
        
          
          <label class="md-nav__link" for="__nav_9_3_5" id="__nav_9_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SpringBoot
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3_5">
            <span class="md-nav__icon md-icon"></span>
            SpringBoot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringBoot/SpringBoot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringBoot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringBoot/SpringBoot%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89%E6%A0%B8%E5%BF%83%E5%86%85%E5%AE%B9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringBootÁ¨îËÆ∞Ôºà‰∏ÄÔºâÊ†∏ÂøÉÂÜÖÂÆπ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringBoot/SpringBoot%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringBootÁ¨îËÆ∞Ôºà‰∏âÔºâÂâçÂêéÁ´ØÂàÜÁ¶ª
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../SpringBoot/SpringBoot%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringBootÁ¨îËÆ∞Ôºà‰∫åÔºâÊï∞ÊçÆ‰∫§‰∫í
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3_6" checked>
        
          
          <label class="md-nav__link" for="__nav_9_3_6" id="__nav_9_3_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SpringCloud
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_3_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_3_6">
            <span class="md-nav__icon md-icon"></span>
            SpringCloud
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringCloudÁ¨îËÆ∞Ôºà‰∏ÄÔºâ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    ÂæÆÊúçÂä°Â∫îÁî®
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    ÂæÆÊúçÂä°Â∫îÁî®
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∏ÉÂºèÊùÉÈôêÊ†°È™å
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oauth-20" class="md-nav__link">
    <span class="md-ellipsis">
      OAuth 2.0 ÂÆûÁé∞ÂçïÁÇπÁôªÂΩï
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OAuth 2.0 ÂÆûÁé∞ÂçïÁÇπÁôªÂΩï">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ÂõõÁßçÊéàÊùÉÊ®°Âºè
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Êê≠Âª∫È™åËØÅÊúçÂä°Âô®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enableoauth2sso" class="md-nav__link">
    <span class="md-ellipsis">
      Âü∫‰∫é@EnableOAuth2SsoÂÆûÁé∞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enableresourceserver" class="md-nav__link">
    <span class="md-ellipsis">
      Âü∫‰∫é@EnableResourceServerÂÆûÁé∞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwttoken" class="md-nav__link">
    <span class="md-ellipsis">
      ‰ΩøÁî®jwtÂ≠òÂÇ®Token
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis‰∏éÂàÜÂ∏ÉÂºè
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis‰∏éÂàÜÂ∏ÉÂºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      ‰∏ª‰ªéÂ§çÂà∂
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Âì®ÂÖµÊ®°Âºè
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      ÈõÜÁæ§Êê≠Âª∫
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∏ÉÂºèÈîÅ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">
      MySQL‰∏éÂàÜÂ∏ÉÂºè
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MySQL‰∏éÂàÜÂ∏ÉÂºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      ‰∏ª‰ªéÂ§çÂà∂
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∫ìÂàÜË°®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sharding-jdbc" class="md-nav__link">
    <span class="md-ellipsis">
      Sharding JDBC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∏ÉÂºèÂ∫èÂàóÁÆóÊ≥ï
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      ËØªÂÜôÂàÜÁ¶ª
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringCloudÁ¨îËÆ∞ÔºàÂõõÔºâ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../SpringCould%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SpringCouldÁ¨îËÆ∞Ôºà‰∫åÔºâ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3_7" >
        
          
          <label class="md-nav__link" for="__nav_9_3_7" id="__nav_9_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Etcd
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3_7">
            <span class="md-nav__icon md-icon"></span>
            Etcd
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../etcd/etcd%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    etcdÂü∫Êú¨‰ΩøÁî®
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_3_8" >
        
          
          <label class="md-nav__link" for="__nav_9_3_8" id="__nav_9_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Gin
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_3_8">
            <span class="md-nav__icon md-icon"></span>
            Gin
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gin/Gin%20%2B%20Gorm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gin + Gorm
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gin/Gin-Gorm-Todo_List/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Todo-List
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gin/Gin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gin/Gin%E6%A0%B7%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GinÊ†∑‰æã
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gin/Gorm%E6%A0%B7%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GormÊ†∑‰æã
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gin/%E4%B8%8A%E4%BC%A0%E3%80%81%E4%B8%8B%E8%BD%BD%E6%96%87%E4%BB%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‰∏ä‰º†„ÄÅ‰∏ãËΩΩÊñá‰ª∂
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4" >
        
          
          <label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Êï∞ÊçÆÂ∫ì
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9_4">
            <span class="md-nav__icon md-icon"></span>
            Êï∞ÊçÆÂ∫ì
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../%E6%95%B0%E6%8D%AE%E5%BA%93/build%20a%20simple%20database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    build a simple database
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ÂÖ∂‰ªñ
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            ÂÖ∂‰ªñ
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_1" >
        
          
          <label class="md-nav__link" for="__nav_10_1" id="__nav_10_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CMU15445
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_1">
            <span class="md-nav__icon md-icon"></span>
            CMU15445
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CMU15445/CMU-15-445-spring2023%E9%80%9A%E5%85%B3%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CMU15445ÈÄöÂÖ≥ËÆ∞ÂΩï
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2" >
        
          
          <label class="md-nav__link" for="__nav_10_2" id="__nav_10_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CSAPP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2">
            <span class="md-nav__icon md-icon"></span>
            CSAPP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/3.%E7%A8%8B%E5%BA%8F%E7%9A%84%E6%9C%BA%E5%99%A8%E7%BA%A7%E8%A1%A8%E7%A4%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Á®ãÂ∫èÁöÑÊú∫Âô®Á∫ßË°®Á§∫
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/bomb%20lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bomb lab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/data%20lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Data lab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/%E5%BC%82%E5%B8%B8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÂºÇÂ∏∏
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ËôöÊãüÂÜÖÂ≠ò
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/%E9%93%BE%E6%8E%A5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÈìæÊé•
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_2_7" >
        
          
          <label class="md-nav__link" for="__nav_10_2_7" id="__nav_10_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CMU15 455
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_10_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_2_7">
            <span class="md-nav__icon md-icon"></span>
            CMU15 455
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/CSAPP/CMU15-455/CMU15-455/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CMU15-455
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_3" >
        
          
          <label class="md-nav__link" for="__nav_10_3" id="__nav_10_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    MIT6.S081 Êìç‰ΩúÁ≥ªÁªü
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_3">
            <span class="md-nav__icon md-icon"></span>
            MIT6.S081 Êìç‰ΩúÁ≥ªÁªü
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/MIT6.S081%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/1.%20Lab%20Utilities/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Lab Utilities
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/MIT6.S081%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/2.%20Lab%20system%20calls/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab: system calls
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/MIT6.S081%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/3.%20Lab%20page%20tables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab: page tables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/MIT6.S081%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/4.%20Lab%20Traps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lab: Traps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/MIT6.S081%20%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/7.%20Lab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Lab
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_4" >
        
          
          <label class="md-nav__link" for="__nav_10_4" id="__nav_10_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    NJU OS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_4">
            <span class="md-nav__icon md-icon"></span>
            NJU OS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/NJU%20OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Êìç‰ΩúÁ≥ªÁªü
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_5" >
        
          
          <label class="md-nav__link" for="__nav_10_5" id="__nav_10_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OSTEP
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_5">
            <span class="md-nav__icon md-icon"></span>
            OSTEP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/OSTEP/OSTEP%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OSTEPËØª‰π¶Á¨îËÆ∞
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10_6" >
        
          
          <label class="md-nav__link" for="__nav_10_6" id="__nav_10_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ËÆ°ÁÆóÊú∫ÁΩëÁªú
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_10_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10_6">
            <span class="md-nav__icon md-icon"></span>
            ËÆ°ÁÆóÊú∫ÁΩëÁªú
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1.%20%E6%A6%82%E8%AE%BA/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ê¶ÇËÆ∫
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/CS144/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CS144
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%85%B6%E4%BB%96/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ËÆ°ÁÆóÊú∫ÁΩëÁªú
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Â∑•ÂÖ∑‰ΩøÁî®
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            Â∑•ÂÖ∑‰ΩøÁî®
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Bash%20%E8%84%9A%E6%9C%AC/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bash ËÑöÊú¨
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/CMake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CMake
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Doxygen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Doxygen
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Helix/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Helix
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Hyprland%E9%85%8D%E7%BD%AE/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    hyprlandÈÖçÁΩÆ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Linux%E7%AC%94%E8%AE%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LinuxÁ¨îËÆ∞
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Make/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Make‰ΩøÁî®
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/MongoDB/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MongoDB
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/MySQL%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MySQLÊåá‰ª§
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Redis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Redis‰ΩøÁî®
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/Vim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker ‰ΩøÁî®
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/gdb%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gdbÂ∏∏Áî®ÂëΩ‰ª§
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/tmux/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tmux
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/%E5%B8%B8%E7%94%A8Latex%E7%AC%A6%E5%8F%B7%E5%85%AC%E5%BC%8F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Â∏∏Áî®LatexÁ¨¶Âè∑ÂÖ¨Âºè
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/%E5%B8%B8%E7%94%A8git%E6%8C%87%E4%BB%A4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Â∏∏Áî®gitÊåá‰ª§
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ÁºñÁ®ãËØ≠Ë®Ä
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            ÁºñÁ®ãËØ≠Ë®Ä
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1" >
        
          
          <label class="md-nav__link" for="__nav_12_1" id="__nav_12_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    C++
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_1">
            <span class="md-nav__icon md-icon"></span>
            C++
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/C%2B%2B%E4%BB%A3%E7%A0%81%E6%A0%B7%E4%BE%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++-Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/C%2B%2B%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reactor
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/GTest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GTest
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/Google%20benchmark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google benchmark
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/clang-format%20%20%26%20clang-tidy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    clang-format &amp; clang-tidy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_1_6" >
        
          
          <label class="md-nav__link" for="__nav_12_1_6" id="__nav_12_1_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ËØ≠Ê≥ï
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_12_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_1_6">
            <span class="md-nav__icon md-icon"></span>
            ËØ≠Ê≥ï
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/%E8%AF%AD%E6%B3%95/C%2B%2B%20Template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ Template
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/%E8%AF%AD%E6%B3%95/C%2B%2B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%2B%2B/%E8%AF%AD%E6%B3%95/C%2B%2B%E5%BA%93%E5%87%BD%E6%95%B0/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    C++ Â∫ìÂáΩÊï∞
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_2" >
        
          
          <label class="md-nav__link" for="__nav_12_2" id="__nav_12_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CËØ≠Ë®Ä
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_2">
            <span class="md-nav__icon md-icon"></span>
            CËØ≠Ë®Ä
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CËØ≠Ë®Ä
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CËØ≠Ë®ÄÂπ∂ÂèëÁºñÁ®ã
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80%E7%9A%84%E7%BC%96%E8%AF%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CÁöÑÁºñËØë
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/C%E8%AF%AD%E8%A8%80/ELF%E6%96%87%E4%BB%B6%E7%BB%93%E6%9E%84/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ELFÊñá‰ª∂ÁªìÊûÑ
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_3" >
        
          
          <label class="md-nav__link" for="__nav_12_3" id="__nav_12_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Go
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_3">
            <span class="md-nav__icon md-icon"></span>
            Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/Go-tricks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go-tricks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/Go%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GoÂü∫Á°ÄËØ≠Ê≥ï
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/Go%E5%B9%B6%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âπ∂Âèë
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/Go%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E8%A7%84%E8%8C%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Standard Go Project Layout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/jwt-go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jwt-go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Go/protobuf%E4%BD%BF%E7%94%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    protobuf‰ΩøÁî®
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_4" >
        
          
          <label class="md-nav__link" for="__nav_12_4" id="__nav_12_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Java
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_4">
            <span class="md-nav__icon md-icon"></span>
            Java
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/Java-OI%E6%B5%81/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JavaOIÊµÅ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Java/linux%E5%AE%89%E8%A3%85mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LinuxÂÆâË£Ömysql
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_5" >
        
          
          <label class="md-nav__link" for="__nav_12_5" id="__nav_12_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Rust
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_5">
            <span class="md-nav__icon md-icon"></span>
            Rust
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/Cargo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cargo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/Rust-Code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rust Code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/rust%E8%AE%B0%E5%BD%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RustËÆ∞ÂΩï
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/simple%20but%20useful%20code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ‰ª£Á†Å
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12_5_5" >
        
          
          <label class="md-nav__link" for="__nav_12_5_5" id="__nav_12_5_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    ËØ≠Ê≥ï
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_12_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12_5_5">
            <span class="md-nav__icon md-icon"></span>
            ËØ≠Ê≥ï
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/0.%E5%AE%89%E8%A3%85Rust%E5%92%8CHello%2CWorld/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÂÆâË£ÖRustÂíåHello,World
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/1.Rust%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    RustÂü∫Êú¨ËØ≠Ê≥ï
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/10.%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÁîüÂëΩÂë®Êúü
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/11.%E9%97%AD%E5%8C%85%E5%92%8C%E8%BF%AD%E4%BB%A3%E5%99%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Èó≠ÂåÖÂíåËø≠‰ª£Âô®
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/12.%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Êô∫ËÉΩÊåáÈíà
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/13.%E5%B9%B6%E5%8F%91/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Âπ∂Âèë
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/14.%20%E8%BF%9B%E9%98%B6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ËøõÈò∂
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/2.%E6%89%80%E6%9C%89%E6%9D%83/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÊâÄÊúâÊùÉ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/3.%E7%BB%93%E6%9E%84%E4%BD%93/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÁªìÊûÑ‰Ωì
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/4.%E6%9E%9A%E4%B8%BE%E5%92%8C%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Êûö‰∏æÂíåÊ®°ÂºèÂåπÈÖç
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/5.%E5%B8%B8%E8%A7%81%E9%9B%86%E5%90%88%28Vec%E3%80%81string%E3%80%81map%29/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Â∏∏ËßÅÈõÜÂêà
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/6.%E6%A8%A1%E5%9D%97/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ê®°Âùó Crate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/7.%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÈîôËØØÂ§ÑÁêÜ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/8.%E6%B3%9B%E5%9E%8B/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ê≥õÂûã
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/9.Trait/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trait
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/Rust/%E8%AF%AD%E6%B3%95/%E6%9E%84%E5%BB%BA%E5%A4%9A%E7%BA%BF%E7%A8%8Bweb%E6%9C%8D%E5%8A%A1%E5%99%A8/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ÊûÑÂª∫Â§öÁ∫øÁ®ãwebÊúçÂä°Âô®
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∏ÉÂºèÊùÉÈôêÊ†°È™å
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#oauth-20" class="md-nav__link">
    <span class="md-ellipsis">
      OAuth 2.0 ÂÆûÁé∞ÂçïÁÇπÁôªÂΩï
    </span>
  </a>
  
    <nav class="md-nav" aria-label="OAuth 2.0 ÂÆûÁé∞ÂçïÁÇπÁôªÂΩï">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      ÂõõÁßçÊéàÊùÉÊ®°Âºè
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      Êê≠Âª∫È™åËØÅÊúçÂä°Âô®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enableoauth2sso" class="md-nav__link">
    <span class="md-ellipsis">
      Âü∫‰∫é@EnableOAuth2SsoÂÆûÁé∞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enableresourceserver" class="md-nav__link">
    <span class="md-ellipsis">
      Âü∫‰∫é@EnableResourceServerÂÆûÁé∞
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jwttoken" class="md-nav__link">
    <span class="md-ellipsis">
      ‰ΩøÁî®jwtÂ≠òÂÇ®Token
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#redis" class="md-nav__link">
    <span class="md-ellipsis">
      Redis‰∏éÂàÜÂ∏ÉÂºè
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Redis‰∏éÂàÜÂ∏ÉÂºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    <span class="md-ellipsis">
      ‰∏ª‰ªéÂ§çÂà∂
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    <span class="md-ellipsis">
      Âì®ÂÖµÊ®°Âºè
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      ÈõÜÁæ§Êê≠Âª∫
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∏ÉÂºèÈîÅ
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">
      MySQL‰∏éÂàÜÂ∏ÉÂºè
    </span>
  </a>
  
    <nav class="md-nav" aria-label="MySQL‰∏éÂàÜÂ∏ÉÂºè">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    <span class="md-ellipsis">
      ‰∏ª‰ªéÂ§çÂà∂
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∫ìÂàÜË°®
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sharding-jdbc" class="md-nav__link">
    <span class="md-ellipsis">
      Sharding JDBC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      ÂàÜÂ∏ÉÂºèÂ∫èÂàóÁÆóÊ≥ï
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    <span class="md-ellipsis">
      ËØªÂÜôÂàÜÁ¶ª
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="_1">ÂæÆÊúçÂä°Â∫îÁî®<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h1>
<p>ÂâçÈù¢Êàë‰ª¨Â∑≤ÁªèÂÆåÊàê‰∫ÜSpringCloudAlibabaÁöÑÂ≠¶‰π†ÔºåÊàë‰ª¨ÂØπ‰∏Ä‰∏™ÂæÆÊúçÂä°È°πÁõÆÁöÑÊû∂ÊûÑ‰ΩìÁ≥ªÂ∑≤ÁªèÊúâ‰∫Ü‰∏ÄÂÆöÁöÑ‰∫ÜËß£ÔºåÈÇ£‰πàÊú¨Á´†Êàë‰ª¨Â∞ÜÂú®Â∫îÁî®Â±ÇÈù¢ÁªßÁª≠Êé¢ËÆ®ÂæÆÊúçÂä°„ÄÇ</p>
<h2 id="_2">ÂàÜÂ∏ÉÂºèÊùÉÈôêÊ†°È™å<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h2>
<p>ËôΩÁÑ∂ÂÆåÊàêÂâçÈù¢ÁöÑÈÉ®ÂàÜÔºåÊàë‰ª¨Â∑≤ÁªèÂèØ‰ª•Ëá™Â∑±ÂéªÁºñÂÜô‰∏Ä‰∏™ÊØîËæÉ‰∏≠ËßÑ‰∏≠Áü©ÁöÑÂæÆÊúçÂä°È°πÁõÆ‰∫ÜÔºå‰ΩÜÊòØËøòÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÊàë‰ª¨Ê≤°ÊúâËß£ÂÜ≥ÔºåÁôªÂΩïÈóÆÈ¢ò„ÄÇÂÅáÂ¶ÇÁé∞Âú®Ë¶ÅÊ±ÇÁî®Êà∑ÁôªÂΩï‰πãÂêéÔºåÊâçËÉΩËøõË°åÂõæ‰π¶ÁöÑÊü•ËØ¢„ÄÅÂÄüÈòÖÁ≠âÊìç‰ΩúÔºåÈÇ£‰πàÊàë‰ª¨ÂèàËØ•Â¶Ç‰ΩïËÆæËÆ°Ëøô‰∏™Á≥ªÁªüÂë¢Ôºü</p>
<p>ÂõûÈ°æÊàë‰ª¨‰πãÂâçËøõË°åÊùÉÈôêÊ†°È™åÁöÑÂéüÁêÜÔºåÊúçÂä°Âô®ÊòØÂ¶Ç‰ΩïÂà§ÂÆö‰∏Ä‰∏™ËØ∑Ê±ÇÊòØÊù•Ëá™Âì™‰∏™Áî®Êà∑ÁöÑÂë¢Ôºü</p>
<ul>
<li>È¶ñÂÖàÊµèËßàÂô®‰ºöÂêëÊúçÂä°Á´ØÂèëÈÄÅËØ∑Ê±ÇÔºåËÆøÈóÆÊàë‰ª¨ÁöÑÁΩëÁ´ô„ÄÇ</li>
<li>ÊúçÂä°Á´ØÊî∂Âà∞ËØ∑Ê±ÇÂêéÔºå‰ºöÂàõÂª∫‰∏Ä‰∏™SESSION IDÔºåÂπ∂ÊöÇÊó∂Â≠òÂÇ®Âú®ÊúçÂä°Á´ØÔºåÁÑ∂Âêé‰ºöÂèëÈÄÅÁªôÊµèËßàÂô®‰Ωú‰∏∫Cookie‰øùÂ≠ò„ÄÇ</li>
<li>‰πãÂêéÊµèËßàÂô®‰ºö‰∏ÄÁõ¥Êê∫Â∏¶Ê≠§CookieËÆøÈóÆÊúçÂä°Âô®ÔºåËøôÊ†∑Âú®Êî∂Âà∞ËØ∑Ê±ÇÂêéÔºåÂ∞±ËÉΩÊ†πÊçÆÊê∫Â∏¶ÁöÑCookie‰∏≠ÁöÑSESSION IDÂà§Êñ≠ÊòØÂì™‰∏™Áî®Êà∑‰∫Ü„ÄÇ</li>
<li>ËøôÊ†∑ÊúçÂä°Á´ØÂíåÊµèËßàÂô®‰πãÈó¥ÂèØ‰ª•ËΩªÊùæÂú∞Âª∫Á´ã‰ºöËØù‰∫Ü„ÄÇ</li>
</ul>
<p>‰ΩÜÊòØÊàë‰ª¨ÊÉ≥‰∏Ä‰∏ãÔºåÊàë‰ª¨Áé∞Âú®ÈááÁî®ÁöÑÊòØÂàÜÂ∏ÉÂºèÁöÑÁ≥ªÁªüÔºåÈÇ£‰πàÂú®Áî®Êà∑ÊúçÂä°ËøõË°åÁôªÂΩï‰πãÂêéÔºåÂÖ∂‰ªñÊúçÂä°ÊØîÂ¶ÇÂõæ‰π¶ÊúçÂä°ÂíåÂÄüÈòÖÊúçÂä°ÔºåÂÆÉ‰ª¨‰ºöÁü•ÈÅìÁî®Êà∑ÁôªÂΩï‰∫ÜÂêóÔºü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0uko0a27mj21ia08y0u9.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220401220634827" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0uko0a27mj21ia08y0u9.jpg" /></a></p>
<p>ÂÆûÈôÖ‰∏äÊàë‰ª¨ÁôªÂΩïÂà∞Áî®Êà∑ÊúçÂä°‰πãÂêéÔºåSession‰∏≠ÁöÑÁî®Êà∑Êï∞ÊçÆÂè™‰ºöÂú®Áî®Êà∑ÊúçÂä°ÁöÑÂ∫îÁî®‰∏≠‰øùÂ≠òÔºåËÄåÂú®ÂÖ∂‰ªñÊúçÂä°‰∏≠ÔºåÂπ∂Ê≤°ÊúâÂØπÂ∫îÁöÑ‰ø°ÊÅØÔºå‰ΩÜÊòØÊàë‰ª¨Áé∞Âú®Â∏åÊúõÁöÑÊòØÔºåÊâÄÊúâÁöÑÊúçÂä°ÈÉΩËÉΩÂ§üÂêåÊ≠•Ëøô‰∫õSession‰ø°ÊÅØÔºåËøôÊ†∑Êàë‰ª¨ÊâçËÉΩÂÆûÁé∞Âú®Áî®Êà∑ÊúçÂä°ÁôªÂΩï‰πãÂêéÂÖ∂‰ªñÊúçÂä°ÈÉΩËÉΩÁü•ÈÅìÔºåÈÇ£‰πàÊàë‰ª¨ËØ•Â¶Ç‰ΩïÂÆûÁé∞SessionÁöÑÂêåÊ≠•Âë¢Ôºü</p>
<ol>
<li>Êàë‰ª¨ÂèØ‰ª•Âú®ÊØèÂè∞ÊúçÂä°Âô®‰∏äÈÉΩÂ§çÂà∂‰∏Ä‰ªΩSessionÔºå‰ΩÜÊòØËøôÊ†∑ÊòæÁÑ∂ÊòØÂæàÊµ™Ë¥πÊó∂Èó¥ÁöÑÔºåÂπ∂‰∏îÁî®Êà∑È™åËØÅÊï∞ÊçÆÂç†Áî®ÁöÑÂÜÖÂ≠ò‰ºöÊàêÂÄçÁöÑÂ¢ûÂä†„ÄÇ</li>
<li>Â∞ÜSessionÁßªÂá∫ÊúçÂä°Âô®ÔºåÁî®Áªü‰∏ÄÂ≠òÂÇ®Êù•Â≠òÊîæÔºåÊØîÂ¶ÇÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•Âú®RedisÊàñÊòØMySQL‰∏≠Â≠òÊîæÁî®Êà∑ÁöÑSession‰ø°ÊÅØÔºåËøôÊ†∑ÊâÄÊúâÁöÑÊúçÂä°Âô®Âú®ÈúÄË¶ÅËé∑ÂèñSession‰ø°ÊÅØÊó∂ÔºåÁªü‰∏ÄËÆøÈóÆRedisÊàñÊòØMySQLÂç≥ÂèØÔºåËøôÊ†∑Â∞±ËÉΩ‰øùËØÅÊâÄÊúâÊúçÂä°ÈÉΩÂèØ‰ª•ÂêåÊ≠•Session‰∫ÜÔºàÊòØ‰∏çÊòØË∂äÊù•Ë∂äÊÑüËßâÂè™Ë¶ÅÊúâÈóÆÈ¢òÔºåÊ≤°Êúâ‰ªÄ‰πàÊòØÂä†‰∏Ä‰∏™‰∏≠Èó¥‰ª∂Ëß£ÂÜ≥‰∏ç‰∫ÜÁöÑÔºâ</li>
</ol>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v7jwaum4j21qk0amq4h.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402111827054" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v7jwaum4j21qk0amq4h.jpg" /></a></p>
<p>ÈÇ£‰πàÔºåÊàë‰ª¨Â∞±ÁùÄÈáçÊù•Á†îÁ©∂‰∏Ä‰∏ãÔºåÁÑ∂ÂêéÂÆûÁé∞2Âè∑ÊñπÊ°àÔºåËøôÈáåÊàë‰ª¨Â∞±‰ΩøÁî®Redis‰Ωú‰∏∫SessionÁªü‰∏ÄÂ≠òÂÇ®ÔºåÊàë‰ª¨Êää‰∏ÄÂºÄÂßãÁöÑÂéãÁº©ÂåÖÈáçÊñ∞Ëß£Âéã‰∏ÄÊ¨°ÔºåÂèàÊù•‰ªéÂ§¥ÂºÄÂßãÁºñÂÜôÂêß„ÄÇ</p>
<p>ËøôÈáåÊàë‰ª¨Â∞±Âè™‰ΩøÁî®NacosÂ∞±Ë°å‰∫ÜÔºåÂíå‰πãÂâç‰∏ÄÊ†∑ÔºåÊàë‰ª¨ÊääNacosÁöÑÂåÖÂØºÂÖ•‰∏Ä‰∏ãÔºåÁÑ∂ÂêéËøõË°å‰∏Ä‰∫õÈÖçÁΩÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v6vpkivcj22ca0baju3.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402105512397" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v6vpkivcj22ca0baju3.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨ÈúÄË¶Å‰∏∫ÊØè‰∏™ÊúçÂä°ÈÉΩÊ∑ªÂä†È™åËØÅÊú∫Âà∂ÔºåÈ¶ñÂÖàÂØºÂÖ•‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="cm">&lt;!--  SpringSession RedisÊîØÊåÅ  --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.session<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-session-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
<span class="cm">&lt;!--  Ê∑ªÂä†RedisÁöÑStarter  --&gt;</span>
<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-data-redis<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÊàë‰ª¨‰æùÁÑ∂‰ΩøÁî®SpringSecurityÊ°ÜÊû∂‰Ωú‰∏∫ÊùÉÈôêÊ†°È™åÊ°ÜÊû∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-security<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Âú®ÊØè‰∏™ÊúçÂä°ÈÉΩÁºñÂÜô‰∏Ä‰∏ãÂØπÂ∫îÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">session</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Â≠òÂÇ®Á±ªÂûã‰øÆÊîπ‰∏∫redis</span>
<span class="w">    </span><span class="nt">store-type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis</span>
<span class="w">  </span><span class="nt">redis</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># RedisÊúçÂä°Âô®ÁöÑ‰ø°ÊÅØÔºåËØ•ÂíãÂÜôÂíãÂÜô</span>
<span class="w">    </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1.14.121.107</span>
</code></pre></div>
<p>ËøôÊ†∑ÔºåÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊØè‰∏™ÊúçÂä°ÁöÑÊé•Âè£ÈÉΩ‰ºöË¢´SpringSecurityÊâÄ‰øùÊä§ÔºåÂè™ÊúâÁôªÂΩïÊàêÂäü‰πãÂêéÔºåÊâçÂèØ‰ª•Ë¢´ËÆøÈóÆ„ÄÇ</p>
<p>Êàë‰ª¨Êù•ÊâìÂºÄNacosÁúãÁúãÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v6x7rkvuj22cm09sq4s.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402105638986" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v6x7rkvuj22cm09sq4s.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞‰∏â‰∏™ÊúçÂä°ÈÉΩÊ≠£Â∏∏Ê≥®ÂÜå‰∫ÜÔºåÊé•ÁùÄÊàë‰ª¨ÂéªËÆøÈóÆÂõæ‰π¶ÊúçÂä°Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v6yoo6hbj226g0jkjsy.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402105803658" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v6yoo6hbj226g0jkjsy.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåËÆøÈóÆÂ§±Ë¥•ÔºåÁõ¥Êé•ÊääÊàë‰ª¨ÁªôÈáçÂÆöÂêëÂà∞ÁôªÈôÜÈ°µÈù¢‰∫ÜÔºå‰πüÂ∞±ÊòØËØ¥ÂøÖÈ°ªÁôªÈôÜ‰πãÂêéÊâçËÉΩËÆøÈóÆÔºåÂêåÊ†∑ÁöÑÊñπÂºèÂéªËÆøÈóÆÂÖ∂‰ªñÊúçÂä°Ôºå‰πüÊòØ‰∏ÄÊ†∑ÁöÑÊïàÊûú„ÄÇ</p>
<p>Áî±‰∫éÁé∞Âú®ÊòØÁªü‰∏ÄSessionÂ≠òÂÇ®ÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÂèØ‰ª•Âú®‰ªªÊÑè‰∏Ä‰∏™ÊúçÂä°ÁôªÂΩï‰πãÂêéÔºåÂÖ∂‰ªñÊúçÂä°ÈÉΩÂèØ‰ª•Ê≠£Â∏∏ËÆøÈóÆÔºåÁé∞Âú®Êàë‰ª¨Âú®ÂΩìÂâçÈ°µÈù¢ÁôªÂΩïÔºåÁôªÂΩï‰πãÂêéÂèØ‰ª•ÁúãÂà∞Âõæ‰π¶ÊúçÂä°ËÉΩÂ§üÊ≠£Â∏∏ËÆøÈóÆ‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v73kpsaaj219u06a0tg.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402110245827" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v73kpsaaj219u06a0tg.jpg" /></a></p>
<p>ÂêåÊó∂Áî®Êà∑ÊúçÂä°‰πüËÉΩÊ≠£Â∏∏ËÆøÈóÆ‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v74bgewzj216m06874r.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402110328674" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v74bgewzj216m06874r.jpg" /></a></p>
<p>Êàë‰ª¨ÂèØ‰ª•Êü•Áúã‰∏Ä‰∏ãRedisÊúçÂä°Âô®‰∏≠ÊòØ‰∏çÊòØÂ≠òÂÇ®‰∫ÜÊàë‰ª¨ÁöÑSession‰ø°ÊÅØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v754p9ihj20z8048aax.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402110416031" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v754p9ihj20z8048aax.jpg" /></a></p>
<p>ËôΩÁÑ∂ÁúãËµ∑Êù•Â•ΩÂÉèÁ°ÆÂÆûÊ≤°Âï•ÈóÆÈ¢ò‰∫ÜÔºå‰ΩÜÊòØÂÄüÈòÖÊúçÂä°ÁÇ∏‰∫ÜÔºåÊàë‰ª¨Êù•ÁúãÁúã‰∏∫‰ªÄ‰πàÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v768pgt2j21sk096q7k.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220402110519893" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h0v768pgt2j21sk096q7k.jpg" /></a></p>
<p>Âú®RestTemplateËøõË°åËøúÁ®ãË∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÁî±‰∫éÊàë‰ª¨ÁöÑËØ∑Ê±ÇÊ≤°ÊúâÊê∫Â∏¶ÂØπÂ∫îSESSIONÁöÑCookieÔºåÊâÄ‰ª•ÂØºËá¥È™åËØÅÂ§±Ë¥•ÔºåËÆøÈóÆ‰∏çÊàêÂäüÔºåËøîÂõû401ÔºåÊâÄ‰ª•ËôΩÁÑ∂ËøôÁßçÊñπÊ°àÁúãËµ∑Êù•ÊØîËæÉÂêàÁêÜÔºå‰ΩÜÊòØÂú®Êàë‰ª¨ÁöÑÂÆûÈôÖ‰ΩøÁî®‰∏≠ÔºåËøòÊòØÂ≠òÂú®‰∏Ä‰∫õ‰∏ç‰æøÁöÑ„ÄÇ</p>
<hr />
<h2 id="oauth-20">OAuth 2.0 ÂÆûÁé∞ÂçïÁÇπÁôªÂΩï<a class="headerlink" href="#oauth-20" title="Permanent link">&para;</a></h2>
<p><strong>Ê≥®ÊÑèÔºö</strong>Á¨¨‰∏ÄÊ¨°Êé•Ëß¶ÂèØËÉΩ‰ºöÊØîËæÉÈöæÔºå‰∏çÂ§™Â•ΩÁêÜËß£ÔºåÈúÄË¶ÅÂ§öÂÆûË∑µÂíåËßÇÂØü„ÄÇ</p>
<p>ÂâçÈù¢Êàë‰ª¨ËôΩÁÑ∂‰ΩøÁî®‰∫ÜÁªü‰∏ÄÂ≠òÂÇ®Êù•Ëß£ÂÜ≥SessionÂÖ±‰∫´ÈóÆÈ¢òÔºå‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞Â∞±ÁÆóÂÆûÁé∞‰∫ÜSessionÂÖ±‰∫´Ôºå‰æùÁÑ∂Â≠òÂú®‰∏Ä‰∫õÈóÆÈ¢òÔºåÁî±‰∫éÊàë‰ª¨ÊØè‰∏™ÊúçÂä°ÈÉΩÊúâËá™Â∑±ÁöÑÈ™åËØÅÊ®°ÂùóÔºåÂÆûÈôÖ‰∏äÊï¥‰∏™Á≥ªÁªüÊòØÂ≠òÂú®ÂÜó‰ΩôÂäüËÉΩÁöÑ„ÄÅÂêåÊó∂ËøòÊúâÊàë‰ª¨‰∏äÈù¢Âá∫Áé∞ÁöÑÈóÆÈ¢òÔºåÈÇ£‰πàËÉΩÂê¶ÂÆûÁé∞Âè™Âú®‰∏Ä‰∏™ÊúçÂä°ËøõË°åÁôªÂΩïÔºåÂ∞±ÂèØ‰ª•ËÆøÈóÆÂÖ∂‰ªñÁöÑÊúçÂä°Âë¢Ôºü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h12or8uglrj21s20gawh8.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220408223238760" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h12or8uglrj21s20gawh8.jpg" /></a></p>
<p>ÂÆûÈôÖ‰∏ä‰πãÂâçÁöÑÁôªÂΩïÊ®°ÂºèÁß∞‰∏∫Â§öÁÇπÁôªÂΩïÔºåËÄåÊàë‰ª¨Â∏åÊúõÁöÑÊòØÂÆûÁé∞ÂçïÁÇπÁôªÈôÜÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ÂæóÊâæ‰∏Ä‰∏™Êõ¥Â•ΩÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ</p>
<p>ËøôÈáåÊàë‰ª¨È¶ñÂÖàÈúÄË¶Å‰∫ÜËß£‰∏ÄÁßçÂÖ®Êñ∞ÁöÑÁôªÂΩïÊñπÂºèÔºö<strong>OAuth 2.0</strong>ÔºåÊàë‰ª¨ÁªèÂ∏∏ÁúãÂà∞‰∏Ä‰∫õÁΩëÁ´ôÊîØÊåÅÁ¨¨‰∏âÊñπÁôªÂΩïÔºåÊØîÂ¶ÇÊ∑òÂÆù„ÄÅÂí∏È±ºÊàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®ÊîØ‰ªòÂÆùËøõË°åÁôªÂΩïÔºåËÖæËÆØÊ∏∏ÊàèÂèØ‰ª•Áî®QQÊàñÊòØÂæÆ‰ø°ÁôªÈôÜÔºå‰ª•ÂèäÂæÆ‰ø°Â∞èÁ®ãÂ∫èÈÉΩÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂæÆ‰ø°ËøõË°åÁôªÂΩï„ÄÇÊàë‰ª¨Áü•ÈÅìÂÆÉ‰ª¨Âπ∂‰∏çÊòØÂ±û‰∫éÂêå‰∏Ä‰∏™Á≥ªÁªüÔºåÊØîÂ¶ÇÊ∑òÂÆùÂíåÂí∏È±ºÈÉΩ‰∏çÂ±û‰∫éÊîØ‰ªòÂÆùËøô‰∏™Â∫îÁî®Ôºå‰ΩÜÊòØÁî±‰∫éÈúÄË¶ÅËé∑ÂèñÊîØ‰ªòÂÆùÁöÑÁî®Êà∑‰ø°ÊÅØÔºåËøôÊó∂Êàë‰ª¨Â∞±ÈúÄË¶Å‰ΩøÁî® OAuth2.0 Êù•ÂÆûÁé∞Á¨¨‰∏âÊñπÊéàÊùÉÔºåÂü∫‰∫éÁ¨¨‰∏âÊñπÂ∫îÁî®ËÆøÈóÆÁî®Êà∑‰ø°ÊÅØÁöÑÊùÉÈôêÔºàÊú¨Ë¥®‰∏äÂ∞±ÊòØÁªôÂà´‰∫∫Ë∞ÉÁî®Ëá™Â∑±ÊúçÂä°Êé•Âè£ÁöÑÊùÉÈôêÔºâÔºåÈÇ£‰πàÂÆÉÊòØÂ¶Ç‰ΩïÂÆûÁé∞ÁöÑÂë¢Ôºü</p>
<h3 id="_3">ÂõõÁßçÊéàÊùÉÊ®°Âºè<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>Êàë‰ª¨ËøòÊòØ‰ªéÁêÜËÆ∫ÂºÄÂßãËÆ≤Ëß£ÔºåOAuth 2.0‰∏ÄÂÖ±ÊúâÂõõÁßçÊéàÊùÉÊ®°ÂºèÔºö</p>
<ol>
<li><strong>ÂÆ¢Êà∑Á´ØÊ®°ÂºèÔºàClient CredentialsÔºâ</strong></li>
</ol>
<p>ËøôÊòØÊúÄÁÆÄÂçïÁöÑ‰∏ÄÁßçÊ®°ÂºèÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•ÂêëÈ™åËØÅÊúçÂä°Âô®ËØ∑Ê±Ç‰∏Ä‰∏™TokenÔºàËøôÈáåÂèØËÉΩÊúâ‰∫õÂ∞è‰ºô‰º¥ÂØπTokenÁöÑÊ¶ÇÂøµ‰∏çÊòØÂæàÁÜüÊÇâÔºåTokenÁõ∏ÂΩì‰∫éÊòØ‰∏Ä‰∏™‰ª§ÁâåÔºåÊàë‰ª¨ÈúÄË¶ÅÂú®È™åËØÅÊúçÂä°Âô®<strong>ÔºàUser Account And AuthenticationÔºâ</strong>ÊúçÂä°ÊãøÂà∞‰ª§Áâå‰πãÂêéÔºåÊâçËÉΩÂéªËÆøÈóÆËµÑÊ∫êÔºåÊØîÂ¶ÇÁî®Êà∑‰ø°ÊÅØ„ÄÅÂÄüÈòÖ‰ø°ÊÅØÁ≠âÔºåËøôÊ†∑ËµÑÊ∫êÊúçÂä°Âô®ÊâçËÉΩÁü•ÈÅìÊàë‰ª¨ÊòØË∞Å‰ª•ÂèäÊòØÂê¶ÊàêÂäüÁôªÂΩï‰∫ÜÔºâ</p>
<p>ÂΩìÁÑ∂ÔºåËøôÈáåÁöÑÂâçÁ´ØÈ°µÈù¢Âè™ÊòØ‰∏Ä‰∏™‰æãÂ≠êÔºåÂÆÉËøòÂèØ‰ª•ÊòØÂÖ∂‰ªñ‰ªª‰ΩïÁ±ªÂûãÁöÑ<strong>ÂÆ¢Êà∑Á´Ø</strong>ÔºåÊØîÂ¶ÇApp„ÄÅÂ∞èÁ®ãÂ∫èÁîöËá≥ÊòØÁ¨¨‰∏âÊñπÂ∫îÁî®ÁöÑÊúçÂä°„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h13srxpu4pj21720940tz.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220409213716233" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h13srxpu4pj21720940tz.jpg" /></a></p>
<p>ËôΩÁÑ∂ËøôÁßçÊ®°ÂºèÊØîËæÉÁÆÄ‰æøÔºå‰ΩÜÊòØÂ∑≤ÁªèÂ§±Âéª‰∫ÜÁî®Êà∑È™åËØÅÁöÑÊÑè‰πâÔºåÂéãÊ†πÂ∞±‰∏çÊòØÁªôÁî®Êà∑Ê†°È™åÂáÜÂ§áÁöÑÔºåËÄåÊòØÊõ¥ÈÄÇÁî®‰∫éÊúçÂä°ÂÜÖÈÉ®Ë∞ÉÁî®ÁöÑÂú∫ÊôØ„ÄÇ</p>
<ol>
<li><strong>ÂØÜÁ†ÅÊ®°ÂºèÔºàResource Owner Password CredentialsÔºâ</strong></li>
</ol>
<p>ÂØÜÁ†ÅÊ®°ÂºèÁõ∏ÊØîÂÆ¢Êà∑Á´ØÊ®°ÂºèÔºåÂ∞±Â§ö‰∫ÜÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÁöÑ‰ø°ÊÅØÔºåÁî®Êà∑ÈúÄË¶ÅÊèê‰æõÂØπÂ∫îË¥¶Âè∑ÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºåÊâçËÉΩËé∑ÂèñÂà∞Token„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h13srezf2xj218k09c0u6.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220409213646255" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h13srezf2xj218k09c0u6.jpg" /></a></p>
<p>ËôΩÁÑ∂ËøôÊ†∑ÁúãËµ∑Êù•ÊØîËæÉÂêàÁêÜÔºå‰ΩÜÊòØ‰ºöÁõ¥Êé•Â∞ÜË¥¶Âè∑ÂíåÂØÜÁ†ÅÊ≥ÑÈú≤ÁªôÂÆ¢Êà∑Á´ØÔºåÈúÄË¶ÅÂêéÂè∞ÂÆåÂÖ®‰ø°‰ªªÂÆ¢Êà∑Á´Ø‰∏ç‰ºöÊãøË¥¶Âè∑ÂØÜÁ†ÅÂéªÂπ≤ÂÖ∂‰ªñÂùè‰∫ãÔºåÊâÄ‰ª•Ëøô‰πü‰∏çÊòØÊàë‰ª¨Â∏∏ËßÅÁöÑ„ÄÇ</p>
<ol>
<li><strong>ÈöêÂºèÊéàÊùÉÊ®°ÂºèÔºàImplicit GrantÔºâ</strong></li>
</ol>
<p>È¶ñÂÖàÁî®Êà∑ËÆøÈóÆÈ°µÈù¢Êó∂Ôºå‰ºöÈáçÂÆöÂêëÂà∞ËÆ§ËØÅÊúçÂä°Âô®ÔºåÊé•ÁùÄËÆ§ËØÅÊúçÂä°Âô®ÁªôÁî®Êà∑‰∏Ä‰∏™ËÆ§ËØÅÈ°µÈù¢ÔºåÁ≠âÂæÖÁî®Êà∑ÊéàÊùÉÔºåÁî®Êà∑Â°´ÂÜô‰ø°ÊÅØÂÆåÊàêÊéàÊùÉÂêéÔºåËÆ§ËØÅÊúçÂä°Âô®ËøîÂõûToken„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h13s7a0nxzj21ey0da0uw.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220409211722092" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h13s7a0nxzj21ey0da0uw.jpg" /></a></p>
<p>ÂÆÉÈÄÇÁî®‰∫éÊ≤°ÊúâÊúçÂä°Á´ØÁöÑÁ¨¨‰∏âÊñπÂ∫îÁî®È°µÈù¢ÔºåÂπ∂‰∏îÁõ∏ÊØîÂâçÈù¢‰∏ÄÁßçÂΩ¢ÂºèÔºåÈ™åËØÅÈÉΩÊòØÂú®È™åËØÅÊúçÂä°Âô®ËøõË°åÁöÑÔºåÊïèÊÑü‰ø°ÊÅØ‰∏ç‰ºöËΩªÊòìÊ≥ÑÈú≤Ôºå‰ΩÜÊòØToken‰æùÁÑ∂Â≠òÂú®Ê≥ÑÈú≤ÁöÑÈ£éÈô©„ÄÇ</p>
<ol>
<li><strong>ÊéàÊùÉÁ†ÅÊ®°ÂºèÔºàAuthrization CodeÔºâ</strong></li>
</ol>
<p>ËøôÁßçÊ®°ÂºèÊòØÊúÄÂÆâÂÖ®ÁöÑ‰∏ÄÁßçÊ®°ÂºèÔºå‰πüÊòØÊé®Ëçê‰ΩøÁî®ÁöÑ‰∏ÄÁßçÔºåÊØîÂ¶ÇÊàë‰ª¨ÊâãÊú∫‰∏äÁöÑÂæàÂ§öAppÈÉΩÊòØ‰ΩøÁî®ÁöÑËøôÁßçÊ®°Âºè„ÄÇ</p>
<p>Áõ∏ÊØîÈöêÂºèÊéàÊùÉÊ®°ÂºèÔºåÂÆÉÂπ∂‰∏ç‰ºöÁõ¥Êé•ËøîÂõûTokenÔºåËÄåÊòØËøîÂõûÊéàÊùÉÁ†ÅÔºåÁúüÊ≠£ÁöÑTokenÊòØÈÄöËøáÂ∫îÁî®ÊúçÂä°Âô®ËÆøÈóÆÈ™åËØÅÊúçÂä°Âô®Ëé∑ÂæóÁöÑ„ÄÇÂú®‰∏ÄÂºÄÂßãÁöÑÊó∂ÂÄôÔºåÂ∫îÁî®ÊúçÂä°Âô®ÔºàÂÆ¢Êà∑Á´ØÈÄöËøáËÆøÈóÆËá™Â∑±ÁöÑÂ∫îÁî®ÊúçÂä°Âô®Êù•ËøõËÄåËÆøÈóÆÂÖ∂‰ªñÊúçÂä°ÔºâÂíåÈ™åËØÅÊúçÂä°Âô®‰πãÈó¥‰ºöÂÖ±‰∫´‰∏Ä‰∏™<code>secret</code>ÔºåËøô‰∏™‰∏úË•øÊ≤°ÊúâÂÖ∂‰ªñ‰∫∫Áü•ÈÅìÔºåËÄåÈ™åËØÅÊúçÂä°Âô®Âú®Áî®Êà∑È™åËØÅÂÆåÊàê‰πãÂêéÔºå‰ºöËøîÂõû‰∏Ä‰∏™ÊéàÊùÉÁ†ÅÔºåÂ∫îÁî®ÊúçÂä°Âô®ÊúÄÂêéÂ∞ÜÊéàÊùÉÁ†ÅÂíå<code>secret</code>‰∏ÄËµ∑‰∫§ÁªôÈ™åËØÅÊúçÂä°Âô®ËøõË°åÈ™åËØÅÔºåÂπ∂‰∏îToken‰πüÊòØÂú®ÊúçÂä°Á´Ø‰πãÈó¥‰º†ÈÄíÔºå‰∏ç‰ºöÁõ¥Êé•ÁªôÂà∞ÂÆ¢Êà∑Á´Ø„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h13ue89sjxj21dg0fq40y.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220409223317823" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h13ue89sjxj21dg0fq40y.jpg" /></a></p>
<p>ËøôÊ†∑Â∞±ÁÆóÊúâ‰∫∫‰∏≠ÈÄîÁ™ÉÂèñ‰∫ÜÊéàÊùÉÁ†ÅÔºå‰πüÊØ´Êó†ÊÑè‰πâÔºåÂõ†‰∏∫ÔºåTokenÁöÑËé∑ÂèñÂøÖÈ°ªÂêåÊó∂Êê∫Â∏¶ÊéàÊùÉÁ†ÅÂíåsecretÔºå‰ΩÜÊòØ<code>secret</code>Á¨¨‰∏âÊñπÊòØÊó†Ê≥ïÂæóÁü•ÁöÑÔºåÂπ∂‰∏îToken‰∏ç‰ºöÁõ¥Êé•‰∏¢ÁªôÂÆ¢Êà∑Á´ØÔºåÂ§ßÂ§ßÂáèÂ∞ë‰∫ÜÊ≥ÑÈú≤ÁöÑÈ£éÈô©„ÄÇ</p>
<p>‰ΩÜÊòØ‰πç‰∏ÄÁúãÔºåOAuth 2.0‰∏çÂ∫îËØ•ÊòØÈÇ£ÁßçÁ¨¨‰∏âÊñπÂ∫îÁî®‰∏∫‰∫ÜËØ∑Ê±ÇÊàë‰ª¨ÁöÑÊúçÂä°ËÄå‰ΩøÁî®ÁöÑÂêóÔºåËÄåÊàë‰ª¨ËøôÈáåÈúÄË¶ÅÁöÑÂè™ÊòØÂÆûÁé∞Âêå‰∏Ä‰∏™Â∫îÁî®ÂÜÖÈÉ®ÊúçÂä°‰πãÈó¥ÁöÑËÆ§ËØÅÔºåÂÖ∂ÂÆûÊàë‰πüÂèØ‰ª•Âà©Áî® OAuth2.0 Êù•ÂÆûÁé∞ÂçïÁÇπÁôªÂΩïÔºåÂè™ÊòØÂ∞ë‰∫ÜËµÑÊ∫êÊúçÂä°Âô®Ëøô‰∏ÄËßíËâ≤ÔºåÂÆ¢Êà∑Á´ØÂ∞±ÊòØÊàë‰ª¨ÁöÑÊï¥‰∏™Á≥ªÁªüÔºåÊé•‰∏ãÊù•Â∞±ËÆ©Êàë‰ª¨Êù•ÂÆûÁé∞‰∏Ä‰∏ã„ÄÇ</p>
<h3 id="_4">Êê≠Âª∫È™åËØÅÊúçÂä°Âô®<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h3>
<p>Á¨¨‰∏ÄÊ≠•Â∞±ÊòØÊúÄÈáçË¶ÅÁöÑÔºåÊàë‰ª¨ÈúÄË¶ÅÊê≠Âª∫‰∏Ä‰∏™È™åËØÅÊúçÂä°Âô®ÔºåÂÆÉÊòØÊàë‰ª¨ËøõË°åÊùÉÈôêÊ†°È™åÁöÑÊ†∏ÂøÉÔºåÈ™åËØÅÊúçÂä°Âô®ÊúâÂæàÂ§öÁöÑÁ¨¨‰∏âÊñπÂÆûÁé∞‰πüÊúâSpringÂÆòÊñπÊèê‰æõÁöÑÂÆûÁé∞ÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®SpringÂÆòÊñπÊèê‰æõÁöÑÈ™åËØÅÊúçÂä°Âô®„ÄÇ</p>
<p>ËøôÈáåÊàë‰ª¨Â∞ÜÊúÄÂºÄÂßã‰øùÂ≠òÂ•ΩÁöÑÈ°πÁõÆËß£ÂéãÔºåÂ∞±ÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÈ°πÁõÆÔºåÈ¶ñÂÖàÊàë‰ª¨Âú®Áà∂È°πÁõÆ‰∏≠Ê∑ªÂä†ÊúÄÊñ∞ÁöÑSpringCloud‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-cloud-dependencies<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2021.0.1<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>Êé•ÁùÄÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊ®°Âùó<code>auth-service</code>ÔºåÊ∑ªÂä†‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependencies&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-web<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>

<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-security<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>

<span class="w">    </span><span class="cm">&lt;!--  OAuth2.0‰æùËµñÔºå‰∏çÂÜçÂÜÖÁΩÆ‰∫ÜÔºåÊâÄ‰ª•ÂæóÊàë‰ª¨Ëá™Â∑±ÊåáÂÆö‰∏Ä‰∏ãÁâàÊú¨  --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-oauth2<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;version&gt;</span>2.2.5.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨‰øÆÊîπ‰∏Ä‰∏ãÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8500</span>
<span class="w">  </span><span class="nt">servlet</span><span class="p">:</span>
<span class="w">    </span><span class="c1">#‰∏∫‰∫ÜÈò≤Ê≠¢‰∏Ä‰ºöÂú®ÊúçÂä°‰πãÈó¥Ë∑≥ËΩ¨ÂØºËá¥CookieÊâìÊû∂ÔºàÂõ†‰∏∫ÊâÄÊúâÊúçÂä°Âú∞ÂùÄÈÉΩÊòØlocalhostÔºåÈÉΩ‰ºöÂ≠òJSESSIONIDÔºâ</span>
<span class="w">    </span><span class="c1">#ËøôÈáå‰øÆÊîπ‰∏Ä‰∏ãcontext-pathÔºåËøôÊ†∑‰øùÂ≠òÁöÑCookie‰ºö‰ΩøÁî®ÊåáÂÆöÁöÑË∑ØÂæÑÔºåÂ∞±‰∏ç‰ºöÂíåÂÖ∂‰ªñÊúçÂä°ÊâìÊû∂‰∫Ü</span>
<span class="w">    </span><span class="c1">#‰ΩÜÊòØÊ≥®ÊÑè‰πãÂêéÁöÑËØ∑Ê±ÇÈÉΩÂæóÂú®ÊúÄÂâçÈù¢Âä†‰∏äËøô‰∏™Ë∑ØÂæÑ</span>
<span class="w">    </span><span class="nt">context-path</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/sso</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÁºñÂÜô‰∏Ä‰∏ãÈÖçÁΩÆÁ±ªÔºåËøôÈáåÈúÄË¶Å‰∏§‰∏™ÈÖçÁΩÆÁ±ªÔºå‰∏Ä‰∏™ÊòØOAuth2ÁöÑÈÖçÁΩÆÁ±ªÔºåËøòÊúâ‰∏Ä‰∏™ÊòØSpringSecurityÁöÑÈÖçÁΩÆÁ±ªÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SecurityConfiguration</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">WebSecurityConfigurerAdapter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">HttpSecurity</span><span class="w"> </span><span class="n">http</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">http</span>
<span class="w">                </span><span class="p">.</span><span class="na">authorizeRequests</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">anyRequest</span><span class="p">().</span><span class="na">authenticated</span><span class="p">()</span><span class="w">  </span><span class="c1">//</span>
<span class="w">                </span><span class="p">.</span><span class="na">and</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">formLogin</span><span class="p">().</span><span class="na">permitAll</span><span class="p">();</span><span class="w">    </span><span class="c1">//‰ΩøÁî®Ë°®ÂçïÁôªÂΩï</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">AuthenticationManagerBuilder</span><span class="w"> </span><span class="n">auth</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">BCryptPasswordEncoder</span><span class="w"> </span><span class="n">encoder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BCryptPasswordEncoder</span><span class="p">();</span>
<span class="w">        </span><span class="n">auth</span>
<span class="w">                </span><span class="p">.</span><span class="na">inMemoryAuthentication</span><span class="p">()</span><span class="w">   </span><span class="c1">//Áõ¥Êé•ÂàõÂª∫‰∏Ä‰∏™Áî®Êà∑ÔºåÊáíÂæóÊêûÊï∞ÊçÆÂ∫ì‰∫Ü</span>
<span class="w">                </span><span class="p">.</span><span class="na">passwordEncoder</span><span class="p">(</span><span class="n">encoder</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">withUser</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">).</span><span class="na">password</span><span class="p">(</span><span class="n">encoder</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="s">&quot;123456&quot;</span><span class="p">)).</span><span class="na">roles</span><span class="p">(</span><span class="s">&quot;USER&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Bean</span><span class="w">   </span><span class="c1">//ËøôÈáåÈúÄË¶ÅÂ∞ÜAuthenticationManagerÊ≥®ÂÜå‰∏∫BeanÔºåÂú®OAuthÈÖçÁΩÆ‰∏≠‰ΩøÁî®</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">AuthenticationManager</span><span class="w"> </span><span class="nf">authenticationManagerBean</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">authenticationManagerBean</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableAuthorizationServer</span><span class="w">   </span><span class="c1">//ÂºÄÂêØÈ™åËØÅÊúçÂä°Âô®</span>
<span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OAuth2Configuration</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AuthorizationServerConfigurerAdapter</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">AuthenticationManager</span><span class="w"> </span><span class="n">manager</span><span class="p">;</span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">BCryptPasswordEncoder</span><span class="w"> </span><span class="n">encoder</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">BCryptPasswordEncoder</span><span class="p">();</span>

<span class="w">    </span><span class="cm">/**</span>
<span class="cm">     * Ëøô‰∏™ÊñπÊ≥ïÊòØÂØπÂÆ¢Êà∑Á´ØËøõË°åÈÖçÁΩÆÔºå‰∏Ä‰∏™È™åËØÅÊúçÂä°Âô®ÂèØ‰ª•È¢ÑËÆæÂæàÂ§ö‰∏™ÂÆ¢Êà∑Á´ØÔºå</span>
<span class="cm">     * ‰πãÂêéËøô‰∫õÊåáÂÆöÁöÑÂÆ¢Êà∑Á´ØÂ∞±ÂèØ‰ª•ÊåâÁÖß‰∏ãÈù¢ÊåáÂÆöÁöÑÊñπÂºèËøõË°åÈ™åËØÅ</span>
<span class="cm">     * @param clients ÂÆ¢Êà∑Á´ØÈÖçÁΩÆÂ∑•ÂÖ∑</span>
<span class="cm">     */</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">ClientDetailsServiceConfigurer</span><span class="w"> </span><span class="n">clients</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">clients</span>
<span class="w">                </span><span class="p">.</span><span class="na">inMemory</span><span class="p">()</span><span class="w">   </span><span class="c1">//ËøôÈáåÊàë‰ª¨Áõ¥Êé•Á°¨ÁºñÁ†ÅÂàõÂª∫ÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•ÂÉèSecurityÈÇ£Ê†∑Ëá™ÂÆö‰πâÊàñÊòØ‰ΩøÁî®JDBC‰ªéÊï∞ÊçÆÂ∫ìËØªÂèñ</span>
<span class="w">                </span><span class="p">.</span><span class="na">withClient</span><span class="p">(</span><span class="s">&quot;web&quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">//ÂÆ¢Êà∑Á´ØÂêçÁß∞ÔºåÈöè‰æøËµ∑Â∞±Ë°å</span>
<span class="w">                </span><span class="p">.</span><span class="na">secret</span><span class="p">(</span><span class="n">encoder</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="s">&quot;654321&quot;</span><span class="p">))</span><span class="w">      </span><span class="c1">//Âè™‰∏éÂÆ¢Êà∑Á´ØÂàÜ‰∫´ÁöÑsecretÔºåÈöè‰æøÂÜôÔºå‰ΩÜÊòØÊ≥®ÊÑèË¶ÅÂä†ÂØÜ</span>
<span class="w">                </span><span class="p">.</span><span class="na">autoApprove</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="w">    </span><span class="c1">//Ëá™Âä®ÂÆ°ÊâπÔºåËøôÈáåÂÖ≥Èó≠ÔºåË¶ÅÁöÑÂ∞±ÊòØ‰∏Ä‰ºö‰ΩìÈ™åÈÇ£ÁßçÊÑüËßâ</span>
<span class="w">                </span><span class="p">.</span><span class="na">scopes</span><span class="p">(</span><span class="s">&quot;book&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;borrow&quot;</span><span class="p">)</span><span class="w">     </span><span class="c1">//ÊéàÊùÉËåÉÂõ¥ÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®ÂÖ®ÈÉ®all</span>
<span class="w">                </span><span class="p">.</span><span class="na">authorizedGrantTypes</span><span class="p">(</span><span class="s">&quot;client_credentials&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;password&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;implicit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;authorization_code&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;refresh_token&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="c1">//ÊéàÊùÉÊ®°ÂºèÔºå‰∏ÄÂÖ±ÊîØÊåÅ5ÁßçÔºåÈô§‰∫Ü‰πãÂâçÊàë‰ª¨‰ªãÁªçÁöÑÂõõÁßç‰πãÂ§ñÔºåËøòÊúâ‰∏Ä‰∏™Âà∑Êñ∞TokenÁöÑÊ®°Âºè</span>
<span class="w">                </span><span class="c1">//ËøôÈáåÊàë‰ª¨Áõ¥Êé•Êää‰∫îÁßçÈÉΩÂÜô‰∏äÔºåÊñπ‰æø‰∏Ä‰ºöÂÆûÈ™åÔºåÂΩìÁÑ∂ÂêÑ‰Ωç‰πüÂèØ‰ª•ÂçïÁã¨Âè™ÂÜô‰∏ÄÁßç‰∏Ä‰∏™‰∏Ä‰∏™ËøõË°åÊµãËØï</span>
<span class="w">                </span><span class="c1">//Áé∞Âú®Êàë‰ª¨ÊåáÂÆöÁöÑÂÆ¢Êà∑Á´ØÂ∞±ÊîØÊåÅËøô‰∫îÁßçÁ±ªÂûãÁöÑÊéàÊùÉÊñπÂºè‰∫Ü</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">AuthorizationServerSecurityConfigurer</span><span class="w"> </span><span class="n">security</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">security</span>
<span class="w">                </span><span class="p">.</span><span class="na">passwordEncoder</span><span class="p">(</span><span class="n">encoder</span><span class="p">)</span><span class="w">    </span><span class="c1">//ÁºñÁ†ÅÂô®ËÆæÂÆö‰∏∫BCryptPasswordEncoder</span>
<span class="w">                </span><span class="p">.</span><span class="na">allowFormAuthenticationForClients</span><span class="p">()</span><span class="w">  </span><span class="c1">//ÂÖÅËÆ∏ÂÆ¢Êà∑Á´Ø‰ΩøÁî®Ë°®ÂçïÈ™åËØÅÔºå‰∏Ä‰ºöÊàë‰ª¨POSTËØ∑Ê±Ç‰∏≠‰ºöÊê∫Â∏¶Ë°®Âçï‰ø°ÊÅØ</span>
<span class="w">                </span><span class="p">.</span><span class="na">checkTokenAccess</span><span class="p">(</span><span class="s">&quot;permitAll()&quot;</span><span class="p">);</span><span class="w">     </span><span class="c1">//ÂÖÅËÆ∏ÊâÄÊúâÁöÑTokenÊü•ËØ¢ËØ∑Ê±Ç</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">AuthorizationServerEndpointsConfigurer</span><span class="w"> </span><span class="n">endpoints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">endpoints</span>
<span class="w">                </span><span class="p">.</span><span class="na">authenticationManager</span><span class="p">(</span><span class="n">manager</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//Áî±‰∫éSpringSecurityÊñ∞ÁâàÊú¨ÁöÑ‰∏Ä‰∫õÂ∫ïÂ±ÇÊîπÂä®ÔºåËøôÈáåÈúÄË¶ÅÈÖçÁΩÆ‰∏Ä‰∏ãauthenticationManagerÔºåÊâçËÉΩÊ≠£Â∏∏‰ΩøÁî®passwordÊ®°Âºè</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Â∞±ÂèØ‰ª•ÂêØÂä®ÊúçÂä°Âô®‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14iuwapslj220008ejx2.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410123941157" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14iuwapslj220008ejx2.jpg" /></a></p>
<p>ÁÑ∂ÂêéÊàë‰ª¨‰ΩøÁî®PostmanËøõË°åÊé•Âè£ÊµãËØïÔºåÈ¶ñÂÖàÊàë‰ª¨‰ªéÊúÄÁÆÄÂçïÁöÑÂÆ¢Êà∑Á´ØÊ®°ÂºèËøõË°åÊµãËØïÔºåÂÆ¢Êà∑Á´ØÊ®°ÂºèÂè™ÈúÄË¶ÅÊèê‰æõidÂíåsecretÂç≥ÂèØÁõ¥Êé•ÊãøÂà∞TokenÔºåÊ≥®ÊÑèÈúÄË¶ÅÂÜçÊ∑ªÂä†‰∏Ä‰∏™grant_typeÊù•Ë°®ÊòéÊàë‰ª¨ÁöÑÊéàÊùÉÊñπÂºèÔºåÈªòËÆ§ËØ∑Ê±ÇË∑ØÂæÑ‰∏∫http://localhost:8500/sso/oauth/tokenÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jafpizcj21cw0eg76a.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410125437766" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jafpizcj21cw0eg76a.jpg" /></a></p>
<p>ÂèëËµ∑ËØ∑Ê±ÇÂêéÔºåÂèØ‰ª•ÁúãÂà∞Êàë‰ª¨ÂæóÂà∞‰∫ÜTokenÔºåÂÆÉÊòØ‰ª•JSONÊ†ºÂºèÁªôÂà∞Êàë‰ª¨ÁöÑÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jehayojj21cw0am0ty.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410125831300" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jehayojj21cw0am0ty.jpg" /></a></p>
<p>Êàë‰ª¨ËøòÂèØ‰ª•ËÆøÈóÆ <a href="http://localhost:8500/sso/oauth/check_token">http://localhost:8500/sso/oauth/check_token</a> Êù•È™åËØÅÊàë‰ª¨ÁöÑTokenÊòØÂê¶ÊúâÊïàÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14ji6rg42j21bk0cgmym.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410130204734" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14ji6rg42j21bk0cgmym.jpg" /></a></p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jiieikmj21bi0ew75d.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410130223312" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jiieikmj21bi0ew75d.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞active‰∏∫trueÔºåË°®Á§∫Êàë‰ª¨ÂàöÂàöÁî≥ËØ∑Âà∞ÁöÑTokenÊòØÊúâÊïàÁöÑ„ÄÇ</p>
<p>Êé•ÁùÄÊàë‰ª¨Êù•ÊµãËØï‰∏Ä‰∏ãÁ¨¨‰∫åÁßçpasswordÊ®°ÂºèÔºåÊàë‰ª¨ËøòÈúÄË¶ÅÊèê‰æõÂÖ∑‰ΩìÁöÑÁî®Êà∑ÂêçÂíåÂØÜÁ†ÅÔºåÊéàÊùÉÊ®°ÂºèÂÆö‰πâ‰∏∫passwordÂç≥ÂèØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jqelib5j21bg0fg0u9.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410130958929" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jqelib5j21bg0fg0u9.jpg" /></a></p>
<p>Êé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÂú®ËØ∑Ê±ÇÂ§¥‰∏≠Ê∑ªÂä†BasicÈ™åËØÅ‰ø°ÊÅØÔºåËøôÈáåÊàë‰ª¨Áõ¥Êé•Â°´ÂÜôidÂíåsecretÂç≥ÂèØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jooye3nj21b00d4q4n.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410130819980" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jooye3nj21b00d4q4n.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞Âú®ËØ∑Ê±ÇÂ§¥‰∏≠Ëá™Âä®ÁîüÊàê‰∫ÜBasicÈ™åËØÅÁõ∏ÂÖ≥ÂÜÖÂÆπÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jq4t7y9j21a207s751.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410130942662" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jq4t7y9j21a207s751.jpg" /></a></p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jra2ysyj21ay0bgta5.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410131048992" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jra2ysyj21ay0bgta5.jpg" /></a></p>
<p>ÂìçÂ∫îÊàêÂäüÔºåÂæóÂà∞Token‰ø°ÊÅØÔºåÂπ∂‰∏îËøôÈáåËøòÂ§öÂá∫‰∫Ü‰∏Ä‰∏™refresh_tokenÔºåËøôÊòØÁî®‰∫éÂà∑Êñ∞TokenÁöÑÔºåÊàë‰ª¨‰πãÂêé‰ºöËøõË°åËÆ≤Ëß£„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jxemfuxj21d20fcjsq.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410131641887" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14jxemfuxj21d20fcjsq.jpg" /></a></p>
<p>Êü•ËØ¢Token‰ø°ÊÅØ‰πãÂêéËøòÂèØ‰ª•ÁúãÂà∞ÁôªÂΩïÁöÑÂÖ∑‰ΩìÁî®Êà∑‰ª•ÂèäËßíËâ≤ÊùÉÈôêÁ≠â„ÄÇ</p>
<p>Êé•ÁùÄÊàë‰ª¨Êù•ÁúãÈöêÂºèÊéàÊùÉÊ®°ÂºèÔºåËøôÁßçÊ®°ÂºèÊàë‰ª¨ÈúÄË¶ÅÂú®È™åËØÅÊúçÂä°Âô®‰∏äËøõË°åÁôªÂΩïÊìç‰ΩúÔºåËÄå‰∏çÊòØÁõ¥Êé•ËØ∑Ê±ÇTokenÔºåÈ™åËØÅÁôªÂΩïËØ∑Ê±ÇÂú∞ÂùÄÔºö<a href="http://localhost:8500/sso/oauth/authorize?client_id=web&amp;response_type=token">http://localhost:8500/sso/oauth/authorize?client_id=web&amp;response_type=token</a></p>
<p>Ê≥®ÊÑèresponse_type‰∏ÄÂÆöË¶ÅÊòØtokenÁ±ªÂûãÔºåËøôÊ†∑Êâç‰ºöÁõ¥Êé•ËøîÂõûTokenÔºåÊµèËßàÂô®ÂèëËµ∑ËØ∑Ê±ÇÂêéÔºåÂèØ‰ª•ÁúãÂà∞ÁÜüÊÇâËÄåÂèàÈôåÁîüÁöÑÁïåÈù¢ÔºåÊ≤°ÈîôÔºåÂÆûÈôÖ‰∏äËøôÈáåÂ∞±ÊòØ‰ΩøÁî®Êàë‰ª¨‰πãÂâçËÆ≤Ëß£ÁöÑSpringSecurityËøõË°åÁôªÈôÜÔºåÂΩìÁÑ∂‰πüÂèØ‰ª•ÈÖçÁΩÆ‰∏Ä‰∏ãËÆ∞‰ΩèÊàë‰πãÁ±ªÁöÑÂäüËÉΩÔºåËøôÈáåÂ∞±‰∏çÊºîÁ§∫‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14k666r5sj22aq0js0ue.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410132507626" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14k666r5sj22aq0js0ue.jpg" /></a></p>
<p>‰ΩÜÊòØÁôªÂΩï‰πãÂêéÊàë‰ª¨ÂèëÁé∞Âá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14k71g3joj21ae0a60u3.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410132557704" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14k71g3joj21ae0a60u3.jpg" /></a></p>
<p>ËøôÊòØÂõ†‰∏∫ÁôªÂΩïÊàêÂäü‰πãÂêéÔºåÈ™åËØÅÊúçÂä°Âô®ÈúÄË¶ÅÂ∞ÜÁªìÊûúÁªôÂõûÂÆ¢Êà∑Á´ØÔºåÊâÄ‰ª•ÈúÄË¶ÅÊèê‰æõÂÆ¢Êà∑Á´ØÁöÑÂõûË∞ÉÂú∞ÂùÄÔºåËøôÊ†∑ÊµèËßàÂô®Â∞±‰ºöË¢´ÈáçÂÆöÂêëÂà∞ÊåáÂÆöÁöÑÂõûË∞ÉÂú∞ÂùÄÂπ∂‰∏îËØ∑Ê±Ç‰∏≠‰ºöÊê∫Â∏¶Token‰ø°ÊÅØÔºåËøôÈáåÊàë‰ª¨Èöè‰æøÈÖçÁΩÆ‰∏Ä‰∏™ÂõûË∞ÉÂú∞ÂùÄÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">ClientDetailsServiceConfigurer</span><span class="w"> </span><span class="n">clients</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">clients</span>
<span class="w">            </span><span class="p">.</span><span class="na">inMemory</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">withClient</span><span class="p">(</span><span class="s">&quot;web&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">secret</span><span class="p">(</span><span class="n">encoder</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="s">&quot;654321&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">autoApprove</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">scopes</span><span class="p">(</span><span class="s">&quot;book&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;borrow&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">redirectUris</span><span class="p">(</span><span class="s">&quot;http://localhost:8201/login&quot;</span><span class="p">)</span><span class="w">   </span><span class="c1">//ÂèØ‰ª•ÂÜôÂ§ö‰∏™ÔºåÂΩìÊúâÂ§ö‰∏™Êó∂ÈúÄË¶ÅÂú®È™åËØÅËØ∑Ê±Ç‰∏≠ÊåáÂÆö‰ΩøÁî®Âì™‰∏™Âú∞ÂùÄËøõË°åÂõûË∞É</span>
<span class="w">            </span><span class="p">.</span><span class="na">authorizedGrantTypes</span><span class="p">(</span><span class="s">&quot;client_credentials&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;password&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;implicit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;authorization_code&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;refresh_token&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>Êé•ÁùÄÈáçÂêØÈ™åËØÅÊúçÂä°Âô®ÔºåÂÜçÊ¨°ËÆøÈóÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kaonj56j21fw0gw40h.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410132927907" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kaonj56j21fw0gw40h.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ËøôÈáå‰ºöËÆ©Êàë‰ª¨ÈÄâÊã©Âì™‰∫õËåÉÂõ¥ËøõË°åÊéàÊùÉÔºåÂ∞±ÂÉèÊàë‰ª¨Âú®ÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰∏≠ÁôªÈôÜ‰∏ÄÊ†∑Ôºå‰ºöËÆ©Êàë‰ª¨Êéà‰∫àÁî®Êà∑‰ø°ÊÅØÊùÉÈôê„ÄÅÊîØ‰ªòÊùÉÈôê„ÄÅ‰ø°Áî®Êü•ËØ¢ÊùÉÈôêÁ≠âÔºåÊàë‰ª¨ÂèØ‰ª•Ëá™Áî±ÂÜ≥ÂÆöË¶Å‰∏çË¶ÅÁªôÂÆ¢Êà∑Á´ØÊéà‰∫àËÆøÈóÆËøô‰∫õËµÑÊ∫êÁöÑÊùÉÈôêÔºåËøôÈáåÊàë‰ª¨ÂÖ®ÈÉ®ÈÄâÊã©Êéà‰∫àÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kcehaeej21ye08o758.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410133106639" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kcehaeej21ye08o758.jpg" /></a></p>
<p>Êéà‰∫à‰πãÂêéÔºåÂèØ‰ª•ÁúãÂà∞ÊµèËßàÂô®Ë¢´ÈáçÂÆöÂêëÂà∞Êàë‰ª¨ÂàöÂàöÊåáÂÆöÁöÑÂõûË∞ÉÂú∞ÂùÄ‰∏≠ÔºåÂπ∂‰∏îÊê∫Â∏¶‰∫ÜToken‰ø°ÊÅØÔºåÁé∞Âú®Êàë‰ª¨Êù•Ê†°È™å‰∏Ä‰∏ãÁúãÁúãÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kdhpibjj21d00e675i.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410133210183" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kdhpibjj21d00e675i.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåToken‰πüÊòØÊúâÊïàÁöÑ„ÄÇ</p>
<p>ÊúÄÂêéÊàë‰ª¨Êù•ÁúãÁúãÁ¨¨ÂõõÁßçÊúÄÂÆâÂÖ®ÁöÑÊéàÊùÉÁ†ÅÊ®°ÂºèÔºåËøôÁßçÊ®°ÂºèÂÖ∂ÂÆûÊµÅÁ®ãÂíå‰∏äÈù¢ÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØËØ∑Ê±ÇÁöÑÊòØcodeÁ±ªÂûãÔºö<a href="http://localhost:8500/sso/oauth/authorize?client_id=web&amp;response_type=code">http://localhost:8500/sso/oauth/authorize?client_id=web&amp;response_type=code</a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ËÆøÈóÆ‰πãÂêéÔºå‰æùÁÑ∂‰ºöËøõÂÖ•Âà∞ÂõûË∞ÉÂú∞ÂùÄÔºå‰ΩÜÊòØËøôÊó∂ÁªôÁöÑÂ∞±ÊòØÊéàÊùÉÁ†Å‰∫ÜÔºåËÄå‰∏çÊòØÁõ¥Êé•ÁªôTokenÔºåÈÇ£‰πàËøô‰∏™TokenËØ•ÊÄé‰πàËé∑ÂèñÂë¢Ôºü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kflls50j2178066glw.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410133411554" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kflls50j2178066glw.jpg" /></a></p>
<p>ÊåâÁÖßÊàë‰ª¨‰πãÂâçËÆ≤Ëß£ÁöÑÂéüÁêÜÔºåÊàë‰ª¨ÈúÄË¶ÅÊê∫Â∏¶ÊéàÊùÉÁ†ÅÂíåsecret‰∏ÄËµ∑ËØ∑Ê±ÇÔºåÊâçËÉΩÊãøÂà∞TokenÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÊòØÁî±ÂõûË∞ÉÁöÑÊúçÂä°Âô®ËøõË°åÂ§ÑÁêÜÔºåËøôÈáåÊàë‰ª¨Â∞±Âú®Postman‰∏≠ËøõË°åÔºåÊàë‰ª¨Â§çÂà∂ÂàöÂàöÂæóÂà∞ÁöÑÊéàÊùÉÁ†ÅÔºåÊé•Âè£‰æùÁÑ∂ÊòØ<code>localhost:8500/sso/oauth/token</code>Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kike171j21ba0f8404.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410133702534" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14kike171j21ba0f8404.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÁªìÊûú‰πüÊòØÊ≠£Â∏∏ËøîÂõû‰∫ÜToken‰ø°ÊÅØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14klb6srtj21be0bmgn6.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410133940312" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14klb6srtj21be0bmgn6.jpg" /></a></p>
<p>ËøôÊ†∑Êàë‰ª¨ÂõõÁßçÊúÄÂü∫Êú¨ÁöÑTokenËØ∑Ê±ÇÊñπÂºèÂ∞±ÂÆûÁé∞‰∫Ü„ÄÇ</p>
<p>ÊúÄÂêéËøòÊúâ‰∏Ä‰∏™ÊòØÂà∑Êñ∞‰ª§Áâå‰ΩøÁî®ÁöÑÔºåÂΩìÊàë‰ª¨ÁöÑTokenËøáÊúüÊó∂ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®Ëøô‰∏™refresh_tokenÊù•Áî≥ËØ∑‰∏Ä‰∏™Êñ∞ÁöÑTokenÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14lesf7waj21bc0giq4u.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410140759967" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14lesf7waj21bc0giq4u.jpg" /></a></p>
<p>‰ΩÜÊòØÊâßË°å‰πãÂêéÊàë‰ª¨ÂèëÁé∞‰ºöÁõ¥Êé•Âá∫Áé∞‰∏Ä‰∏™ÂÜÖÈÉ®ÈîôËØØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14lf5oqckj217804mt8w.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410140822286" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14lf5oqckj217804mt8w.jpg" /></a></p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14lffhh02j21w601qmy6.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410140838064" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14lffhh02j21w601qmy6.jpg" /></a></p>
<p>Êü•ÁúãÊó•ÂøóÂèëÁé∞ÔºåËøôÈáåËøòÈúÄË¶ÅÊàë‰ª¨ÂçïÁã¨ÈÖçÁΩÆ‰∏Ä‰∏™UserDetailsServiceÔºåÊàë‰ª¨Áõ¥Êé•ÊääSecurity‰∏≠ÁöÑÂÆû‰æãÊ≥®ÂÜå‰∏∫BeanÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Bean</span>
<span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="n">UserDetailsService</span><span class="w"> </span><span class="nf">userDetailsServiceBean</span><span class="p">()</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kd">super</span><span class="p">.</span><span class="na">userDetailsServiceBean</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÂú®Endpoint‰∏≠ËÆæÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Resource</span>
<span class="n">UserDetailsService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span>

<span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">AuthorizationServerEndpointsConfigurer</span><span class="w"> </span><span class="n">endpoints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">endpoints</span>
<span class="w">            </span><span class="p">.</span><span class="na">userDetailsService</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">authenticationManager</span><span class="p">(</span><span class="n">manager</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ÊúÄÂêéÂÜçÊ¨°Â∞ùËØïÂà∑Êñ∞TokenÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14linq3lkj21bc0bumyp.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410141143519" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14linq3lkj21bc0bumyp.jpg" /></a></p>
<p>OKÔºåÊàêÂäüÂà∑Êñ∞TokenÔºåËøîÂõû‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑ„ÄÇ</p>
<h3 id="enableoauth2sso">Âü∫‰∫é@EnableOAuth2SsoÂÆûÁé∞<a class="headerlink" href="#enableoauth2sso" title="Permanent link">&para;</a></h3>
<p>ÂâçÈù¢Êàë‰ª¨Â∞ÜÈ™åËØÅÊúçÂä°Âô®Â∑≤ÁªèÊê≠Âª∫ÂÆåÊàê‰∫ÜÔºåÁé∞Âú®Êàë‰ª¨Â∞±Êù•ÂÆûÁé∞‰∏Ä‰∏ãÂçïÁÇπÁôªÈôÜÂêßÔºåSpringCloud‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂÆ¢Êà∑Á´ØÁöÑÁõ¥Êé•ÂÆûÁé∞ÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™Ê≥®Ëß£ÂíåÂ∞ëÈáèÈÖçÁΩÆÂç≥ÂèØÂ∞ÜÊàë‰ª¨ÁöÑÊúçÂä°‰Ωú‰∏∫‰∏Ä‰∏™ÂçïÁÇπÁôªÈôÜÂ∫îÁî®Ôºå‰ΩøÁî®ÁöÑÊòØÁ¨¨ÂõõÁßçÊéàÊùÉÁ†ÅÊ®°Âºè„ÄÇ</p>
<p>‰∏ÄÂè•ËØùÊù•ËØ¥Â∞±ÊòØÔºåËøôÁßçÊ®°ÂºèÂè™ÊòØÂ∞ÜÈ™åËØÅÊñπÂºèÁî±ÂéüÊú¨ÁöÑÈªòËÆ§ÁôªÂΩïÂΩ¢ÂºèÊîπÂèò‰∏∫‰∫ÜÁªü‰∏ÄÂú®ÊéàÊùÉÊúçÂä°Âô®ÁôªÈôÜÁöÑÂΩ¢Âºè„ÄÇ</p>
<p>È¶ñÂÖàËøòÊòØ‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-security<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-oauth2<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2.2.5.RELEASE<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>Êàë‰ª¨Âè™ÈúÄË¶ÅÁõ¥Êé•Âú®ÂêØÂä®Á±ª‰∏äÊ∑ªÂä†Âç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableOAuth2Sso</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookApplication</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">BookApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Êàë‰ª¨‰∏çÈúÄË¶ÅËøõË°åÈ¢ùÂ§ñÁöÑÈÖçÁΩÆÁ±ªÔºåÂõ†‰∏∫Ëøô‰∏™Ê≥®Ëß£Â∑≤ÁªèÂ∏ÆÊàë‰ª¨ÂÅö‰∫ÜÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Target</span><span class="p">({</span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE</span><span class="p">})</span>
<span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span>
<span class="nd">@Documented</span>
<span class="nd">@EnableOAuth2Client</span>
<span class="nd">@EnableConfigurationProperties</span><span class="p">({</span><span class="n">OAuth2SsoProperties</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="nd">@Import</span><span class="p">({</span><span class="n">OAuth2SsoDefaultConfiguration</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">OAuth2SsoCustomConfiguration</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">ResourceServerTokenServicesConfiguration</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">EnableOAuth2Sso</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞ÂÆÉÁõ¥Êé•Ê≥®ÂÜå‰∫ÜOAuth2SsoDefaultConfigurationÔºåËÄåËøô‰∏™Á±ªÂ∞±ÊòØÂ∏ÆÂä©Êàë‰ª¨ÂØπSecurityËøõË°åÈÖçÁΩÆÁöÑÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="nd">@Conditional</span><span class="p">({</span><span class="n">NeedsWebSecurityCondition</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">OAuth2SsoDefaultConfiguration</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">WebSecurityConfigurerAdapter</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//Áõ¥Êé•ÁªßÊâøÁöÑWebSecurityConfigurerAdapterÔºåÂ∏ÆÊàë‰ª¨ÊääÈ™åËØÅËÆæÁΩÆÈÉΩÂÜôÂ•Ω‰∫Ü</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">OAuth2SsoDefaultConfiguration</span><span class="p">(</span><span class="n">ApplicationContext</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">applicationContext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">applicationContext</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÂú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÊàë‰ª¨ÁöÑÈ™åËØÅÊúçÂä°Âô®Áõ∏ÂÖ≥‰ø°ÊÅØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">security</span><span class="p">:</span>
<span class="w">  </span><span class="nt">oauth2</span><span class="p">:</span>
<span class="w">    </span><span class="nt">client</span><span class="p">:</span>
<span class="w">      </span><span class="c1">#‰∏çÂ§öËØ¥‰∫Ü</span>
<span class="w">      </span><span class="nt">client-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="w">      </span><span class="nt">client-secret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">654321</span>
<span class="w">      </span><span class="c1">#TokenËé∑ÂèñÂú∞ÂùÄ</span>
<span class="w">      </span><span class="nt">access-token-uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8500/sso/oauth/token</span>
<span class="w">      </span><span class="c1">#È™åËØÅÈ°µÈù¢Âú∞ÂùÄ</span>
<span class="w">      </span><span class="nt">user-authorization-uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8500/sso/oauth/authorize</span>
<span class="w">    </span><span class="nt">resource</span><span class="p">:</span>
<span class="w">      </span><span class="c1">#Token‰ø°ÊÅØËé∑ÂèñÂíåÊ†°È™åÂú∞ÂùÄ</span>
<span class="w">      </span><span class="nt">token-info-uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8500/sso/oauth/check_token</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨Â∞±ÂºÄÂêØÂõæ‰π¶ÊúçÂä°ÔºåË∞ÉÁî®Âõæ‰π¶Êé•Âè£Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14mj9etfuj22730u0q8o.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410144654362" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14mj9etfuj22730u0q8o.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞Âú®ÂèëÁé∞Ê≤°ÊúâÁôªÂΩïÈ™åËØÅÊó∂Ôºå‰ºöÁõ¥Êé•Ë∑≥ËΩ¨Âà∞ÊéàÊùÉÈ°µÈù¢ÔºåËøõË°åÊéàÊùÉÁôªÂΩïÔºå‰πãÂêéÊâçÂèØ‰ª•ÁªßÁª≠ËÆøÈóÆÂõæ‰π¶ÊúçÂä°Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14mkinbbyj219806mjs1.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410144806506" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14mkinbbyj219806mjs1.jpg" /></a></p>
<p>ÈÇ£‰πàÁî®Êà∑‰ø°ÊÅØÂë¢ÔºüÊòØÂê¶‰πü‰∏ÄÂπ∂‰øùÂ≠òËøáÊù•‰∫ÜÔºüÊàë‰ª¨ËøôÈáåÁõ¥Êé•Ëé∑Âèñ‰∏Ä‰∏ãSpringSecurityÁöÑContextÊü•ÁúãÁî®Êà∑‰ø°ÊÅØÔºåËé∑ÂèñÊñπÂºèË∑üÊàë‰ª¨‰πãÂâçÁöÑËßÜÈ¢ë‰∏≠ËÆ≤Ëß£ÁöÑÊòØ‰∏ÄÊ†∑ÁöÑÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/book/{bid}&quot;</span><span class="p">)</span>
<span class="n">Book</span><span class="w"> </span><span class="nf">findBookById</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;bid&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bid</span><span class="p">){</span>
<span class="w">    </span><span class="c1">//ÈÄöËøáSecurityContextHolderÂ∞ÜÁî®Êà∑‰ø°ÊÅØÂèñÂá∫</span>
<span class="w">    </span><span class="n">SecurityContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SecurityContextHolder</span><span class="p">.</span><span class="na">getContext</span><span class="p">();</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="na">getAuthentication</span><span class="p">());</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="na">getBookById</span><span class="p">(</span><span class="n">bid</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÜçÊ¨°ËÆøÈóÆÂõæ‰π¶ÁÆ°ÁêÜÊé•Âè£ÔºåÂèØ‰ª•ÁúãÂà∞Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14moza8zuj220k01adge.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410145224153" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14moza8zuj220k01adge.jpg" /></a></p>
<p>ËøôÈáå‰ΩøÁî®ÁöÑ‰∏çÊòØ‰πãÂâçÁöÑUsernamePasswordAuthenticationToken‰πü‰∏çÊòØRememberMeAuthenticationTokenÔºåËÄåÊòØÊñ∞ÁöÑOAuth2AuthenticationÔºåÂÆÉ‰øùÂ≠ò‰∫ÜÈ™åËØÅÊúçÂä°Âô®ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºå‰ª•ÂèäÁªèËøáÊàë‰ª¨‰πãÂâçÁöÑÁôªÈôÜÊµÅÁ®ã‰πãÂêéÔºåÈ™åËØÅÊúçÂä°Âô®ÂèëÊîæÁªôÂÆ¢Êà∑Á´ØÁöÑToken‰ø°ÊÅØÔºåÂπ∂ÈÄöËøáToken‰ø°ÊÅØÂú®È™åËØÅÊúçÂä°Âô®ËøõË°åÈ™åËØÅËé∑ÂèñÁî®Êà∑‰ø°ÊÅØÔºåÊúÄÂêé‰øùÂ≠òÂà∞Session‰∏≠ÔºåË°®Á§∫Áî®Êà∑Â∑≤È™åËØÅÔºåÊâÄ‰ª•Êú¨Ë¥®‰∏äËøòÊòØË¶Å‰æùËµñÊµèËßàÂô®Â≠òCookieÁöÑ„ÄÇ</p>
<p>Êé•‰∏ãÊù•Êàë‰ª¨Â∞ÜÊâÄÊúâÁöÑÊúçÂä°ÈÉΩ‰ΩøÁî®ËøôÁßçÊñπÂºèËøõË°åÈ™åËØÅÔºåÂà´Âøò‰∫ÜÊääÈáçÂÆöÂêëÂú∞ÂùÄÁªôÊâÄÊúâÊúçÂä°ÈÉΩÂä†‰∏äÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">ClientDetailsServiceConfigurer</span><span class="w"> </span><span class="n">clients</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">clients</span>
<span class="w">            </span><span class="p">.</span><span class="na">inMemory</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">withClient</span><span class="p">(</span><span class="s">&quot;web&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">secret</span><span class="p">(</span><span class="n">encoder</span><span class="p">.</span><span class="na">encode</span><span class="p">(</span><span class="s">&quot;654321&quot;</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">autoApprove</span><span class="p">(</span><span class="kc">true</span><span class="p">)</span><span class="w">   </span><span class="c1">//ËøôÈáåÊääËá™Âä®ÂÆ°ÊâπÂºÄ‰∫ÜÔºåÂ∞±‰∏çÁî®ÂÜçÂéªÊâãÂä®ÈÄâÂêåÊÑè‰∫Ü</span>
<span class="w">            </span><span class="p">.</span><span class="na">scopes</span><span class="p">(</span><span class="s">&quot;book&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;borrow&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">redirectUris</span><span class="p">(</span><span class="s">&quot;http://localhost:8101/login&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;http://localhost:8201/login&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;http://localhost:8301/login&quot;</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">authorizedGrantTypes</span><span class="p">(</span><span class="s">&quot;client_credentials&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;password&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;implicit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;authorization_code&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;refresh_token&quot;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÂÆûÁé∞Âè™Âú®È™åËØÅÊúçÂä°Âô®ÁôªÈôÜÔºåÂ¶ÇÊûúÁôªÈôÜËøáÂÖ∂‰ªñÁöÑÊúçÂä°ÈÉΩÂèØ‰ª•ËÆøÈóÆ‰∫Ü„ÄÇ</p>
<p>‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞‰∏Ä‰∏™ÈóÆÈ¢òÔºåÂ∞±ÊòØÁî±‰∫éSESSION‰∏çÂêåÊ≠•ÔºåÊØèÊ¨°ÂàáÊç¢‰∏çÂêåÁöÑÊúçÂä°ËøõË°åËÆøÈóÆÈÉΩ‰ºöÈáçÊñ∞ÂØºÈ™åËØÅÊúçÂä°Âô®ÂéªÈ™åËØÅ‰∏ÄÊ¨°Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h14oue66ytj212606wq42.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220410160648326" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h14oue66ytj212606wq42.jpg" /></a></p>
<p>ËøôÈáåÊúâ‰∏§‰∏™ÊñπÊ°àÔºö</p>
<ul>
<li>ÂÉè‰πãÂâç‰∏ÄÊ†∑ÂÅöSESSIONÁªü‰∏ÄÂ≠òÂÇ®</li>
<li>ËÆæÁΩÆcontext-pathË∑ØÂæÑÔºåÊØè‰∏™ÊúçÂä°ÂçïÁã¨ËÆæÁΩÆÔºåÂ∞±‰∏ç‰ºöÊâìÊû∂‰∫Ü</li>
</ul>
<p>‰ΩÜÊòØËøôÊ†∑‰æùÁÑ∂Ê≤°Ê≥ïËß£ÂÜ≥ÊúçÂä°Èó¥Ë∞ÉÁî®ÁöÑÈóÆÈ¢òÔºåÊâÄ‰ª•‰ªÖ‰ªÖ‰æùÈù†ÂçïÁÇπÁôªÈôÜÁöÑÊ®°Âºè‰∏çÂ§™Ë°å„ÄÇ</p>
<h3 id="enableresourceserver">Âü∫‰∫é@EnableResourceServerÂÆûÁé∞<a class="headerlink" href="#enableresourceserver" title="Permanent link">&para;</a></h3>
<p>ÂâçÈù¢Êàë‰ª¨ËÆ≤Ëß£‰∫ÜÂ∞ÜÊàë‰ª¨ÁöÑÊúçÂä°‰Ωú‰∏∫ÂçïÁÇπÁôªÈôÜÂ∫îÁî®Áõ¥Êé•ÂÆûÁé∞ÂçïÁÇπÁôªÈôÜÔºåÈÇ£‰πàÁé∞Âú®Êàë‰ª¨Â¶ÇÊûúÊòØ‰ª•Á¨¨‰∏âÊñπÂ∫îÁî®ËøõË°åËÆøÈóÆÂë¢ÔºüËøôÊó∂Êàë‰ª¨Â∞±ÈúÄË¶ÅÂ∞ÜÊàë‰ª¨ÁöÑÊúçÂä°‰Ωú‰∏∫ËµÑÊ∫êÊúçÂä°‰∫ÜÔºå‰Ωú‰∏∫ËµÑÊ∫êÊúçÂä°Â∞±‰∏ç‰ºöÂÜçÊèê‰æõÈ™åËØÅÁöÑËøáÁ®ãÔºåËÄåÊòØÁõ¥Êé•Ë¶ÅÊ±ÇËØ∑Ê±ÇÊó∂Êê∫Â∏¶TokenÔºåËÄåÈ™åËØÅËøáÁ®ãÊàë‰ª¨ËøôÈáåÂ∞±ÁªßÁª≠Áî®PostmanÊù•ÂÆåÊàêÔºåËøôÊâçÊòØÊàë‰ª¨Â∏∏ËßÅÁöÑÊ®°Âºè„ÄÇ</p>
<p>‰∏ÄÂè•ËØùÊù•ËØ¥ÔºåË∑ü‰∏äÈù¢Áõ∏ÊØîÔºåÊàë‰ª¨Âè™ÈúÄË¶ÅÊê∫Â∏¶TokenÂ∞±ËÉΩËÆøÈóÆËøô‰∫õËµÑÊ∫êÊúçÂä°Âô®‰∫ÜÔºåÂÆ¢Êà∑Á´ØË¢´Áã¨Á´ã‰∫ÜÂá∫Êù•ÔºåÁî®‰∫éÊê∫Â∏¶TokenÂéªËÆøÈóÆËøô‰∫õÊúçÂä°„ÄÇ</p>
<p>Êàë‰ª¨‰πüÂè™ÈúÄË¶ÅÊ∑ªÂä†‰∏Ä‰∏™Ê≥®Ëß£ÂíåÂ∞ëÈáèÈÖçÁΩÆÂç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableResourceServer</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BookApplication</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SpringApplication</span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="n">BookApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">args</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ÈÖçÁΩÆ‰∏≠Âè™ÈúÄË¶ÅÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">security</span><span class="p">:</span>
<span class="w">  </span><span class="nt">oauth2</span><span class="p">:</span>
<span class="w">    </span><span class="nt">client</span><span class="p">:</span>
<span class="w">        </span><span class="c1">#Âü∫Êìç</span>
<span class="w">      </span><span class="nt">client-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
<span class="w">      </span><span class="nt">client-secret</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">654321</span>
<span class="w">    </span><span class="nt">resource</span><span class="p">:</span>
<span class="w">        </span><span class="c1">#Âõ†‰∏∫ËµÑÊ∫êÊúçÂä°Âô®ÂæóÈ™åËØÅ‰Ω†ÁöÑTokenÊòØÂê¶ÊúâËÆøÈóÆÊ≠§ËµÑÊ∫êÁöÑÊùÉÈôê‰ª•ÂèäÁî®Êà∑‰ø°ÊÅØÔºåÊâÄ‰ª•Âè™ÈúÄË¶Å‰∏Ä‰∏™È™åËØÅÂú∞ÂùÄ</span>
<span class="w">      </span><span class="nt">token-info-uri</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://localhost:8500/sso/oauth/check_token</span>
</code></pre></div>
<p>ÈÖçÁΩÆÂÆåÊàêÂêéÔºåÊàë‰ª¨ÂêØÂä®ÊúçÂä°Âô®ÔºåÁõ¥Êé•ËÆøÈóÆ‰ºöÂèëÁé∞Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15iekw720j21mw0b0mz5.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411090932561" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15iekw720j21mw0b0mz5.jpg" /></a></p>
<p>ËøôÊòØÁî±‰∫éÊàë‰ª¨ÁöÑËØ∑Ê±ÇÂ§¥‰∏≠Ê≤°ÊúâÊê∫Â∏¶Token‰ø°ÊÅØÔºåÁé∞Âú®Êúâ‰∏§ÁßçÊñπÂºèÂèØ‰ª•ËÆøÈóÆÊ≠§ËµÑÊ∫êÔºö</p>
<ul>
<li>Âú®URLÂêéÈù¢Ê∑ªÂä†<code>access_token</code>ËØ∑Ê±ÇÂèÇÊï∞ÔºåÂÄº‰∏∫TokenÂÄº</li>
<li>Âú®ËØ∑Ê±ÇÂ§¥‰∏≠Ê∑ªÂä†<code>Authorization</code>ÔºåÂÄº‰∏∫<code>Bearer +TokenÂÄº</code></li>
</ul>
<p>Êàë‰ª¨ÂÖàÊù•ËØïËØïÁúãÊúÄÁÆÄÁöÑ‰∏ÄÁßçÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15ii54emij2176066wfi.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411091259795" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15ii54emij2176066wfi.jpg" /></a></p>
<p>Âè¶‰∏ÄÁßçÊàë‰ª¨ÈúÄË¶Å‰ΩøÁî®PostmanÊù•ÂÆåÊàêÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15ikgy886j21c60ikjty.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411091514501" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15ikgy886j21c60ikjty.jpg" /></a></p>
<p>Ê∑ªÂä†È™åËØÅ‰ø°ÊÅØÂêéÔºå‰ºöÂ∏ÆÂä©Êàë‰ª¨ËΩ¨Êç¢ÊàêËØ∑Ê±ÇÂ§¥‰ø°ÊÅØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15im8lcwuj21b008cwfo.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411091655947" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15im8lcwuj21b008cwfo.jpg" /></a></p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15imovn8jj216m056aaa.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411091722652" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15imovn8jj216m056aaa.jpg" /></a></p>
<p>ËøôÊ†∑Êàë‰ª¨Â∞±Â∞ÜËµÑÊ∫êÊúçÂä°Âô®Êê≠Âª∫ÂÆåÊàê‰∫Ü„ÄÇ</p>
<p>Êàë‰ª¨Êé•ÁùÄÊù•ÁúãÂ¶Ç‰ΩïÂØπËµÑÊ∫êÊúçÂä°Âô®ËøõË°åÊ∑±Â∫¶Ëá™ÂÆö‰πâÔºåÊàë‰ª¨ÂèØ‰ª•‰∏∫ÂÖ∂ÁºñÂÜô‰∏Ä‰∏™ÈÖçÁΩÆÁ±ªÔºåÊØîÂ¶ÇÊàë‰ª¨Áé∞Âú®Â∏åÊúõÁî®Êà∑ÊéàÊùÉ‰∫ÜÊüê‰∏™ScopeÊâçÂèØ‰ª•ËÆøÈóÆÊ≠§ÊúçÂä°Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ResourceConfiguration</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ResourceServerConfigurerAdapter</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//ÁªßÊâøÊ≠§Á±ªËøõË°åÈ´òÂ∫¶Ëá™ÂÆö‰πâ</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">HttpSecurity</span><span class="w"> </span><span class="n">http</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">//ËøôÈáå‰πüÊúâHttpSecurityÂØπË±°ÔºåÊñπ‰æøÊàë‰ª¨ÈÖçÁΩÆSpringSecurity</span>
<span class="w">        </span><span class="n">http</span>
<span class="w">                </span><span class="p">.</span><span class="na">authorizeRequests</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">anyRequest</span><span class="p">().</span><span class="na">access</span><span class="p">(</span><span class="s">&quot;#oauth2.hasScope(&#39;lbwnb&#39;)&quot;</span><span class="p">);</span><span class="w">  </span><span class="c1">//Ê∑ªÂä†Ëá™ÂÆö‰πâËßÑÂàô</span>
<span class="w">                        </span><span class="c1">//TokenÂøÖÈ°ªË¶ÅÊúâÊàë‰ª¨Ëá™ÂÆö‰πâscopeÊéàÊùÉÊâçÂèØ‰ª•ËÆøÈóÆÊ≠§ËµÑÊ∫ê</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞ÂΩìÊ≤°ÊúâÂØπÂ∫îÁöÑscopeÊéàÊùÉÊó∂ÔºåÈÇ£‰πà‰ºöÁõ¥Êé•ËøîÂõû<code>insufficient_scope</code>ÈîôËØØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15iynrm44j21d00acjth.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411092852367" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15iynrm44j21d00acjth.jpg" /></a></p>
<p>‰∏çÁü•ÈÅìÂêÑ‰ΩçÊòØÂê¶ÊúâÂèëÁé∞ÔºåÂÆûÈôÖ‰∏äËµÑÊ∫êÊúçÂä°Âô®ÂÆåÂÖ®Ê≤°ÊúâÂøÖË¶ÅÂ∞ÜSecurityÁöÑ‰ø°ÊÅØ‰øùÂ≠òÂú®Session‰∏≠‰∫ÜÔºåÂõ†‰∏∫Áé∞Âú®Âè™ÈúÄË¶ÅÂ∞ÜTokenÂëäËØâËµÑÊ∫êÊúçÂä°Âô®ÔºåÈÇ£‰πàËµÑÊ∫êÊúçÂä°Âô®Â∞±ÂèØ‰ª•ËÅîÁ≥ªÈ™åËØÅÊúçÂä°Âô®ÔºåÂæóÂà∞Áî®Êà∑‰ø°ÊÅØÔºåÂ∞±‰∏çÈúÄË¶Å‰ΩøÁî®‰πãÂâçÁöÑSessionÂ≠òÂÇ®Êú∫Âà∂‰∫ÜÔºåÊâÄ‰ª•‰Ω†‰ºöÂèëÁé∞HttpSession‰∏≠Ê≤°Êúâ<strong>SPRING_SECURITY_CONTEXT</strong>ÔºåÁé∞Âú®Security‰ø°ÊÅØÈÉΩÊòØÈÄöËøáËøûÊé•ËµÑÊ∫êÊúçÂä°Âô®Ëé∑Âèñ„ÄÇ</p>
<p>Êé•ÁùÄÊàë‰ª¨Â∞ÜÊâÄÊúâÁöÑÊúçÂä°ÈÉΩ</p>
<p>‰ΩÜÊòØËøòÊúâ‰∏Ä‰∏™ÈóÆÈ¢òÊ≤°ÊúâËß£ÂÜ≥ÔºåÊàë‰ª¨Âú®‰ΩøÁî®RestTemplateËøõË°åÊúçÂä°Èó¥ÁöÑËøúÁ®ãË∞ÉÁî®Êó∂Ôºå‰ºöÂæóÂà∞‰ª•‰∏ãÈîôËØØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15nbvmhyqj21zo070n12.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411115958560" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15nbvmhyqj21zo070n12.jpg" /></a></p>
<p>ÂÆûÈôÖ‰∏äËøôÊòØÂõ†‰∏∫Âú®ÊúçÂä°Ë∞ÉÁî®Êó∂Ê≤°ÊúâÊê∫Â∏¶Token‰ø°ÊÅØÔºåÊàë‰ª¨ÂæóÊÉ≥‰∏™ÂäûÊ≥ïÊääÁî®Êà∑‰º†Êù•ÁöÑToken‰ø°ÊÅØÂú®ËøõË°åËøúÁ®ãË∞ÉÁî®Êó∂‰πüÊê∫Â∏¶‰∏äÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®OAuth2RestTemplateÔºåÂÆÉ‰ºöÂú®ËØ∑Ê±ÇÂÖ∂‰ªñÊúçÂä°Êó∂Êê∫Â∏¶ÂΩìÂâçËØ∑Ê±ÇÁöÑToken‰ø°ÊÅØ„ÄÇÂÆÉÁªßÊâøËá™RestTemplateÔºåËøôÈáåÊàë‰ª¨Áõ¥Êé•ÂÆö‰πâ‰∏Ä‰∏™BeanÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WebConfiguration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">OAuth2ClientContext</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">OAuth2RestTemplate</span><span class="w"> </span><span class="nf">restTemplate</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OAuth2RestTemplate</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ClientCredentialsResourceDetails</span><span class="p">(),</span><span class="w"> </span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Áõ¥Êé•ÊõøÊç¢Êéâ‰πãÂâçÁöÑRestTemplateÂç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Service</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BorrowServiceImpl</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BorrowService</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">BorrowMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">OAuth2RestTemplate</span><span class="w"> </span><span class="n">template</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">UserBorrowDetail</span><span class="w"> </span><span class="nf">getUserBorrowDetailByUid</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Borrow</span><span class="o">&gt;</span><span class="w"> </span><span class="n">borrow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mapper</span><span class="p">.</span><span class="na">getBorrowsByUid</span><span class="p">(</span><span class="n">uid</span><span class="p">);</span>
<span class="w">        </span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">template</span><span class="p">.</span><span class="na">getForObject</span><span class="p">(</span><span class="s">&quot;http://localhost:8101/user/&quot;</span><span class="o">+</span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="n">User</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="c1">//Ëé∑ÂèñÊØè‰∏ÄÊú¨‰π¶ÁöÑËØ¶ÁªÜ‰ø°ÊÅØ</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span><span class="w"> </span><span class="n">bookList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">borrow</span>
<span class="w">                </span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">template</span><span class="p">.</span><span class="na">getForObject</span><span class="p">(</span><span class="s">&quot;http://localhost:8201/book/&quot;</span><span class="o">+</span><span class="n">b</span><span class="p">.</span><span class="na">getBid</span><span class="p">(),</span><span class="w"> </span><span class="n">Book</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
<span class="w">                </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">UserBorrowDetail</span><span class="p">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">bookList</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞ÊúçÂä°ÊàêÂäüË∞ÉÁî®‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15omvqe0nj21im06emyf.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411124509007" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15omvqe0nj21im06emyf.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨Êù•Â∞ÜNacosÂä†ÂÖ•ÔºåÂπ∂ÈÄöËøáFeignÂÆûÁé∞ËøúÁ®ãË∞ÉÁî®„ÄÇ</p>
<p>‰æùËµñËøòÊòØË¥¥‰∏Ä‰∏ãÔºå‰∏çÁÑ∂Êâæ‰∏çÂà∞Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>com.alibaba.cloud<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-cloud-alibaba-dependencies<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>2021.0.1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;type&gt;</span>pom<span class="nt">&lt;/type&gt;</span>
<span class="w">    </span><span class="nt">&lt;scope&gt;</span>import<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>com.alibaba.cloud<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-alibaba-nacos-discovery<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.springframework.cloud<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>spring-cloud-starter-loadbalancer<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>ÊâÄÊúâÊúçÂä°ÈÉΩÂ∑≤ÁªèÊ≥®ÂÜåÊàêÂäü‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15pvei9c9j220w0cgdia.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411132756540" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15pvei9c9j220w0cgdia.jpg" /></a></p>
<p>Êé•ÁùÄÊàë‰ª¨ÈÖçÁΩÆ‰∏Ä‰∏ãÂÄüÈòÖÊúçÂä°ÁöÑË¥üËΩΩÂùáË°°Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Configuration</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WebConfiguration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">OAuth2ClientContext</span><span class="w"> </span><span class="n">context</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@LoadBalanced</span><span class="w">   </span><span class="c1">//ÂíåRestTemplate‰∏ÄÊ†∑Áõ¥Êé•Ê∑ªÂä†Ê≥®Ëß£Â∞±Ë°å‰∫Ü</span>
<span class="w">    </span><span class="nd">@Bean</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">OAuth2RestTemplate</span><span class="w"> </span><span class="nf">restTemplate</span><span class="p">(){</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">OAuth2RestTemplate</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ClientCredentialsResourceDetails</span><span class="p">(),</span><span class="w"> </span><span class="n">context</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15q67k904j21ho06a75k.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411133819847" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15q67k904j21ho06a75k.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨Êù•ÊääÂÆÉÊõøÊç¢‰∏∫FeignÔºåËÄÅÊ†∑Â≠êÔºå‰∏§‰∏™ÂÆ¢Êà∑Á´ØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@FeignClient</span><span class="p">(</span><span class="s">&quot;user-service&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserClient</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/user/{uid}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="nf">getUserById</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;uid&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">uid</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@FeignClient</span><span class="p">(</span><span class="s">&quot;book-service&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">BookClient</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@RequestMapping</span><span class="p">(</span><span class="s">&quot;/book/{bid}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">Book</span><span class="w"> </span><span class="nf">getBookById</span><span class="p">(</span><span class="nd">@PathVariable</span><span class="p">(</span><span class="s">&quot;bid&quot;</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bid</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>‰ΩÜÊòØÈÖçÁΩÆÂÆåÊàê‰πãÂêéÔºåÂèàÂá∫Áé∞ÂàöÂàöÁöÑÈóÆÈ¢ò‰∫ÜÔºåOpenFeign‰πüÊ≤°ÊúâÊê∫Â∏¶TokenËøõË°åËÆøÈóÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15qotlr59j21zq06s77b.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411135612728" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15qotlr59j21zq06s77b.jpg" /></a></p>
<p>ÈÇ£‰πàÊÄé‰πàÈÖçÁΩÆFeignÊê∫Â∏¶TokenËÆøÈóÆÂë¢ÔºüÈÅáÂà∞ËøôÁßçÈóÆÈ¢òÁõ¥Êé•ÂéªÂÆòÊñπÊü•Ôºö<a href="https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#oauth2-support">https://docs.spring.io/spring-cloud-openfeign/docs/current/reference/html/#oauth2-support</a>ÔºåÈùûÂ∏∏ÁÆÄÂçïÔºå‰∏§‰∏™ÈÖçÁΩÆÂ∞±ÊêûÂÆöÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">feign</span><span class="p">:</span>
<span class="w">  </span><span class="nt">oauth2</span><span class="p">:</span>
<span class="w">    </span><span class="c1">#ÂºÄÂêØOauthÊîØÊåÅÔºåËøôÊ†∑Â∞±‰ºöÂú®ËØ∑Ê±ÇÂ§¥‰∏≠Êê∫Â∏¶Token‰∫Ü</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="c1">#ÂêåÊó∂ÂºÄÂêØË¥üËΩΩÂùáË°°ÊîØÊåÅ</span>
<span class="w">    </span><span class="nt">load-balanced</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>ÈáçÂêØÊúçÂä°Âô®ÔºåÂèØ‰ª•ÁúãÂà∞ÁªìÊûúOK‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h15rupqldmj21ko07kmyl.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220411143628451" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h15rupqldmj21ko07kmyl.jpg" /></a></p>
<p>ËøôÊ†∑Êàë‰ª¨Â∞±ÊàêÂäüÂ∞Ü‰πãÂâçÁöÑ‰∏â‰∏™ÊúçÂä°‰Ωú‰∏∫ËµÑÊ∫êÊúçÂä°Âô®‰∫ÜÔºåÊ≥®ÊÑèÂíåÊàë‰ª¨‰∏äÈù¢ÁöÑ‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØÊòØ‰∏çÂêåÁöÑÔºåÂ∞ÜÊúçÂä°Áõ¥Êé•‰Ωú‰∏∫ÂÆ¢Êà∑Á´ØÁõ∏ÂΩì‰∫éÂè™ÈúÄË¶ÅÈ™åËØÅÈÄöËøáÂç≥ÂèØÔºåÂπ∂‰∏îËøòÊòØË¶Å‰øùÂ≠òSession‰ø°ÊÅØÔºåÁõ∏ÂΩì‰∫éÂè™ÊòØÂ∞ÜÁôªÂΩïÊµÅÁ®ãÊç¢Âà∞Áªü‰∏ÄÁöÑÈ™åËØÅÊúçÂä°Âô®‰∏äËøõË°åÁΩ¢‰∫Ü„ÄÇËÄåÂ∞ÜÂÖ∂‰Ωú‰∏∫ËµÑÊ∫êÊúçÂä°Âô®ÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÂè¶Â§ñÊâæÂÆ¢Êà∑Á´ØÔºàÂèØ‰ª•ÊòØÊµèËßàÂô®„ÄÅÂ∞èÁ®ãÂ∫è„ÄÅApp„ÄÅÁ¨¨‰∏âÊñπÊúçÂä°Á≠âÔºâÊù•ËÆøÈóÆÔºåÂπ∂‰∏î‰πüÊòØÈúÄË¶ÅÂÖàËøõË°åÈ™åËØÅÁÑ∂ÂêéÂÜçÈÄöËøáÊê∫Â∏¶TokenËøõË°åËÆøÈóÆÔºåËøôÁßçÊ®°ÂºèÊòØÊàë‰ª¨ÊØîËæÉÂ∏∏ËßÅÁöÑÊ®°Âºè„ÄÇ</p>
<h3 id="jwttoken">‰ΩøÁî®jwtÂ≠òÂÇ®Token<a class="headerlink" href="#jwttoken" title="Permanent link">&para;</a></h3>
<p>ÂÆòÁΩëÔºö<a href="https://jwt.io">https://jwt.io</a></p>
<p>JSON Web Token‰ª§ÁâåÔºàJWTÔºâÊòØ‰∏Ä‰∏™ÂºÄÊîæÊ†áÂáÜÔºà<a href="https://tools.ietf.org/html/rfc7519">RFC 7519</a>ÔºâÔºåÂÆÉÂÆö‰πâ‰∫Ü‰∏ÄÁßçÁ¥ßÂáëÂíåËá™Êàê‰∏Ä‰ΩìÁöÑÊñπÂºèÔºåÁî®‰∫éÂú®ÂêÑÊñπ‰πãÈó¥‰Ωú‰∏∫JSONÂØπË±°ÂÆâÂÖ®Âú∞‰º†Ëæì‰ø°ÊÅØ„ÄÇËøô‰∫õ‰ø°ÊÅØÂèØ‰ª•Ë¢´È™åËØÅÂíå‰ø°‰ªªÔºåÂõ†‰∏∫ÂÆÉÊòØÊï∞Â≠óÁ≠æÂêçÁöÑ„ÄÇJWTÂèØ‰ª•‰ΩøÁî®ÂØÜÈí•Ôºà‰ΩøÁî®<strong>HMAC</strong>ÁÆóÊ≥ïÔºâÊàñ‰ΩøÁî®<strong>RSA</strong>Êàñ<strong>ECDSA</strong>ËøõË°åÂÖ¨Èí•/ÁßÅÈí•ÂØπËøõË°åÁ≠æÂêç„ÄÇ</p>
<p>ÂÆûÈôÖ‰∏äÔºåÊàë‰ª¨‰πãÂâçÈÉΩÊòØÊê∫Â∏¶TokenÂêëËµÑÊ∫êÊúçÂä°Âô®ÂèëËµ∑ËØ∑Ê±ÇÂêéÔºåËµÑÊ∫êÊúçÂä°Âô®Áî±‰∫é‰∏çÁü•ÈÅìÊàë‰ª¨TokenÁöÑÁî®Êà∑‰ø°ÊÅØÔºåÊâÄ‰ª•ÈúÄË¶ÅÂêëÈ™åËØÅÊúçÂä°Âô®ËØ¢ÈóÆÊ≠§TokenÁöÑËÆ§ËØÅ‰ø°ÊÅØÔºåËøôÊ†∑ÊâçËÉΩÂæóÂà∞Token‰ª£Ë°®ÁöÑÁî®Êà∑‰ø°ÊÅØÔºå‰ΩÜÊòØÂêÑ‰ΩçÊòØÂê¶ËÄÉËôëËøáÔºåÂ¶ÇÊûúÊØèÊ¨°Áî®Êà∑ËØ∑Ê±ÇÈÉΩÂéªÊü•ËØ¢Áî®Êà∑‰ø°ÊÅØÔºåÈÇ£‰πàÂú®Â§ßÈáèËØ∑Ê±Ç‰∏ãÔºåÈ™åËØÅÊúçÂä°Âô®ÁöÑÂéãÂäõÂèØËÉΩ‰ºöÈùûÂ∏∏ÁöÑÂ§ß„ÄÇËÄå‰ΩøÁî®JWT‰πãÂêéÔºåToken‰∏≠‰ºöÁõ¥Êé•‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØÔºåËøôÊ†∑ËµÑÊ∫êÊúçÂä°Âô®Â∞±‰∏çÂÜçÈúÄË¶ÅËØ¢ÈóÆÈ™åËØÅÊúçÂä°Âô®ÔºåËá™Ë°åÂ∞±ÂèØ‰ª•ÂÆåÊàêËß£ÊûêÔºåÊàë‰ª¨ÁöÑÁõÆÊ†áÊòØ‰∏çËÅîÁ≥ªÈ™åËØÅÊúçÂä°Âô®Â∞±ËÉΩÁõ¥Êé•ÂÆåÊàêÈ™åËØÅ„ÄÇ</p>
<p>JWT‰ª§ÁâåÁöÑÊ†ºÂºèÂ¶Ç‰∏ãÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16n64387aj22b10u0wjb.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412083957167" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16n64387aj22b10u0wjb.jpg" /></a></p>
<p>‰∏Ä‰∏™JWT‰ª§ÁâåÁî±3ÈÉ®ÂàÜÁªÑÊàêÔºöÊ†áÂ§¥(Header)„ÄÅÊúâÊïàËΩΩËç∑(Payload)ÂíåÁ≠æÂêç(Signature)„ÄÇÂú®‰º†ËæìÁöÑÊó∂ÂÄôÔºå‰ºöÂ∞ÜJWTÁöÑ3ÈÉ®ÂàÜÂàÜÂà´ËøõË°åBase64ÁºñÁ†ÅÂêéÁî®<code>.</code>ËøõË°åËøûÊé•ÂΩ¢ÊàêÊúÄÁªàÈúÄË¶Å‰º†ËæìÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ</p>
<ul>
<li>Ê†áÂ§¥ÔºöÂåÖÂê´‰∏Ä‰∫õÂÖÉÊï∞ÊçÆ‰ø°ÊÅØÔºåÊØîÂ¶ÇJWTÁ≠æÂêçÊâÄ‰ΩøÁî®ÁöÑÂä†ÂØÜÁÆóÊ≥ïÔºåËøòÊúâÁ±ªÂûãÔºåËøôÈáåÁªü‰∏ÄÈÉΩÊòØJWT„ÄÇ</li>
<li>ÊúâÊïàËΩΩËç∑ÔºöÂåÖÊã¨Áî®Êà∑ÂêçÁß∞„ÄÅ‰ª§ÁâåÂèëÂ∏ÉÊó∂Èó¥„ÄÅËøáÊúüÊó∂Èó¥„ÄÅJWT IDÁ≠âÔºåÂΩìÁÑ∂Êàë‰ª¨‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÊ∑ªÂä†Â≠óÊÆµÔºåÊàë‰ª¨ÁöÑÁî®Êà∑‰ø°ÊÅØ‰∏ÄËà¨ÈÉΩÂú®ËøôÈáåÂ≠òÊîæ„ÄÇ</li>
<li>Á≠æÂêçÔºöÈ¶ñÂÖàÈúÄË¶ÅÊåáÂÆö‰∏Ä‰∏™ÂØÜÈí•ÔºåËØ•ÂØÜÈí•‰ªÖ‰ªÖ‰øùÂ≠òÂú®ÊúçÂä°Âô®‰∏≠Ôºå‰øùËØÅ‰∏çËÉΩËÆ©ÂÖ∂‰ªñÁî®Êà∑Áü•ÈÅì„ÄÇÁÑ∂Âêé‰ΩøÁî®Header‰∏≠ÊåáÂÆöÁöÑÁÆóÊ≥ïÂØπHeaderÂíåPayloadËøõË°åbase64Âä†ÂØÜ‰πãÂêéÁöÑÁªìÊûúÈÄöËøáÂØÜÈí•ËÆ°ÁÆóÂìàÂ∏åÂÄºÔºåÁÑ∂ÂêéÂ∞±ÂæóÂá∫‰∏Ä‰∏™Á≠æÂêçÂìàÂ∏å„ÄÇËøô‰∏™‰ºöÁî®‰∫é‰πãÂêéÈ™åËØÅÂÜÖÂÆπÊòØÂê¶Ë¢´ÁØ°Êîπ„ÄÇ</li>
</ul>
<p>ËøôÈáåËøòÊòØË°•ÂÖÖ‰∏Ä‰∏ã‰∏Ä‰∫õÊ¶ÇÂøµÔºåÂõ†‰∏∫ÂæàÂ§ö‰∏úË•øÈÉΩÊòØÊàë‰ª¨‰πãÂâçÊ≤°ÊúâÊé•Ëß¶ËøáÁöÑÔºö</p>
<ul>
<li><strong>Base64Ôºö</strong>Â∞±ÊòØÂåÖÊã¨Â∞èÂÜôÂ≠óÊØça-z„ÄÅÂ§ßÂÜôÂ≠óÊØçA-Z„ÄÅÊï∞Â≠ó0-9„ÄÅÁ¨¶Âè∑"+"„ÄÅ"/"‰∏ÄÂÖ±64‰∏™Â≠óÁ¨¶ÁöÑÂ≠óÁ¨¶ÈõÜÔºàÊú´Â∞æËøòÊúâ1‰∏™ÊàñÂ§ö‰∏™<code>=</code>Áî®Êù•ÂáëÂ§üÂ≠óËäÇÊï∞ÔºâÔºå‰ªª‰ΩïÁöÑÁ¨¶Âè∑ÈÉΩÂèØ‰ª•ËΩ¨Êç¢ÊàêËøô‰∏™Â≠óÁ¨¶ÈõÜ‰∏≠ÁöÑÂ≠óÁ¨¶ÔºåËøô‰∏™ËΩ¨Êç¢ËøáÁ®ãÂ∞±Âè´ÂÅöBase64ÁºñÁ†ÅÔºåÁºñÁ†Å‰πãÂêé‰ºöÁîüÊàêÂè™ÂåÖÂê´‰∏äËø∞64‰∏™Â≠óÁ¨¶ÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇÁõ∏ÂèçÔºåÂ¶ÇÊûúÈúÄË¶ÅÂéüÊú¨ÁöÑÂÜÖÂÆπÔºåÊàë‰ª¨‰πüÂèØ‰ª•ËøõË°åBase64Ëß£Á†ÅÔºåÂõûÂà∞ÂéüÊúâÁöÑÊ†∑Â≠ê„ÄÇ</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">(){</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;‰Ω†‰ª¨ÂèØËÉΩ‰∏çÁü•ÈÅìÂè™Áî®20‰∏áËµ¢Âà∞578‰∏áÊòØ‰ªÄ‰πàÊ¶ÇÂøµ&quot;</span><span class="p">;</span>
<span class="w">      </span><span class="c1">//Base64‰∏çÂè™ÊòØÂèØ‰ª•ÂØπÂ≠óÁ¨¶‰∏≤ËøõË°åÁºñÁ†ÅÔºå‰ªª‰Ωïbyte[]Êï∞ÊçÆÈÉΩÂèØ‰ª•ÔºåÁºñÁ†ÅÁªìÊûúÂèØ‰ª•ÊòØbyte[]Ôºå‰πüÂèØ‰ª•ÊòØÂ≠óÁ¨¶‰∏≤</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">encodeStr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Base64</span><span class="p">.</span><span class="na">getEncoder</span><span class="p">().</span><span class="na">encodeToString</span><span class="p">(</span><span class="n">str</span><span class="p">.</span><span class="na">getBytes</span><span class="p">());</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Base64ÁºñÁ†ÅÂêéÁöÑÂ≠óÁ¨¶‰∏≤Ôºö&quot;</span><span class="o">+</span><span class="n">encodeStr</span><span class="p">);</span>

<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Ëß£Á†ÅÂêéÁöÑÂ≠óÁ¨¶‰∏≤Ôºö&quot;</span><span class="o">+</span><span class="k">new</span><span class="w"> </span><span class="n">String</span><span class="p">(</span><span class="n">Base64</span><span class="p">.</span><span class="na">getDecoder</span><span class="p">().</span><span class="na">decode</span><span class="p">(</span><span class="n">encodeStr</span><span class="p">)));</span>
<span class="p">}</span>
</code></pre></div>
<p>Ê≥®ÊÑèBase64‰∏çÊòØÂä†ÂØÜÁÆóÊ≥ïÔºåÂè™ÊòØ‰∏ÄÁßç‰ø°ÊÅØÁöÑÁºñÁ†ÅÊñπÂºèËÄåÂ∑≤„ÄÇ</p>
<ul>
<li><strong>Âä†ÂØÜÁÆóÊ≥ïÔºö</strong>Âä†ÂØÜÁÆóÊ≥ïÂàÜ‰∏∫ÂØπÁß∞Âä†ÂØÜÂíåÈùûÂØπÁß∞Âä†ÂØÜÔºåÂÖ∂‰∏≠<strong>ÂØπÁß∞Âä†ÂØÜÔºàSymmetric CryptographyÔºâ</strong>ÊØîËæÉÂ•ΩÁêÜËß£ÔºåÂ∞±ÂÉè‰∏ÄÊääÈîÅÈÖç‰∫Ü‰∏§ÊääÈí•Âåô‰∏ÄÊ†∑ÔºåËøô‰∏§ÊääÈí•Âåô‰Ω†ÂíåÂà´‰∫∫ÈÉΩÊúâ‰∏ÄÊääÔºåÁÑ∂Âêé‰Ω†‰ª¨Áõ¥Êé•‰º†ÈÄíÊï∞ÊçÆÔºåÈÉΩ‰ºöÊääÊï∞ÊçÆÁî®ÈîÅÁªôÈîÅ‰∏äÔºåÂ∞±ÁÆó‰º†ÈÄíÁöÑÈÄî‰∏≠Êúâ‰∫∫ÊääÊï∞ÊçÆÁ™ÉÂèñ‰∫ÜÔºå‰πüÊ≤°ÂäûÊ≥ïËß£ÂØÜÔºåÂõ†‰∏∫Èí•ÂåôÂè™Êúâ‰Ω†ÂíåÂØπÊñπÊúâÔºåÊ≤°ÊúâÈí•ÂåôÊó†Ê≥ïËøõË°åËß£ÂØÜÔºå‰ΩÜÊòØËøôÊ†∑Êúâ‰∏™ÈóÆÈ¢òÔºåÊó¢ÁÑ∂Ëß£ÂØÜÁöÑÂÖ≥ÈîÆÂú®‰∫éÈí•ÂåôÊú¨Ë∫´ÔºåÈÇ£‰πàÂ¶ÇÊûúÊúâ‰∫∫‰∏ç‰ªÖÁ™ÉÂèñ‰∫ÜÊï∞ÊçÆÔºåËÄå‰∏îÂØπÊñπÈÇ£ËæπÁöÑÊ≤ªÂÆâ‰πü‰∏çÂ•ΩÔºå‰∫éÊòØÈ°∫ÊâãÂ∞±ÂÅ∑Ëµ∞‰∫ÜÈí•ÂåôÔºåÈÇ£‰Ω†‰ª¨‰πãÈó¥ÂèëÁöÑÊï∞ÊçÆ‰∏çÂ∞±ÂáâÂáâ‰∫ÜÂêó„ÄÇ</li>
</ul>
<p>Âõ†Ê≠§Ôºå<strong>ÈùûÂØπÁß∞Âä†ÂØÜÔºàAsymmetric CryptographyÔºâ</strong>ÁÆóÊ≥ïÂá∫Áé∞‰∫ÜÔºåÂÆÉÂπ∂‰∏çÊòØÁõ¥Êé•ÁîüÊàê‰∏ÄÊääÈí•ÂåôÔºåËÄåÊòØÁîüÊàê‰∏Ä‰∏™ÂÖ¨Èí•Âíå‰∏Ä‰∏™ÁßÅÈí•ÔºåÁßÅÈí•Âè™ËÉΩÁî±‰Ω†‰øùÁÆ°ÔºåËÄåÂÖ¨Èí•‰∫§ÁªôÂØπÊñπÊàñÊòØ‰Ω†Ë¶ÅÂèëÈÄÅÁöÑ‰ªª‰Ωï‰∫∫ÈÉΩË°åÔºåÁé∞Âú®‰Ω†ÈúÄË¶ÅÊääÊï∞ÊçÆ‰º†ÁªôÂØπÊñπÔºåÈÇ£‰πàÂ∞±ÈúÄË¶Å‰ΩøÁî®ÁßÅÈí•ËøõË°åÂä†ÂØÜÔºå‰ΩÜÊòØÔºåËøô‰∏™Êï∞ÊçÆÂè™ËÉΩ‰ΩøÁî®ÂØπÂ∫îÁöÑÂÖ¨Èí•ËøõË°åËß£ÂØÜÔºåÁõ∏ÂèçÔºåÂ¶ÇÊûúÂØπÊñπÈúÄË¶ÅÁªô‰Ω†ÂèëÈÄÅÊï∞ÊçÆÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÁî®ÂÖ¨Èí•ËøõË°åÂä†ÂØÜÔºåËÄåÊï∞ÊçÆÂè™ËÉΩ‰ΩøÁî®ÁßÅÈí•ËøõË°åËß£ÂØÜÔºåËøôÊ†∑ÁöÑËØùÂ∞±ÁÆóÂØπÊñπÁöÑÂÖ¨Èí•Ë¢´Á™ÉÂèñÔºåÈÇ£‰πàÂà´‰∫∫ÂèëÁªô‰Ω†ÁöÑÊï∞ÊçÆ‰πüÊ≤°ÂäûÊ≥ïËß£ÂØÜÂá∫Êù•ÔºåÂõ†‰∏∫ÈúÄË¶ÅÁßÅÈí•ÊâçËÉΩËß£ÂØÜÔºåËÄåÂè™Êúâ‰Ω†ÊâçÊúâÁßÅÈí•„ÄÇ</p>
<p>Âõ†Ê≠§ÔºåÈùûÂØπÁß∞Âä†ÂØÜÁöÑÂÆâÂÖ®ÊÄß‰ºöÊõ¥È´ò‰∏Ä‰∫õÔºåÂåÖÊã¨HTTPSÁöÑÈöêÁßÅ‰ø°ÊÅØÊ≠£ÊòØ‰ΩøÁî®ÈùûÂØπÁß∞Âä†ÂØÜÊù•‰øùÈöú‰º†ËæìÊï∞ÊçÆÁöÑÂÆâÂÖ®ÔºàÂΩìÁÑ∂HTTPSÂπ∂‰∏çÊòØÂçïÁ∫ØÂú∞‰ΩøÁî®ÈùûÂØπÁß∞Âä†ÂØÜÂÆåÊàêÁöÑÔºåÊÑüÂÖ¥Ë∂£ÁöÑÂèØ‰ª•Âéª‰∫ÜËß£‰∏Ä‰∏ãÔºâ</p>
<p>ÂØπÁß∞Âä†ÂØÜÂíåÈùûÂØπÁß∞Âä†ÂØÜÈÉΩÊúâÂæàÂ§öÁöÑÁÆóÊ≥ïÔºåÊØîÂ¶ÇÂØπÁß∞Âä†ÂØÜÔºåÂ∞±ÊúâÔºöDES„ÄÅIDEA„ÄÅRC2ÔºåÈùûÂØπÁß∞Âä†ÂØÜÊúâÔºöRSA„ÄÅDAS„ÄÅECC</p>
<ul>
<li><strong>‰∏çÂèØÈÄÜÂä†ÂØÜÁÆóÊ≥ïÔºö</strong>Â∏∏ËßÅÁöÑ‰∏çÂèØÈÄÜÂä†ÂØÜÁÆóÊ≥ïÊúâMD5, HMAC, SHA-1, SHA-224, SHA-256, SHA-384, ÂíåSHA-512, ÂÖ∂‰∏≠SHA-224„ÄÅSHA-256„ÄÅSHA-384ÔºåÂíåSHA-512Êàë‰ª¨ÂèØ‰ª•ÁªüÁß∞‰∏∫SHA2Âä†ÂØÜÁÆóÊ≥ïÔºåSHAÂä†ÂØÜÁÆóÊ≥ïÁöÑÂÆâÂÖ®ÊÄßË¶ÅÊØîMD5Êõ¥È´òÔºåËÄåSHA2Âä†ÂØÜÁÆóÊ≥ïÊØîSHA1ÁöÑË¶ÅÈ´òÔºåÂÖ∂‰∏≠SHAÂêéÈù¢ÁöÑÊï∞Â≠óË°®Á§∫ÁöÑÊòØÂä†ÂØÜÂêéÁöÑÂ≠óÁ¨¶‰∏≤ÈïøÂ∫¶ÔºåSHA1ÈªòËÆ§‰ºö‰∫ßÁîü‰∏Ä‰∏™160‰ΩçÁöÑ‰ø°ÊÅØÊëòË¶Å„ÄÇÁªèËøá‰∏çÂèØÈÄÜÂä†ÂØÜÁÆóÊ≥ïÂæóÂà∞ÁöÑÂä†ÂØÜÁªìÊûúÔºåÊòØÊó†Ê≥ïËß£ÂØÜÂõûÂéªÁöÑÔºå‰πüÂ∞±ÊòØËØ¥Âä†ÂØÜÂá∫Êù•ÊòØ‰ªÄ‰πàÂ∞±ÊòØ‰ªÄ‰πà‰∫Ü„ÄÇÊú¨Ë¥®‰∏äÔºåÂÖ∂Â∞±ÊòØ‰∏ÄÁßçÂìàÂ∏åÂáΩÊï∞ÔºåÁî®‰∫éÂØπ‰∏ÄÊÆµ‰ø°ÊÅØ‰∫ßÁîüÊëòË¶ÅÔºå‰ª•<strong>Èò≤Ê≠¢Ë¢´ÁØ°Êîπ</strong>„ÄÇ</li>
</ul>
<p>ÂÆûÈôÖ‰∏äËøôÁßçÁÆóÊ≥ïÂ∞±Â∏∏Â∏∏Ë¢´Áî®‰Ωú‰ø°ÊÅØÊëòË¶ÅËÆ°ÁÆóÔºåÂêåÊ†∑ÁöÑÊï∞ÊçÆÈÄöËøáÂêåÊ†∑ÁöÑÁÆóÊ≥ïËÆ°ÁÆóÂæóÂà∞ÁöÑÁªìÊûúËÇØÂÆö‰πü‰∏ÄÊ†∑ÔºåËÄåÂ¶ÇÊûúÊï∞ÊçÆË¢´‰øÆÊîπÔºåÈÇ£‰πàËÆ°ÁÆóÁöÑÁªìÊûúËÇØÂÆöÂ∞±‰∏ç‰∏ÄÊ†∑‰∫Ü„ÄÇ</p>
<p>ËøôÈáåÊàë‰ª¨Â∞±ÂèØ‰ª•Âà©Áî®jwtÔºåÂ∞ÜÊàë‰ª¨ÁöÑTokenÈááÁî®Êñ∞ÁöÑÊñπÂºèËøõË°åÂ≠òÂÇ®Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16s4h08b9j21ku0dumz4.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412113124880" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16s4h08b9j21ku0dumz4.jpg" /></a></p>
<p>ËøôÈáåÊàë‰ª¨‰ΩøÁî®ÊúÄÁÆÄÂçïÁöÑ‰∏ÄÁßçÊñπÂºèÔºåÂØπÁß∞ÂØÜÈí•ÔºåÊàë‰ª¨ÈúÄË¶ÅÂØπÈ™åËØÅÊúçÂä°Âô®ËøõË°å‰∏Ä‰∫õ‰øÆÊîπÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Bean</span>
<span class="kd">public</span><span class="w"> </span><span class="n">JwtAccessTokenConverter</span><span class="w"> </span><span class="nf">tokenConverter</span><span class="p">(){</span><span class="w">  </span><span class="c1">//TokenËΩ¨Êç¢Âô®ÔºåÂ∞ÜÂÖ∂ËΩ¨Êç¢‰∏∫JWT</span>
<span class="w">    </span><span class="n">JwtAccessTokenConverter</span><span class="w"> </span><span class="n">converter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JwtAccessTokenConverter</span><span class="p">();</span>
<span class="w">    </span><span class="n">converter</span><span class="p">.</span><span class="na">setSigningKey</span><span class="p">(</span><span class="s">&quot;lbwnb&quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">//Ëøô‰∏™ÊòØÂØπÁß∞ÂØÜÈí•Ôºå‰∏Ä‰ºöËµÑÊ∫êÊúçÂä°Âô®ÈÇ£Ëæπ‰πüË¶ÅÊåáÂÆö‰∏∫Ëøô‰∏™</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@Bean</span>
<span class="kd">public</span><span class="w"> </span><span class="n">TokenStore</span><span class="w"> </span><span class="nf">tokenStore</span><span class="p">(</span><span class="n">JwtAccessTokenConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">){</span><span class="w">  </span><span class="c1">//TokenÂ≠òÂÇ®ÊñπÂºèÁé∞Âú®Êîπ‰∏∫JWTÂ≠òÂÇ®</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JwtTokenStore</span><span class="p">(</span><span class="n">converter</span><span class="p">);</span><span class="w">  </span><span class="c1">//‰º†ÂÖ•ÂàöÂàöÂÆö‰πâÂ•ΩÁöÑËΩ¨Êç¢Âô®</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Resource</span>
<span class="n">TokenStore</span><span class="w"> </span><span class="n">store</span><span class="p">;</span>

<span class="nd">@Resource</span>
<span class="n">JwtAccessTokenConverter</span><span class="w"> </span><span class="n">converter</span><span class="p">;</span>

<span class="kd">private</span><span class="w"> </span><span class="n">AuthorizationServerTokenServices</span><span class="w"> </span><span class="nf">serverTokenServices</span><span class="p">(){</span><span class="w">  </span><span class="c1">//ËøôÈáåÂØπAuthorizationServerTokenServicesËøõË°å‰∏Ä‰∏ãÈÖçÁΩÆ</span>
<span class="w">    </span><span class="n">DefaultTokenServices</span><span class="w"> </span><span class="n">services</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DefaultTokenServices</span><span class="p">();</span>
<span class="w">    </span><span class="n">services</span><span class="p">.</span><span class="na">setSupportRefreshToken</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span><span class="w">   </span><span class="c1">//ÂÖÅËÆ∏TokenÂà∑Êñ∞</span>
<span class="w">    </span><span class="n">services</span><span class="p">.</span><span class="na">setTokenStore</span><span class="p">(</span><span class="n">store</span><span class="p">);</span><span class="w">   </span><span class="c1">//Ê∑ªÂä†ÂàöÂàöÁöÑTokenStore</span>
<span class="w">    </span><span class="n">services</span><span class="p">.</span><span class="na">setTokenEnhancer</span><span class="p">(</span><span class="n">converter</span><span class="p">);</span><span class="w">   </span><span class="c1">//Ê∑ªÂä†TokenÂ¢ûÂº∫ÔºåÂÖ∂ÂÆûÂ∞±ÊòØJwtAccessTokenConverterÔºåÂ¢ûÂº∫ÊòØÊ∑ªÂä†‰∏Ä‰∫õËá™ÂÆö‰πâÁöÑÊï∞ÊçÆÂà∞JWT‰∏≠</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">services</span><span class="p">;</span>
<span class="p">}</span>

<span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">AuthorizationServerEndpointsConfigurer</span><span class="w"> </span><span class="n">endpoints</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">endpoints</span>
<span class="w">            </span><span class="p">.</span><span class="na">tokenServices</span><span class="p">(</span><span class="n">serverTokenServices</span><span class="p">())</span><span class="w">   </span><span class="c1">//ËÆæÂÆö‰∏∫ÂàöÂàöÈÖçÁΩÆÂ•ΩÁöÑAuthorizationServerTokenServices</span>
<span class="w">            </span><span class="p">.</span><span class="na">userDetailsService</span><span class="p">(</span><span class="n">service</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">authenticationManager</span><span class="p">(</span><span class="n">manager</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•ÈáçÂêØÈ™åËØÅÊúçÂä°Âô®‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16sxi8zk7j21c20dkdjy.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412115919019" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16sxi8zk7j21c20dkdjy.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÊàêÂäüËé∑Âèñ‰∫ÜAccessTokenÔºå‰ΩÜÊòØËøôÈáåÁöÑÊ†ºÂºèË∑üÊàë‰ª¨‰πãÂâçÁöÑÊ†ºÂºèÂ∞±Â§ß‰∏çÁõ∏Âêå‰∫ÜÔºåÂõ†‰∏∫Áé∞Âú®ÂÆÉÊòØJWT‰ª§ÁâåÔºåÊàë‰ª¨ÂèØ‰ª•ÂØπÂÖ∂ËøõË°å‰∏Ä‰∏ãBase64Ëß£Á†ÅÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16szvyek8j22om0dsmzi.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412120136453" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16szvyek8j22om0dsmzi.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÊâÄÊúâÁöÑÈ™åËØÅ‰ø°ÊÅØÂåÖÂê´Âú®ÂÜÖÔºåÁé∞Âú®Êàë‰ª¨ÂØπËµÑÊ∫êÊúçÂä°Âô®ËøõË°åÈÖçÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">security</span><span class="p">:</span>
<span class="w">  </span><span class="nt">oauth2</span><span class="p">:</span>
<span class="w">    </span><span class="nt">resource</span><span class="p">:</span>
<span class="w">      </span><span class="nt">jwt</span><span class="p">:</span>
<span class="w">        </span><span class="nt">key-value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">lbwnb</span><span class="w"> </span><span class="c1">#Ê≥®ÊÑèËøôÈáåË¶ÅË∑üÈ™åËØÅÊúçÂä°Âô®ÁöÑÂØÜÈí•‰∏ÄËá¥ÔºåËøôÊ†∑ÁÆóÂá∫Êù•ÁöÑÁ≠æÂêçÊâç‰ºö‰∏ÄËá¥</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÂêØÂä®ËµÑÊ∫êÊúçÂä°Âô®ÔºåËØ∑Ê±Ç‰∏Ä‰∏ãÊé•Âè£ËØïËØïÁúãÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16t27q8g1j21b60foacd.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412120350331" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16t27q8g1j21b60foacd.jpg" /></a></p>
<p>ËØ∑Ê±ÇÊàêÂäüÔºåÂæóÂà∞Êï∞ÊçÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16t2o2neej21ca08074t.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412120417005" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16t2o2neej21ca08074t.jpg" /></a></p>
<p>Ê≥®ÊÑèÂ¶ÇÊûúTokenÊúâËØØÔºåÈÇ£‰πà‰ºöÂæóÂà∞Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h16t33dv9kj215m04uaab.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412120441794" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h16t33dv9kj215m04uaab.jpg" /></a></p>
<hr />
<h2 id="redis">Redis‰∏éÂàÜÂ∏ÉÂºè<a class="headerlink" href="#redis" title="Permanent link">&para;</a></h2>
<p>Âú®SpringBootÈò∂ÊÆµÔºåÊàë‰ª¨Â≠¶‰π†‰∫ÜRedisÔºåÂÆÉÊòØ‰∏Ä‰∏™Âü∫‰∫éÂÜÖÂ≠òÁöÑÈ´òÊÄßËÉΩÊï∞ÊçÆÂ∫ìÔºåÊàë‰ª¨ÂΩìÊó∂Â∑≤ÁªèÂ≠¶‰π†‰∫ÜÂåÖÊã¨Âü∫Êú¨Êìç‰Ωú„ÄÅÂ∏∏Áî®Êï∞ÊçÆÁ±ªÂûã„ÄÅÊåÅ‰πÖÂåñ„ÄÅ‰∫ãÂä°ÂíåÈîÅÊú∫Âà∂‰ª•Âèä‰ΩøÁî®Java‰∏éRedisËøõË°å‰∫§‰∫íÁ≠âÔºåÂà©Áî®ÂÆÉÁöÑÈ´òÊÄßËÉΩÔºåÊàë‰ª¨Ëøò‰ΩøÁî®ÂÆÉÊù•ÂÅöMybatisÁöÑ‰∫åÁ∫ßÁºìÂ≠ò„ÄÅ‰ª•ÂèäTokenÁöÑÊåÅ‰πÖÂåñÂ≠òÂÇ®„ÄÇËÄåËøô‰∏ÄÈÉ®ÂàÜÔºåÊàë‰ª¨Â∞ÜÁªßÁª≠Ê∑±ÂÖ•ÔºåÊé¢ËÆ®RedisÂú®ÂàÜÂ∏ÉÂºèÂºÄÂèëÂú∫ÊôØ‰∏ãÁöÑÂ∫îÁî®„ÄÇ</p>
<h3 id="_5">‰∏ª‰ªéÂ§çÂà∂<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<p>Âú®ÂàÜÂ∏ÉÂºèÂú∫ÊôØ‰∏ãÔºåÊàë‰ª¨ÂèØ‰ª•ËÄÉËôëËÆ©RedisÂÆûÁé∞‰∏ª‰ªéÊ®°ÂºèÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h170fqh9k0j21ao07gwf9.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220412161901616" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h170fqh9k0j21ao07gwf9.jpg" /></a></p>
<p>‰∏ª‰ªéÂ§çÂà∂ÔºåÊòØÊåáÂ∞Ü‰∏ÄÂè∞RedisÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÔºåÂ§çÂà∂Âà∞ÂÖ∂‰ªñÁöÑRedisÊúçÂä°Âô®„ÄÇÂâçËÄÖÁß∞‰∏∫‰∏ªËäÇÁÇπ(Master)ÔºåÂêéËÄÖÁß∞‰∏∫‰ªéËäÇÁÇπ(Slave)ÔºåÊï∞ÊçÆÁöÑÂ§çÂà∂ÊòØÂçïÂêëÁöÑÔºåÂè™ËÉΩÁî±‰∏ªËäÇÁÇπÂà∞‰ªéËäÇÁÇπ„ÄÇMaster‰ª•ÂÜô‰∏∫‰∏ªÔºåSlave ‰ª•ËØª‰∏∫‰∏ª„ÄÇ</p>
<p>ËøôÊ†∑ÁöÑÂ•ΩÂ§ÑËÇØÂÆöÊòØÊòæËÄåÊòìËßÅÁöÑÔºö</p>
<ul>
<li>ÂÆûÁé∞‰∫ÜËØªÂÜôÂàÜÁ¶ªÔºåÊèêÈ´ò‰∫ÜÊÄßËÉΩ„ÄÇ</li>
<li>Âú®ÂÜôÂ∞ëËØªÂ§öÁöÑÂú∫ÊôØ‰∏ãÔºåÊàë‰ª¨ÁîöËá≥ÂèØ‰ª•ÂÆâÊéíÂæàÂ§ö‰∏™‰ªéËäÇÁÇπÔºåËøôÊ†∑Â∞±ËÉΩÂ§üÂ§ßÂπÖÂ∫¶ÁöÑÂàÜÊãÖÂéãÂäõÔºåÂπ∂‰∏îÂ∞±ÁÆóÊåÇÊéâ‰∏Ä‰∏™ÔºåÂÖ∂‰ªñÁöÑ‰πüËÉΩ‰ΩøÁî®„ÄÇ</li>
</ul>
<p>ÈÇ£‰πàÊàë‰ª¨Áé∞Âú®Â∞±Êù•Â∞ùËØïÂÆûÁé∞‰∏Ä‰∏ãÔºåËøôÈáåÊàë‰ª¨ËøòÊòØÂú®Windows‰∏ãËøõË°åÊµãËØïÔºåÊâìÂºÄRedisÊñá‰ª∂Â§πÔºåÊàë‰ª¨Ë¶ÅÂºÄÂêØ‰∏§‰∏™RedisÊúçÂä°Âô®Ôºå‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂<code>redis.windows.conf</code>Ôºö</p>
<div class="highlight"><pre><span></span><code># Accept connections on the specified port, default is 6379 (IANA #815344).
# If port 0 is specified Redis will not listen on a TCP socket.
port 6001
</code></pre></div>
<p>‰∏Ä‰∏™ÊúçÂä°Âô®ÁöÑÁ´ØÂè£ËÆæÂÆö‰∏∫6001ÔºåÂ§çÂà∂‰∏Ä‰ªΩÔºåÂè¶‰∏Ä‰∏™ÁöÑÁ´ØÂè£‰∏∫6002ÔºåÊé•ÁùÄÊàë‰ª¨ÊåáÂÆöÈÖçÁΩÆÊñá‰ª∂ËøõË°åÂêØÂä®ÔºåÊâìÂºÄcmdÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17ycpqc7aj21ho0iytcq.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413115227344" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17ycpqc7aj21ho0iytcq.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨ÁöÑ‰∏§‰∏™ÊúçÂä°Âô®Â∞±ÂêØÂä®ÊàêÂäü‰∫ÜÔºåÊé•ÁùÄÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®ÂëΩ‰ª§Êü•ÁúãÂΩìÂâçÊúçÂä°Âô®ÁöÑ‰∏ª‰ªéÁä∂ÊÄÅÔºåÊàë‰ª¨ÊâìÂºÄÂÆ¢Êà∑Á´ØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yfaen55j21ge0d6dj4.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413115458597" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yfaen55j21ge0d6dj4.jpg" /></a></p>
<p>ËæìÂÖ•<code>info replication</code>ÂëΩ‰ª§Êù•Êü•ÁúãÂΩìÂâçÁöÑ‰∏ª‰ªéÁä∂ÊÄÅÔºåÂèØ‰ª•ÁúãÂà∞ÈªòËÆ§ÁöÑËßíËâ≤‰∏∫ÔºömasterÔºå‰πüÂ∞±ÊòØËØ¥ÊâÄÊúâÁöÑÊúçÂä°Âô®Âú®ÂêØÂä®‰πãÂêéÈÉΩÊòØ‰∏ªËäÇÁÇπÁöÑÁä∂ÊÄÅ„ÄÇÈÇ£‰πàÁé∞Âú®Êàë‰ª¨Â∏åÊúõËÆ©6002‰Ωú‰∏∫‰ªéËäÇÁÇπÔºåÈÄöËøá‰∏Ä‰∏™ÂëΩ‰ª§Âç≥ÂèØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yhstlr6j21hk0k078p.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413115722765" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yhstlr6j21hk0k078p.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®ËæìÂÖ•<code>replicaof 127.0.0.1 6001</code>ÂëΩ‰ª§ÂêéÔºåÂ∞±‰ºöÂ∞Ü6001ÊúçÂä°Âô®‰Ωú‰∏∫‰∏ªËäÇÁÇπÔºåËÄåÂΩìÂâçËäÇÁÇπ‰Ωú‰∏∫6001ÁöÑ‰ªéËäÇÁÇπÔºåÂπ∂‰∏îËßíËâ≤‰πü‰ºöÂèòÊàêÔºöslaveÔºåÊé•ÁùÄÊàë‰ª¨Êù•ÁúãÁúã6001ÁöÑÊÉÖÂÜµÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17ykiln90j21cq0c4tbw.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413115959759" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17ykiln90j21cq0c4tbw.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞‰ªéËäÇÁÇπ‰ø°ÊÅØ‰∏≠Â∑≤ÁªèÂá∫Áé∞‰∫Ü6002ÊúçÂä°Âô®Ôºå‰πüÂ∞±ÊòØËØ¥Áé∞Âú®Êàë‰ª¨ÁöÑ6001Âíå6002Â∞±ÂΩ¢Êàê‰∫Ü‰∏ª‰ªéÂÖ≥Á≥ªÔºàËøòÂåÖÂê´‰∏Ä‰∏™ÂÅèÁßªÈáèÔºåËøô‰∏™ÂÅèÁßªÈáèÂèçÂ∫îÁöÑÊòØ‰ªéËäÇÁÇπÁöÑÂêåÊ≠•ÊÉÖÂÜµÔºâ</p>
<blockquote>
<p>‰∏ªÊúçÂä°Âô®Âíå‰ªéÊúçÂä°Âô®ÈÉΩ‰ºöÁª¥Êä§‰∏Ä‰∏™Â§çÂà∂ÂÅèÁßªÈáèÔºå‰∏ªÊúçÂä°Âô®ÊØèÊ¨°Âêë‰ªéÊúçÂä°Âô®‰∏≠‰º†ÈÄí N ‰∏™Â≠óËäÇÁöÑÊó∂ÂÄôÔºå‰ºöÂ∞ÜËá™Â∑±ÁöÑÂ§çÂà∂ÂÅèÁßªÈáèÂä†‰∏ä N„ÄÇ‰ªéÊúçÂä°Âô®‰∏≠Êî∂Âà∞‰∏ªÊúçÂä°Âô®ÁöÑ N ‰∏™Â≠óËäÇÁöÑÊï∞ÊçÆÔºåÂ∞±‰ºöÂ∞ÜËá™Â∑±È¢ùÂ§çÂà∂ÂÅèÁßªÈáèÂä†‰∏ä NÔºåÈÄöËøá‰∏ª‰ªéÊúçÂä°Âô®ÁöÑÂÅèÁßªÈáèÂØπÊØîÂèØ‰ª•ÂæàÊ∏ÖÊ•öÁöÑÁü•ÈÅì‰∏ª‰ªéÊúçÂä°Âô®ÁöÑÊï∞ÊçÆÊòØÂê¶Â§Ñ‰∫é‰∏ÄËá¥ÔºåÂ¶ÇÊûú‰∏ç‰∏ÄËá¥Â∞±ÈúÄË¶ÅËøõË°åÂ¢ûÈáèÂêåÊ≠•‰∫Ü„ÄÇ</p>
</blockquote>
<p>ÈÇ£‰πàÊàë‰ª¨Áé∞Âú®ÂèØ‰ª•Êù•ÊµãËØï‰∏Ä‰∏ãÔºåÂú®‰∏ªËäÇÁÇπÊñ∞Â¢ûÊï∞ÊçÆÔºåÁúãÁúãÊòØÂê¶‰ºöÂêåÊ≠•Âà∞‰ªéËäÇÁÇπÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17ym5549oj219w06kjs4.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413120133934" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17ym5549oj219w06kjs4.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊàë‰ª¨Âú®6001ÊúçÂä°Âô®ÊèíÂÖ•ÁöÑ<code>a</code>ÔºåÂèØ‰ª•Âú®‰ªéËäÇÁÇπ6002ËØªÂèñÂà∞ÔºåÈÇ£‰πàÔºå‰ªéËäÇÁÇπÊñ∞Â¢ûÁöÑÊï∞ÊçÆÂú®‰∏ªËäÇÁÇπËÉΩÂæóÂà∞ÂêóÔºüÊàë‰ª¨Êù•ÊµãËØï‰∏Ä‰∏ãÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yn7gu6zj20xy0323z1.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413120235138" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yn7gu6zj20xy0323z1.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞Ôºå‰ªéËäÇÁÇπÂéãÊ†πÂ∞±Ê≤°ÂäûÊ≥ïËøõË°åÊï∞ÊçÆÊèíÂÖ•ÔºåËäÇÁÇπÁöÑÊ®°Âºè‰∏∫Âè™ËØªÊ®°Âºè„ÄÇÈÇ£‰πàÂ¶ÇÊûúÊàë‰ª¨Áé∞Âú®‰∏çÊÉ≥ËÆ©6002‰Ωú‰∏∫6001ÁöÑ‰ªéËäÇÁÇπ‰∫ÜÂë¢Ôºü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zqijbfmj21bu09s76d.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413124021549" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zqijbfmj21bu09s76d.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÈÄöËøáËæìÂÖ•<code>replicaof no one</code>ÔºåÂç≥ÂèØÂèòÂõûMasterËßíËâ≤„ÄÇÊé•ÁùÄÊàë‰ª¨ÂÜçÊù•ÂêØÂä®‰∏ÄÂè∞6003ÊúçÂä°Âô®ÔºåÊµÅÁ®ãÊòØ‰∏ÄÊ†∑ÁöÑÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yypexpij215c062gmg.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413121338391" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17yypexpij215c062gmg.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®ËøûÊé•‰πãÂêéÔºå‰πü‰ºöÁõ¥Êé•ÂêåÊ≠•‰∏ªËäÇÁÇπÁöÑÊï∞ÊçÆÔºåÂõ†Ê≠§Êó†ËÆ∫ÊòØÂ∑≤ÁªèÂ§Ñ‰∫é‰ªéËäÇÁÇπÁä∂ÊÄÅËøòÊòØÂàöÂàöÂêØÂä®ÂÆåÊàêÁöÑÊúçÂä°Âô®ÔºåÈÉΩ‰ºö‰ªé‰∏ªËäÇÁÇπÂêåÊ≠•Êï∞ÊçÆÔºåÂÆûÈôÖ‰∏äÊï¥‰∏™ÂêåÊ≠•ÊµÅÁ®ã‰∏∫Ôºö</p>
<ol>
<li>‰ªéËäÇÁÇπÊâßË°åreplicaof ip portÂëΩ‰ª§ÂêéÔºå‰ªéËäÇÁÇπ‰ºö‰øùÂ≠ò‰∏ªËäÇÁÇπÁõ∏ÂÖ≥ÁöÑÂú∞ÂùÄ‰ø°ÊÅØ„ÄÇ</li>
<li>‰ªéËäÇÁÇπÈÄöËøáÊØèÁßíËøêË°åÁöÑÂÆöÊó∂‰ªªÂä°ÂèëÁé∞ÈÖçÁΩÆ‰∫ÜÊñ∞ÁöÑ‰∏ªËäÇÁÇπÂêéÔºå‰ºöÂ∞ùËØï‰∏éËØ•ËäÇÁÇπÂª∫Á´ãÁΩëÁªúËøûÊé•Ôºå‰∏ìÈó®Áî®‰∫éÊé•Êî∂‰∏ªËäÇÁÇπÂèëÈÄÅÁöÑÂ§çÂà∂ÂëΩ‰ª§„ÄÇ</li>
<li>ËøûÊé•ÊàêÂäüÂêéÔºåÁ¨¨‰∏ÄÊ¨°‰ºöÂ∞Ü‰∏ªËäÇÁÇπÁöÑÊï∞ÊçÆËøõË°åÂÖ®ÈáèÂ§çÂà∂Ôºå‰πãÂêéÈááÁî®Â¢ûÈáèÂ§çÂà∂ÔºåÊåÅÁª≠Â∞ÜÊñ∞Êù•ÁöÑÂÜôÂëΩ‰ª§ÂêåÊ≠•Áªô‰ªéËäÇÁÇπ„ÄÇ</li>
</ol>
<p>ÂΩìÊàë‰ª¨ÁöÑ‰∏ªËäÇÁÇπÂÖ≥Èó≠ÂêéÔºå‰ªéËäÇÁÇπ‰æùÁÑ∂ÂèØ‰ª•ËØªÂèñÊï∞ÊçÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17z9oo7bdj21ce0majw5.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413122411006" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17z9oo7bdj21ce0majw5.jpg" /></a></p>
<p>‰ΩÜÊòØ‰ªéËäÇÁÇπ‰ºöÁñØÁãÇÊä•ÈîôÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zb0v187j21he032myo.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413122528096" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zb0v187j21he032myo.jpg" /></a></p>
<p>ÂΩìÁÑ∂ÊØèÊ¨°ÈÉΩÂéªÊï≤‰∏™ÂëΩ‰ª§ÈÖçÁΩÆ‰∏ª‰ªéÂ§™È∫ªÁÉ¶‰∫ÜÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ÈÖçÁΩÆÔºåÊ∑ªÂä†ËøôÊ†∑Ë°åÂç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code>replicaof 127.0.0.1 6001
</code></pre></div>
<p>ËøôÈáåÊàë‰ª¨Áªô6002Âíå6003ÊúçÂä°Âô®ÈÉΩÈÖçÁΩÆ‰∏Ä‰∏ãÔºåÁé∞Âú®Êàë‰ª¨ÈáçÂêØ‰∏â‰∏™ÊúçÂä°Âô®„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zehyh4pj21hg0d6gu1.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413122848685" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zehyh4pj21hg0d6gu1.jpg" /></a></p>
<p>ÂΩìÁÑ∂ÔºåÈô§‰∫Ü‰Ωú‰∏∫MasterËäÇÁÇπÁöÑ‰ªéËäÇÁÇπÂ§ñÔºåÊàë‰ª¨ËøòÂèØ‰ª•Â∞ÜÂÖ∂‰Ωú‰∏∫‰ªéËäÇÁÇπÁöÑ‰ªéËäÇÁÇπÔºåÊØîÂ¶ÇÁé∞Âú®Êàë‰ª¨ËÆ©6003‰Ωú‰∏∫6002ÁöÑ‰ªéËäÇÁÇπÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zgkb251j216e09mq4n.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413123047711" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zgkb251j216e09mq4n.jpg" /></a></p>
<p>‰πüÂ∞±ÊòØËØ¥ÔºåÁé∞Âú®Â∑Æ‰∏çÂ§öÊòØËøôÊ†∑ÁöÑÁöÑ‰∏Ä‰∏™ÊÉÖÂÜµÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zm1h2wpj21ja0ikjv0.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413123603650" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h17zm1h2wpj21ja0ikjv0.jpg" /></a></p>
<p>ÈááÁî®ËøôÁßçÊñπÂºèÔºå‰ºòÁÇπËÇØÂÆöÊòØÊòæËÄåÊòìËßÅÁöÑÔºå‰ΩÜÊòØÁº∫ÁÇπ‰πüÂæàÊòéÊòæÔºåÊï¥‰∏™‰º†Êí≠ÈìæË∑Ø‰∏ÄÊó¶‰∏≠ÈÄîÂá∫Áé∞ÈóÆÈ¢òÔºåÈÇ£‰πàÂ∞±‰ºöÂØºËá¥ÂêéÈù¢ÁöÑ‰ªéËäÇÁÇπÊó†Ê≥ïÂèäÊó∂ÂêåÊ≠•„ÄÇ</p>
<h3 id="_6">Âì®ÂÖµÊ®°Âºè<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<p>ÂâçÈù¢Êàë‰ª¨ËÆ≤Ëß£‰∫ÜRedisÂÆûÁé∞‰∏ª‰ªéÂ§çÂà∂ÁöÑ‰∏Ä‰∫õÂü∫Êú¨Êìç‰ΩúÔºåÈÇ£‰πàÊàë‰ª¨Êé•ÁùÄÊù•ÁúãÂì®ÂÖµÊ®°Âºè„ÄÇ</p>
<p>ÁªèËøá‰πãÂâçÁöÑÂ≠¶‰π†ÔºåÊàë‰ª¨ÂèëÁé∞ÔºåÂÆûÈôÖ‰∏äÊúÄÂÖ≥ÈîÆÁöÑËøòÊòØ‰∏ªËäÇÁÇπÔºåÂõ†‰∏∫‰∏ÄÊó¶‰∏ªËäÇÁÇπÂá∫Áé∞ÈóÆÈ¢òÔºåÈÇ£‰πàÊï¥‰∏™‰∏ª‰ªéÁ≥ªÁªüÂ∞ÜÊó†Ê≥ïÂÜôÂÖ•ÔºåÂõ†Ê≠§ÔºåÊàë‰ª¨ÂæóÊÉ≥‰∏Ä‰∏™ÂäûÊ≥ïÔºåÂ§ÑÁêÜ‰∏Ä‰∏ã‰∏ªËäÇÁÇπÊïÖÈöúÁöÑÊÉÖÂÜµ„ÄÇÂÆûÈôÖ‰∏äÊàë‰ª¨ÂèØ‰ª•ÂèÇËÄÉ‰πãÂâçÁöÑÊúçÂä°Ê≤ªÁêÜÊ®°ÂºèÔºåÊØîÂ¶ÇNacosÂíåEurekaÔºåÊâÄÊúâÁöÑÊúçÂä°ÈÉΩ‰ºöË¢´ÂÆûÊó∂ÁõëÊéßÔºåÈÇ£‰πàÂè™Ë¶ÅÂá∫Áé∞ÈóÆÈ¢òÔºåËÇØÂÆöÊòØÂèØ‰ª•ÂèäÊó∂ÂèëÁé∞ÁöÑÔºåÂπ∂‰∏îËÉΩÂ§üÈááÂèñÂìçÂ∫îÁöÑË°•ÊïëÊé™ÊñΩÔºåËøôÂ∞±ÊòØÊàë‰ª¨Âç≥Â∞Ü‰ªãÁªçÁöÑÂì®ÂÖµÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h184yisdi6j218i0dk405.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413154102800" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h184yisdi6j218i0dk405.jpg" /></a></p>
<p>Ê≥®ÊÑèËøôÈáåÁöÑÂì®ÂÖµ‰∏çÊòØÊàë‰ª¨‰πãÂâçÂ≠¶‰π†SpringCloud AlibabaÁöÑÈÇ£‰∏™ÔºåÊòØ‰∏ìÁî®‰∫éRedisÁöÑ„ÄÇÂì®ÂÖµ‰ºöÂØπÊâÄÊúâÁöÑËäÇÁÇπËøõË°åÁõëÊéßÔºåÂ¶ÇÊûúÂèëÁé∞‰∏ªËäÇÁÇπÂá∫Áé∞ÈóÆÈ¢òÔºåÈÇ£‰πà‰ºöÁ´ãÂç≥ËÆ©‰ªéËäÇÁÇπËøõË°åÊäïÁ•®ÔºåÈÄâ‰∏æ‰∏Ä‰∏™Êñ∞ÁöÑ‰∏ªËäÇÁÇπÂá∫Êù•ÔºåËøôÊ†∑Â∞±‰∏ç‰ºöÁî±‰∫é‰∏ªËäÇÁÇπÁöÑÊïÖÈöúÂØºËá¥Êï¥‰∏™Á≥ªÁªü‰∏çÂèØÂÜôÔºàÊ≥®ÊÑèË¶ÅÂÆûÁé∞ËøôÊ†∑ÁöÑÂäüËÉΩÊúÄÂ∞èÁöÑÁ≥ªÁªüÂøÖÈ°ªÊòØ‰∏Ä‰∏ª‰∏Ä‰ªéÔºåÂÜçÂ∞èÁöÑËØùÂ∞±Ê≤°ÊúâÊÑè‰πâ‰∫ÜÔºâ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h185d16octj21940dawg5.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413155459399" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h185d16octj21940dawg5.jpg" /></a></p>
<p>ÈÇ£‰πàÊÄé‰πàÂêØÂä®‰∏Ä‰∏™Âì®ÂÖµÂë¢ÔºüÊàë‰ª¨Âè™ÈúÄË¶ÅÁ®çÂæÆ‰øÆÊîπ‰∏Ä‰∏ãÈÖçÁΩÆÊñá‰ª∂Âç≥ÂèØÔºåËøôÈáåÁõ¥Êé•Âà†Èô§ÂÖ®ÈÉ®ÂÜÖÂÆπÔºåÊ∑ªÂä†Ôºö</p>
<div class="highlight"><pre><span></span><code>sentinel monitor lbwnb 127.0.0.1 6001 1
</code></pre></div>
<p>ÂÖ∂‰∏≠Á¨¨‰∏Ä‰∏™ÂíåÁ¨¨‰∫å‰∏™ÊòØÂõ∫ÂÆöÔºåÁ¨¨‰∏â‰∏™ÊòØ‰∏∫ÁõëÊéßÂØπË±°ÂêçÁß∞ÔºåÈöèÊÑèÔºåÂêéÈù¢Â∞±ÊòØ‰∏ªËäÇÁÇπÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØÔºåÂåÖÊã¨IPÂú∞ÂùÄÂíåÁ´ØÂè£ÔºåÊúÄÂêé‰∏Ä‰∏™1Êàë‰ª¨ÊöÇÊó∂ÂÖà‰∏çËØ¥ÔºåÁÑ∂ÂêéÊàë‰ª¨‰ΩøÁî®Ê≠§ÈÖçÁΩÆÊñá‰ª∂ÂêØÂä®ÊúçÂä°Âô®ÔºåÂèØ‰ª•ÁúãÂà∞ÂêØÂä®ÂêéÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h185umqg2rj21fg0maq8l.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413161154185" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h185umqg2rj21fg0maq8l.jpg" /></a></p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h185vv5uuvj217e03u40p.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413161306103" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h185vv5uuvj217e03u40p.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞‰ª•Âì®ÂÖµÊ®°ÂºèÂêØÂä®ÂêéÔºå‰ºöËá™Âä®ÁõëÊéß‰∏ªËäÇÁÇπÔºåÁÑ∂ÂêéËøò‰ºöÊòæÁ§∫ÈÇ£‰∫õËäÇÁÇπÊòØ‰Ωú‰∏∫‰ªéËäÇÁÇπÂ≠òÂú®ÁöÑ„ÄÇ</p>
<p>Áé∞Âú®Êàë‰ª¨Áõ¥Êé•Êää‰∏ªËäÇÁÇπÂÖ≥Èó≠ÔºåÁúãÁúã‰ºöÂèëÁîü‰ªÄ‰πà‰∫ãÊÉÖÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1860g13toj21hg072n1k.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413161730035" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1860g13toj21hg072n1k.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞‰ªéËäÇÁÇπËøòÊòØÊ≠£Â∏∏ÁöÑÂú®Êä•ÈîôÔºå‰∏ÄÂºÄÂßãÁöÑÊó∂ÂÄô‰∏ç‰ºöÁõ¥Êé•ÈáçÊñ∞ËøõË°åÈÄâ‰∏æËÄåÊòØÁªßÁª≠Â∞ùËØïÈáçËøûÔºàÂõ†‰∏∫ÊúâÂèØËÉΩÂè™ÊòØÁΩëÁªúÂ∞èÂç°‰∏Ä‰∏ãÔºåÊ≤°ÂøÖË¶ÅËøô‰πàÊïèÊÑüÔºâÔºå‰ΩÜÊòØÊàë‰ª¨ÂèëÁé∞ÔºåÁªèËøá‰∏ÄÊÆµÊó∂Èó¥‰πãÂêéÔºå‰æùÁÑ∂Êó†Ê≥ïËøûÊé•ÔºåÂì®ÂÖµËæìÂá∫‰∫Ü‰ª•‰∏ãÂÜÖÂÆπÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1861pyd5uj21gs0jman3.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413161843439" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1861pyd5uj21gs0jman3.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞Âì®ÂÖµÂèëÁé∞‰∏ªËäÇÁÇπÂ∑≤ÁªèÊúâ‰∏ÄÊÆµÊó∂Èó¥‰∏çÂèØÁî®‰∫ÜÔºåÈÇ£‰πàÂ∞±‰ºöÂºÄÂßãËøõË°åÈáçÊñ∞ÈÄâ‰∏æÔºå6003ËäÇÁÇπË¢´ÈÄâ‰∏∫‰∫ÜÊñ∞ÁöÑ‰∏ªËäÇÁÇπÔºåÂπ∂‰∏î‰πãÂâçÁöÑ‰∏ªËäÇÁÇπ6001ÂèòÊàê‰∫ÜÊñ∞ÁöÑ‰∏ªËäÇÁÇπÁöÑ‰ªéËäÇÁÇπÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18665ksokj21hq05sjuu.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413162259056" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18665ksokj21hq05sjuu.jpg" /></a></p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1866crze4j21f207kq5f.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413162310821" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1866crze4j21f207kq5f.jpg" /></a></p>
<p>ÂΩìÊàë‰ª¨ÂÜçÊ¨°ÂêØÂä®6001Êó∂Ôºå‰ºöÂèëÁé∞ÔºåÂÆÉËá™Âä®ÂèòÊàê‰∫Ü6003ÁöÑ‰ªéËäÇÁÇπÔºåÂπ∂‰∏î‰ºöÂ∞ÜÊï∞ÊçÆÂêåÊ≠•ËøáÊù•Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h186j4ul8mj21gu09qq8y.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413163527235" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h186j4ul8mj21gu09qq8y.jpg" /></a></p>
<p>ÈÇ£‰πàÔºåËøô‰∏™ÈÄâ‰∏æËßÑÂàôÊòØÊÄéÊ†∑ÁöÑÂë¢ÔºüÊòØÂú®ÊâÄÊúâÁöÑ‰ªéËäÇÁÇπ‰∏≠ÈöèÊú∫ÈÄâÂèñËøòÊòØÈÅµÂæ™ÊüêÁßçËßÑÂàôÂë¢Ôºü</p>
<ol>
<li>È¶ñÂÖà‰ºöÊ†πÊçÆ‰ºòÂÖàÁ∫ßËøõË°åÈÄâÊã©ÔºåÂèØ‰ª•Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠ËøõË°åÈÖçÁΩÆÔºåÊ∑ªÂä†<code>replica-priority</code>ÈÖçÁΩÆÈ°πÔºàÈªòËÆ§ÊòØ100ÔºâÔºåË∂äÂ∞èË°®Á§∫‰ºòÂÖàÁ∫ßË∂äÈ´ò„ÄÇ</li>
<li>Â¶ÇÊûú‰ºòÂÖàÁ∫ß‰∏ÄÊ†∑ÔºåÈÇ£Â∞±ÈÄâÊã©ÂÅèÁßªÈáèÊúÄÂ§ßÁöÑ</li>
<li>Ë¶ÅÊòØËøòÈÄâ‰∏çÂá∫Êù•ÔºåÈÇ£Â∞±ÈÄâÊã©runidÔºàÂêØÂä®Êó∂ÈöèÊú∫ÁîüÊàêÁöÑÔºâÊúÄÂ∞èÁöÑ„ÄÇ</li>
</ol>
<p>Ë¶ÅÊòØÂì®ÂÖµ‰πüÊåÇ‰∫ÜÂíãÂäûÔºüÊ≤°‰∫ãÔºåÂí±‰ª¨ÂèØ‰ª•Â§öÂÆâÊéíÂá†‰∏™Âì®ÂÖµÔºåÂè™ÈúÄË¶ÅÊääÂì®ÂÖµÁöÑÈÖçÁΩÆÂ§çÂà∂‰∏Ä‰∏ãÔºåÁÑ∂Âêé‰øÆÊîπÁ´ØÂè£ÔºåËøôÊ†∑Â∞±ÂèØ‰ª•ÂêåÊó∂ÂêØÂä®Â§ö‰∏™Âì®ÂÖµ‰∫ÜÔºåÊàë‰ª¨ÂêØÂä®3‰∏™Âì®ÂÖµÔºà‰∏Ä‰∏ª‰∫å‰ªé‰∏âÂì®ÂÖµÔºâÔºåËøôÈáåÊàë‰ª¨ÂêßÊúÄÂêé‰∏Ä‰∏™ÂÄºÊîπ‰∏∫<code>2</code>Ôºö</p>
<div class="highlight"><pre><span></span><code>sentinel monitor lbwnb 192.168.0.8 6001 2
</code></pre></div>
<p>Ëøô‰∏™ÂÄºÂÆûÈôÖ‰∏ä‰ª£Ë°®ÁöÑÊòØÂΩìÊúâÂá†‰∏™Âì®ÂÖµËÆ§‰∏∫‰∏ªËäÇÁÇπÊåÇÊéâÊó∂ÔºåÂ∞±Âà§Êñ≠‰∏ªËäÇÁÇπÁúüÁöÑÊåÇÊéâ‰∫Ü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18csiah4ej21e60b8794.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413201201051" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18csiah4ej21e60b8794.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨Êää6001ËäÇÁÇπÊåÇÊéâÔºåÁúãÁúãËøô‰∏â‰∏™Âì®ÂÖµ‰ºöÊÄé‰πàÊ†∑Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18df6teykj21h60fk7d0.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413203351360" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18df6teykj21h60fk7d0.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÈÉΩÊòæÁ§∫Â∞ÜmasterÂàáÊç¢‰∏∫6002ËäÇÁÇπ‰∫Ü„ÄÇ</p>
<p>ÈÇ£‰πàÔºåÂú®Âì®ÂÖµÈáçÊñ∞ÈÄâ‰∏æÊñ∞ÁöÑ‰∏ªËäÇÁÇπ‰πãÂêéÔºåÊàë‰ª¨Java‰∏≠ÁöÑRedisÁöÑÂÆ¢Êà∑Á´ØÊÄé‰πàÊÑüÁü•Âà∞Âë¢ÔºüÊàë‰ª¨Êù•ÁúãÁúãÔºåÈ¶ñÂÖàËøòÊòØÂØºÂÖ•‰æùËµñÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependencies&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>redis.clients<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>jedis<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;version&gt;</span>4.2.1<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//ËøôÈáåÊàë‰ª¨Áõ¥Êé•‰ΩøÁî®JedisSentinelPoolÊù•Ëé∑ÂèñMasterËäÇÁÇπ</span>
<span class="w">        </span><span class="c1">//ÈúÄË¶ÅÊää‰∏â‰∏™Âì®ÂÖµÁöÑÂú∞ÂùÄÈÉΩÂ°´ÂÖ•</span>
<span class="w">        </span><span class="k">try</span><span class="w"> </span><span class="p">(</span><span class="n">JedisSentinelPool</span><span class="w"> </span><span class="n">pool</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JedisSentinelPool</span><span class="p">(</span><span class="s">&quot;lbwnb&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="k">new</span><span class="w"> </span><span class="n">HashSet</span><span class="o">&lt;&gt;</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;192.168.0.8:26741&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;192.168.0.8:26740&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;192.168.0.8:26739&quot;</span><span class="p">))))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">getResource</span><span class="p">();</span><span class="w">   </span><span class="c1">//Áõ¥Êé•ËØ¢ÈóÆÂπ∂ÂæóÂà∞JedisÂØπË±°ÔºåËøôÂ∞±ÊòØËøûÊé•ÁöÑMasterËäÇÁÇπ</span>
<span class="w">            </span><span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;114514&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//Áõ¥Êé•ÂÜôÂÖ•Âç≥ÂèØÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØÂêëMasterËäÇÁÇπÂÜôÂÖ•</span>

<span class="w">            </span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">pool</span><span class="p">.</span><span class="na">getResource</span><span class="p">();</span><span class="w">   </span><span class="c1">//ÂÜçÊ¨°Ëé∑Âèñ</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">jedis2</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;test&quot;</span><span class="p">));</span><span class="w">   </span><span class="c1">//ËØªÂèñÊìç‰Ωú</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="n">Exception</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">e</span><span class="p">.</span><span class="na">printStackTrace</span><span class="p">();</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ËøôÊ†∑ÔºåJedisÂØπË±°Â∞±ÂèØ‰ª•ÈÄöËøáÂì®ÂÖµÊù•Ëé∑ÂèñÔºåÂΩìMasterËäÇÁÇπÊõ¥Êñ∞ÂêéÔºå‰πüËÉΩÂæóÂà∞ÊúÄÊñ∞ÁöÑ„ÄÇ</p>
<h3 id="_7">ÈõÜÁæ§Êê≠Âª∫<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<p>Â¶ÇÊûúÊàë‰ª¨ÊúçÂä°Âô®ÁöÑÂÜÖÂ≠ò‰∏çÂ§üÁî®‰∫ÜÔºå‰ΩÜÊòØÁé∞Âú®Êàë‰ª¨ÁöÑRedisÂèàÈúÄË¶ÅÁªßÁª≠Â≠òÂÇ®ÂÜÖÂÆπÔºåÈÇ£‰πàËøô‰∏™Êó∂ÂÄôÂ∞±ÂèØ‰ª•Âà©Áî®ÈõÜÁæ§Êù•ÂÆûÁé∞Êâ©ÂÆπ„ÄÇ</p>
<p>Âõ†‰∏∫ÂçïÊú∫ÁöÑÂÜÖÂ≠òÂÆπÈáèÊúÄÂ§ßÂ∞±ÈÇ£‰πàÂ§öÔºåÂ∑≤ÁªèÊ≤°ÂäûÊ≥ïÂÜçÁªßÁª≠Êâ©Â±ï‰∫ÜÔºå‰ΩÜÊòØÁé∞Âú®ÂèàÈúÄË¶ÅÂ≠òÂÇ®Êõ¥Â§öÁöÑÂÜÖÂÆπÔºåËøôÊó∂Êàë‰ª¨Â∞±ÂèØ‰ª•ËÆ©NÂè∞Êú∫Âô®‰∏äÁöÑRedisÊù•ÂàÜÂà´Â≠òÂÇ®ÂêÑ‰∏™ÈÉ®ÂàÜÁöÑÊï∞ÊçÆÔºàÊØè‰∏™RedisÂèØ‰ª•Â≠òÂÇ®1/NÁöÑÊï∞ÊçÆÈáèÔºâÔºåËøôÊ†∑Â∞±ÂÆûÁé∞‰∫ÜÂÆπÈáèÁöÑÊ®™ÂêëÊâ©Â±ï„ÄÇÂêåÊó∂ÊØèÂè∞RedisËøòÂèØ‰ª•ÈÖç‰∏Ä‰∏™‰ªéËäÇÁÇπÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Êõ¥Â•ΩÂú∞‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄß„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18eoii8ttj21c60homz7.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413211725149" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18eoii8ttj21c60homz7.jpg" /></a></p>
<p>ÈÇ£‰πàÈóÆÈ¢òÊù•ÔºåÁé∞Âú®Áî®Êà∑Êù•‰∫Ü‰∏Ä‰∏™ÂÜôÂÖ•ÁöÑËØ∑Ê±ÇÔºåÊï∞ÊçÆËØ•ÂÜôÂà∞Âì™‰∏™ËäÇÁÇπ‰∏äÂë¢ÔºüÊàë‰ª¨Êù•Á†îÁ©∂‰∏Ä‰∏ãÈõÜÁæ§ÁöÑÊú∫Âà∂Ôºö</p>
<p>È¶ñÂÖàÔºå‰∏Ä‰∏™RedisÈõÜÁæ§ÂåÖÂê´16384‰∏™ÊèíÊßΩÔºåÈõÜÁæ§‰∏≠ÁöÑÊØè‰∏™Redis ÂÆû‰æãË¥üË¥£Áª¥Êä§‰∏ÄÈÉ®ÂàÜÊèíÊßΩ‰ª•ÂèäÊèíÊßΩÊâÄÊò†Â∞ÑÁöÑÈîÆÂÄºÊï∞ÊçÆÔºåÈÇ£‰πàËøô‰∏™ÊèíÊßΩÊòØ‰ªÄ‰πàÊÑèÊÄùÂë¢Ôºü</p>
<p>ÂÆûÈôÖ‰∏äÔºåÊèíÊßΩÂ∞±ÊòØÈîÆÁöÑHashËÆ°ÁÆóÂêéÁöÑ‰∏Ä‰∏™ÁªìÊûúÔºåÊ≥®ÊÑèËøôÈáåÂá∫Áé∞‰∫Ü<code>ËÆ°ÁÆóÊú∫ÁΩëÁªú</code>‰∏≠ÁöÑCRCÂæ™ÁéØÂÜó‰ΩôÊ†°È™åÔºåËøôÈáåÈááÁî®CRC16ÔºåËÉΩÂæóÂà∞16‰∏™bit‰ΩçÁöÑÊï∞ÊçÆÔºå‰πüÂ∞±ÊòØËØ¥ÁÆóÂá∫Êù•‰πãÂêéÁªìÊûúÊòØ0-65535‰πãÈó¥ÔºåÂÜçËøõË°åÂèñÊ®°ÔºåÂæóÂà∞ÊúÄÁªàÁªìÊûúÔºö</p>
<p><strong>Redis keyÁöÑË∑ØÁî±ËÆ°ÁÆóÂÖ¨ÂºèÔºöslot = CRC16ÔºàkeyÔºâ % 16384</strong></p>
<p>ÁªìÊûúÁöÑÂÄºÊòØÂ§öÂ∞ëÔºåÂ∞±Â∫îËØ•Â≠òÊîæÂà∞ÂØπÂ∫îÁª¥Êä§ÁöÑRedis‰∏ãÔºåÊØîÂ¶ÇRedisËäÇÁÇπ1Ë¥üË¥£0-25565ÁöÑÊèíÊßΩÔºåËÄåËøôÊó∂ÂÆ¢Êà∑Á´ØÊèíÂÖ•‰∫Ü‰∏Ä‰∏™Êñ∞ÁöÑÊï∞ÊçÆ<code>a=10</code>ÔºåaÂú®HashËÆ°ÁÆóÂêéÁªìÊûú‰∏∫666ÔºåÈÇ£‰πàaÂ∞±Â∫îËØ•Â≠òÊîæÂà∞1Âè∑RedisËäÇÁÇπ‰∏≠„ÄÇÁÆÄËÄåË®Ä‰πãÔºåÊú¨Ë¥®‰∏äÂ∞±ÊòØÈÄöËøáÂìàÂ∏åÁÆóÊ≥ïÂ∞ÜÊèíÂÖ•ÁöÑÊï∞ÊçÆÂàÜÊëäÂà∞ÂêÑ‰∏™ËäÇÁÇπÁöÑÔºåÊâÄ‰ª•ËØ¥ÂìàÂ∏åÁÆóÊ≥ïÁúüÁöÑÊòØÂ§ÑÂ§ÑÈÉΩÊúâÁî®Âïä„ÄÇ</p>
<p>ÈÇ£‰πàÁé∞Âú®Êàë‰ª¨Â∞±Êù•Êê≠Âª∫‰∏Ä‰∏™ÁÆÄÂçïÁöÑRedisÈõÜÁæ§ÔºåËøôÈáåÂàõÂª∫6‰∏™ÈÖçÁΩÆÔºåÊ≥®ÊÑèÂºÄÂêØÈõÜÁæ§Ê®°ÂºèÔºö</p>
<div class="highlight"><pre><span></span><code># Normal Redis instances can&#39;t be part of a Redis Cluster; only nodes that are
# started as cluster nodes can. In order to start a Redis instance as a
# cluster node enable the cluster support uncommenting the following:
#
cluster-enabled yes
</code></pre></div>
<p>Êé•ÁùÄËÆ∞ÂæóÊääÊâÄÊúâÁöÑÊåÅ‰πÖÂåñÊñá‰ª∂ÂÖ®ÈÉ®Âà†Èô§ÔºåÊâÄÊúâÁöÑËäÇÁÇπÂÜÖÂÆπÂøÖÈ°ªÊòØÁ©∫ÁöÑ„ÄÇ</p>
<p>ÁÑ∂ÂêéËæìÂÖ•<code>redis-cli.exe --cluster create --cluster-replicas 1 127.0.0.1:6001 127.0.0.1:6002 127.0.0.1:6003 127.0.0.1:7001 127.0.0.1:7002 127.0.0.1:7003</code>ÔºåËøôÈáåÁöÑ<code>--cluster-replicas 1</code>ÊåáÁöÑÊòØÊØè‰∏™ËäÇÁÇπÈÖç‰∏Ä‰∏™‰ªéËäÇÁÇπÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18fw9o0isj21hc0mw12l.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413215928157" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18fw9o0isj21hc0mw12l.jpg" /></a></p>
<p>ËæìÂÖ•‰πãÂêéÔºå‰ºö‰∏∫‰Ω†Â±ïÁ§∫ÂÆ¢Êà∑Á´ØÈªòËÆ§ÂàÜÈÖçÁöÑÊñπÊ°àÔºåÂπ∂‰∏î‰ºöËØ¢ÈóÆ‰Ω†ÂΩìÂâçÁöÑÊñπÊ°àÊòØÂê¶ÂêàÁêÜ„ÄÇÂèØ‰ª•ÁúãÂà∞6001/6002/6003ÈÉΩË¢´ÈÄâ‰∏∫‰∏ªËäÇÁÇπÔºåÂÖ∂‰ªñÁöÑ‰∏∫‰ªéËäÇÁÇπÔºåÊàë‰ª¨Áõ¥Êé•ËæìÂÖ•yesÂç≥ÂèØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18fp8r1m9j21h605sabp.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413215243309" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18fp8r1m9j21h605sabp.jpg" /></a></p>
<p>ÊúÄÂêéÂàÜÈÖçÊàêÂäüÔºåÂèØ‰ª•ÁúãÂà∞ÊèíÊßΩÁöÑÂàÜÈÖçÊÉÖÂÜµÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18fwsc8ecj21go0li467.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413215958201" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18fwsc8ecj21go0li467.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨Èöè‰æøËøûÊé•‰∏Ä‰∏™ËäÇÁÇπÔºåÂ∞ùËØïÊèíÂÖ•‰∏Ä‰∏™ÂÄºÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18g381vqlj2122030dgk.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413220609800" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18g381vqlj2122030dgk.jpg" /></a></p>
<p>Âú®ÊèíÂÖ•Êó∂ÔºåÂá∫Áé∞‰∫Ü‰∏Ä‰∏™ÈîôËØØÔºåÂÆûÈôÖ‰∏äËøôÂ∞±ÊòØÂõ†‰∏∫aËÆ°ÁÆóÂá∫Êù•ÁöÑÂìàÂ∏åÂÄºÔºàÊèíÊßΩÔºâÔºå‰∏çÂΩíÂΩìÂâçËäÇÁÇπÁÆ°ÔºåÊàë‰ª¨ÂæóÂéªÁÆ°Ëøô‰∏™ÊèíÊßΩÁöÑËäÇÁÇπÊâßË°åÔºåÈÄöËøá‰∏äÈù¢ÁöÑÂàÜÈÖçÊÉÖÂÜµÔºåÊàë‰ª¨ÂèØ‰ª•ÂæóÂà∞15495Â±û‰∫éËäÇÁÇπ6003ÁÆ°ÁêÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18g5ccyqpj20y205e3z8.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413220811536" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18g5ccyqpj20y205e3z8.jpg" /></a></p>
<p>Âú®6003ËäÇÁÇπÊèíÂÖ•ÊàêÂäüÔºåÂΩìÁÑ∂Êàë‰ª¨‰πüÂèØ‰ª•‰ΩøÁî®ÈõÜÁæ§ÊñπÂºèËøûÊé•ÔºåËøôÊ†∑Êàë‰ª¨Êó†ËÆ∫Âú®Âì™‰∏™ËäÇÁÇπÈÉΩÂèØ‰ª•ÊèíÂÖ•ÔºåÂè™ÈúÄË¶ÅÊ∑ªÂä†<code>-c</code>Ë°®Á§∫‰ª•ÈõÜÁæ§Ê®°ÂºèËÆøÈóÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18g6stccaj216y04uwfk.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413220935678" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18g6stccaj216y04uwfk.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂú®6001ËäÇÁÇπÊàêÂäüÂØπaÁöÑÂÄºËøõË°å‰∫ÜÊõ¥Êñ∞ÔºåÂè™‰∏çËøáËøòÊòØË¢´ÈáçÂÆöÂêëÂà∞‰∫Ü6003ËäÇÁÇπËøõË°åÊèíÂÖ•„ÄÇ</p>
<p>Êàë‰ª¨ÂèØ‰ª•ËæìÂÖ•<code>cluster nodes</code>ÂëΩ‰ª§Êù•Êü•ÁúãÂΩìÂâçÊâÄÊúâËäÇÁÇπÁöÑ‰ø°ÊÅØÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gir6s5mj21hk09mgs0.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413222104845" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gir6s5mj21hk09mgs0.jpg" /></a></p>
<p>ÈÇ£‰πàÁé∞Âú®Â¶ÇÊûúÊàë‰ª¨ËÆ©Êüê‰∏Ä‰∏™‰∏ªËäÇÁÇπÊåÇÊéâ‰ºöÊÄé‰πàÊ†∑ÔºüÁé∞Âú®Êàë‰ª¨Êää6001ÊåÇÊéâÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gurtemjj21h808wwkx.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413223237962" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gurtemjj21h808wwkx.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÂéüÊú¨ÁöÑ6001‰ªéËäÇÁÇπ7001ÔºåÊôãÂçá‰∏∫‰∫ÜÊñ∞ÁöÑ‰∏ªËäÇÁÇπÔºåËÄå‰πãÂâçÁöÑ6001Â∑≤ÁªèÊåÇ‰∫ÜÔºåÁé∞Âú®Êàë‰ª¨Â∞Ü6001ÈáçÂêØËØïËØïÁúãÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gvstwbkj21hk04e76h.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413223337494" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gvstwbkj21hk04e76h.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞6001ÂèòÊàê‰∫Ü7001ÁöÑ‰ªéËäÇÁÇπÔºåÈÇ£‰πàË¶ÅÊòØ6001Âíå7001ÈÉΩÊåÇ‰∫ÜÂë¢Ôºü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gzd1jxzj21ha0460v0.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413223702884" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gzd1jxzj21ha0460v0.jpg" /></a></p>
<p>ËøôÊó∂Êàë‰ª¨Â∞ùËØïÊèíÂÖ•Êñ∞ÁöÑÊï∞ÊçÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gzqibkqj20va03a74o.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413223724440" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18gzqibkqj20va03a74o.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìÂ≠òÂú®ËäÇÁÇπ‰∏çÂèØÁî®Êó∂Ôºå‰ºöÊó†Ê≥ïÊèíÂÖ•Êñ∞ÁöÑÊï∞ÊçÆÔºåÁé∞Âú®Êàë‰ª¨Â∞Ü6001Âíå7001ÊÅ¢Â§çÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h18h0l5pcnj21gs07a77z.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220413223813370" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h18h0l5pcnj21gs07a77z.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÊÅ¢Â§ç‰πãÂêéÂèàÂèØ‰ª•ÁªßÁª≠Ê≠£Â∏∏‰ΩøÁî®‰∫Ü„ÄÇ</p>
<p>ÊúÄÂêéÊàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÂ¶Ç‰Ωï‰ΩøÁî®JavaËøûÊé•Âà∞ÈõÜÁæ§Ê®°Âºè‰∏ãÁöÑRedisÔºåÊàë‰ª¨ÈúÄË¶ÅÁî®Âà∞JedisClusterÂØπË±°Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Main</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">//ÂíåÂÆ¢Êà∑Á´Ø‰∏ÄÊ†∑ÔºåÈöè‰æøËøû‰∏Ä‰∏™Â∞±Ë°åÔºå‰πüÂèØ‰ª•Â§öÂÜôÂá†‰∏™ÔºåÊûÑÈÄ†ÊñπÊ≥ïÊúâÂæàÂ§öÁßçÂèØ‰ª•ÈÄâÊã©</span>
<span class="w">        </span><span class="k">try</span><span class="p">(</span><span class="n">JedisCluster</span><span class="w"> </span><span class="n">cluster</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">JedisCluster</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">HostAndPort</span><span class="p">(</span><span class="s">&quot;192.168.0.8&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6003</span><span class="p">))){</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;ÈõÜÁæ§ÂÆû‰æãÊï∞ÈáèÔºö&quot;</span><span class="o">+</span><span class="n">cluster</span><span class="p">.</span><span class="na">getClusterNodes</span><span class="p">().</span><span class="na">size</span><span class="p">());</span>
<span class="w">            </span><span class="n">cluster</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;yyds&quot;</span><span class="p">);</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">cluster</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Êìç‰ΩúÂü∫Êú¨ÂíåJedisÂØπË±°‰∏ÄÊ†∑ÔºåËøôÈáåÂ∞±‰∏çÂ§öÂÅöËµòËø∞‰∫Ü„ÄÇ</p>
<h3 id="_8">ÂàÜÂ∏ÉÂºèÈîÅ<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<p>Âú®Êàë‰ª¨ÁöÑ‰º†ÁªüÂçï‰ΩìÂ∫îÁî®‰∏≠ÔºåÁªèÂ∏∏‰ºöÁî®Âà∞ÈîÅÊú∫Âà∂ÔºåÁõÆÁöÑÊòØ‰∏∫‰∫ÜÈò≤Ê≠¢Â§öÁ∫øÁ®ãÁ´û‰∫âÂØºËá¥ÁöÑÂπ∂ÂèëÈóÆÈ¢òÔºå‰ΩÜÊòØÁé∞Âú®Êàë‰ª¨Âú®ÂàÜÂ∏ÉÂºèÁéØÂ¢É‰∏ãÔºåÂèàËØ•Â¶Ç‰ΩïÂÆûÁé∞ÈîÅÊú∫Âà∂Âë¢ÔºüÂèØËÉΩ‰∏ÄÊù°ÈìæË∑Ø‰∏äÊúâÂæàÂ§öÁöÑÂ∫îÁî®ÔºåÂÆÉ‰ª¨ÈÉΩÊòØÁã¨Á´ãËøêË°åÁöÑÔºåËøôÊó∂Êàë‰ª¨Â∞±ÂèØ‰ª•ÂÄüÂä©RedisÊù•ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅ„ÄÇ</p>
<p>ËøòËÆ∞ÂæóÊàë‰ª¨‰∏ä‰∏ÄÁ´†ÊúÄÂêéÊèêÂá∫ÁöÑÈóÆÈ¢òÂêóÔºü</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">boolean</span><span class="w"> </span><span class="nf">doBorrow</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">uid</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bid</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//1. Âà§Êñ≠Âõæ‰π¶ÂíåÁî®Êà∑ÊòØÂê¶ÈÉΩÊîØÊåÅÂÄüÈòÖÔºåÂ¶ÇÊûúÊ≠§Êó∂Êù•‰∫Ü10‰∏™Á∫øÁ®ãÔºåÈÉΩËøõÊù•‰∫ÜÔºåÈÇ£‰πàÈÉΩËÉΩÂ§üÂà§Êñ≠‰∏∫ÂèØ‰ª•ÂÄüÈòÖ</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">bookClient</span><span class="p">.</span><span class="na">bookRemain</span><span class="p">(</span><span class="n">bid</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Âõæ‰π¶Êï∞Èáè‰∏çË∂≥&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">userClient</span><span class="p">.</span><span class="na">userRemain</span><span class="p">(</span><span class="n">uid</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Áî®Êà∑ÂÄüÈòÖÈáè‰∏çË∂≥&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">//2. È¶ñÂÖàÂ∞ÜÂõæ‰π¶ÁöÑÊï∞Èáè-1ÔºåÁî±‰∫é‰∏äÈù¢10‰∏™Á∫øÁ®ãÂêåÊó∂ËøõÊù•ÔºåÂêåÊó∂Âà§Êñ≠ÂèØ‰ª•ÂÄüÈòÖÔºåÈÇ£‰πàËøô‰∏™10‰∏™Á∫øÁ®ãÂ∞±ÂêåÊó∂Â∞ÜÂõæ‰π¶Êï∞Èáè-1ÔºåÈÇ£Â∫ìÂ≠òÂ≤Ç‰∏çÊòØÁõ¥Êé•ÂèòÊàêË¥üÊï∞‰∫ÜÔºüÔºüÔºü</span>
<span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">bookClient</span><span class="p">.</span><span class="na">bookBorrow</span><span class="p">(</span><span class="n">bid</span><span class="p">))</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">RuntimeException</span><span class="p">(</span><span class="s">&quot;Âú®ÂÄüÈòÖÂõæ‰π¶Êó∂Âá∫Áé∞ÈîôËØØÔºÅ&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÆûÈôÖ‰∏äÂú®È´òÂπ∂Âèë‰∏ãÔºåÊàë‰ª¨Áúã‰ººÊ≠£Â∏∏ÁöÑÂÄüÈòÖÊµÅÁ®ãÔºå‰ºöÂá∫Áé∞ÈóÆÈ¢òÔºåÊØîÂ¶ÇÁé∞Âú®ÂêåÊó∂Êù•‰∫Ü10‰∏™ÂêåÂ≠¶Ë¶ÅÂÄüÂêå‰∏ÄÊú¨‰π¶Ôºå‰ΩÜÊòØÁé∞Âú®Âè™Êúâ3Êú¨ÔºåËÄåÊàë‰ª¨ÁöÑÂà§Êñ≠ËßÑÂàôÊòØÔºåÈ¶ñÂÖàÁúã‰π¶Â§ü‰∏çÂ§üÔºåÂ¶ÇÊûúÊ≠§Êó∂Ëøô10‰∏™ËØ∑Ê±ÇÈÉΩÂ∑≤ÁªèËµ∞Âà∞ËøôÈáåÔºåÂπ∂‰∏îÈÉΩÂà§ÂÆö‰∏∫ÂèØ‰ª•ËøõË°åÂÄüÈòÖÔºåÈÇ£‰πàÈóÆÈ¢òÂ∞±Âá∫Áé∞‰∫ÜÔºåÊé•‰∏ãÊù•Ëøô10‰∏™ËØ∑Ê±ÇÈÉΩÂºÄÂßãËøõË°åÂÄüÈòÖÊìç‰ΩúÔºåÂØºËá¥Â∫ìÂ≠òÁõ¥Êé•ÁàÜË°®ÔºåÂΩ¢ÊàêË∂ÖÂÄüÈóÆÈ¢òÔºàÂú®ÁîµÂïÜÁ≥ªÁªü‰∏≠‰πüÂ≠òÂú®ÂêåÊ†∑ÁöÑË∂ÖÂçñÈóÆÈ¢òÔºâ</p>
<p>Âõ†Ê≠§Ôºå‰∏∫‰∫ÜËß£ÂÜ≥ËøôÁßçÈóÆÈ¢òÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Âà©Áî®ÂàÜÂ∏ÉÂºèÈîÅÊù•ÂÆûÁé∞„ÄÇÈÇ£‰πàRedisÂ¶Ç‰ΩïÂéªÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅÂë¢Ôºü</p>
<p>Âú®RedisÂ≠òÂú®ËøôÊ†∑‰∏Ä‰∏™ÂëΩ‰ª§Ôºö</p>
<div class="highlight"><pre><span></span><code>setnx key value
</code></pre></div>
<p>Ëøô‰∏™ÂëΩ‰ª§ÁúãËµ∑Êù•Âíå<code>set</code>ÂëΩ‰ª§Â∑Æ‰∏çÂ§öÔºå‰ΩÜÊòØÂÆÉÊúâ‰∏Ä‰∏™Êú∫Âà∂ÔºåÂ∞±ÊòØÂè™ÊúâÂΩìÊåáÂÆöÁöÑkey‰∏çÂ≠òÂú®ÁöÑÊó∂ÂÄôÔºåÊâçËÉΩËøõË°åÊèíÂÖ•ÔºåÂÆûÈôÖ‰∏äÂ∞±ÊòØ<code>set if not exists</code>ÁöÑÁº©ÂÜô„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h192d1jdakj214q07uab5.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414105646460" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h192d1jdakj214q07uab5.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìÂÆ¢Êà∑Á´Ø1ËÆæÂÆöa‰πãÂêéÔºåÂÆ¢Êà∑Á´Ø2‰ΩøÁî®<code>setnx</code>‰ºöÁõ¥Êé•Â§±Ë¥•„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h192f9yztfj211g08i75i.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414105854959" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h192f9yztfj211g08i75i.jpg" /></a></p>
<p>ÂΩìÂÆ¢Êà∑Á´Ø1Â∞ÜaÂà†Èô§‰πãÂêéÔºåÂÆ¢Êà∑Á´Ø2Â∞±ÂèØ‰ª•‰ΩøÁî®<code>setnx</code>ÊàêÂäüÊèíÂÖ•‰∫Ü„ÄÇ</p>
<p>Âà©Áî®ËøôÁßçÁâπÊÄßÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Âú®‰∏çÂêåÁöÑÊúçÂä°‰∏≠ÂÆûÁé∞ÂàÜÂ∏ÉÂºèÈîÅÔºåÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåË¶ÅÊòØÊüê‰∏™ÊúçÂä°Âä†‰∫ÜÈîÅ‰ΩÜÊòØÂç°È°ø‰∫ÜÂë¢ÔºåÊàñÊòØÁõ¥Êé•Â¥©Ê∫É‰∫ÜÔºåÈÇ£ËøôÊääÈîÅÂ≤Ç‰∏çÊòØÊ∞∏ËøúÊó†Ê≥ïÈáäÊîæ‰∫ÜÔºüÂõ†Ê≠§Êàë‰ª¨ËøòÂèØ‰ª•ËÄÉËôëÂä†‰∏™ËøáÊúüÊó∂Èó¥Ôºö</p>
<div class="highlight"><pre><span></span><code>set a 666 EX 5 NX
</code></pre></div>
<p>ËøôÈáå‰ΩøÁî®<code>set</code>ÂëΩ‰ª§ÔºåÊúÄÂêéÂä†‰∏Ä‰∏™NXË°®Á§∫ÊòØ‰ΩøÁî®<code>setnx</code>ÁöÑÊ®°ÂºèÔºåÂíå‰∏äÈù¢ÊòØ‰∏ÄÊ†∑ÁöÑÔºå‰ΩÜÊòØÂèØ‰ª•ÈÄöËøáEXËÆæÂÆöËøáÊúüÊó∂Èó¥ÔºåËøôÈáåËÆæÁΩÆ‰∏∫5ÁßíÔºå‰πüÂ∞±ÊòØËØ¥Â¶ÇÊûú5ÁßíËøòÊ≤°ÈáäÊîæÔºåÈÇ£‰πàÂ∞±Ëá™Âä®Âà†Èô§„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h192qy0x9pj213w09ymyq.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414111008456" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h192qy0x9pj213w09ymyq.jpg" /></a></p>
<p>ÂΩìÁÑ∂ÔºåÊ∑ªÂä†‰∫ÜËøáÊúüÊó∂Èó¥ÔºåÂ∏¶‰∫ÜÁöÑÂ•ΩÂ§ÑÊòØÊòæËÄåÊòìËßÅÁöÑÔºå‰ΩÜÊòØÂêåÊó∂‰πüÂ∏¶Êù•‰∫ÜÂæàÂ§öÁöÑÈ∫ªÁÉ¶ÔºåÊàë‰ª¨Êù•ËÆæÊÉ≥‰∏Ä‰∏ãËøôÁßçÊÉÖÂÜµÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1935d9f0jj21im0cydi8.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414112359738" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1935d9f0jj21im0cydi8.jpg" /></a></p>
<p>Âõ†Ê≠§ÔºåÂçïÁ∫ØÂè™ÊòØÊ∑ªÂä†ËøáÊúüÊó∂Èó¥Ôºå‰ºöÂá∫Áé∞ËøôÁßçÊääÂà´‰∫∫Âä†ÁöÑÈîÅË∞ÅÂç∏‰∫ÜÁöÑÊÉÖÂÜµÔºåË¶ÅËß£ÂÜ≥ËøôÁßçÈóÆÈ¢ò‰πüÂæàÁÆÄÂçïÔºåÊàë‰ª¨Áé∞Âú®ÁöÑÁõÆÊ†áÂ∞±ÊòØ‰øùËØÅ‰ªªÂä°Âè™ËÉΩÂà†Èô§Ëá™Â∑±Âä†ÁöÑÈîÅÔºåÂ¶ÇÊûúÊòØÂà´‰∫∫Âä†ÁöÑÈîÅÊòØÊ≤°ÊúâËµÑÊ†ºÂà†ÁöÑÔºåÊâÄ‰ª•Êàë‰ª¨ÂèØ‰ª•ÂêßaÁöÑÂÄºÊåáÂÆö‰∏∫Êàë‰ª¨‰ªªÂä°‰∏ìÂ±ûÁöÑÂÄºÔºåÊØîÂ¶ÇÂèØ‰ª•‰ΩøÁî®UUID‰πãÁ±ªÁöÑÔºåÂ¶ÇÊûúÂú®‰∏ªÂä®Âà†Èô§ÈîÅÁöÑÊó∂ÂÄôÂèëÁé∞ÂÄº‰∏çÊòØÊàë‰ª¨ÂΩìÂâç‰ªªÂä°ÊåáÂÆöÁöÑÔºåÈÇ£‰πàËØ¥ÊòéÂèØËÉΩÊòØÂõ†‰∏∫Ë∂ÖÊó∂ÔºåÂÖ∂‰ªñ‰ªªÂä°Â∑≤ÁªèÂä†ÈîÅ‰∫Ü„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h193cc7opzj21hy0da40t.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414113041835" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h193cc7opzj21hy0da40t.jpg" /></a></p>
<p>Â¶ÇÊûú‰Ω†Âú®Â≠¶‰π†Êú¨ÁØá‰πãÂâçÂÆåÊàê‰∫ÜJUCÂπ∂ÂèëÁºñÁ®ãÁØáÁöÑÂ≠¶‰π†ÔºåÈÇ£‰πà‰∏ÄÂÆö‰ºöÊúâ‰∏Ä‰∏™ÁñëÊÉëÔºåÂ¶ÇÊûúÂú®Ë∂ÖÊó∂‰πãÂâçÈÇ£‰∏ÄÂàπÈÇ£ËøõÂÖ•Âà∞ÈáäÊîæÈîÅÁöÑÈò∂ÊÆµÔºåËé∑ÂèñÂà∞ÂÄºËÇØÂÆöËøòÊòØËá™Â∑±Ôºå‰ΩÜÊòØÂú®Âç≥Â∞ÜÊâßË°åÂà†Èô§‰πãÂâçÔºåÁî±‰∫éË∂ÖÊó∂Êú∫Âà∂ÂØºËá¥Ë¢´Âà†Èô§Âπ∂‰∏îÂÖ∂‰ªñ‰ªªÂä°‰πüÂä†ÈîÅ‰∫ÜÔºåÈÇ£‰πàËøôÊó∂ÂÜçËøõË°åÂà†Èô§Ôºå‰ªçÁÑ∂‰ºöÂØºËá¥Âà†Èô§ÂÖ∂‰ªñ‰ªªÂä°Âä†ÁöÑÈîÅ„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h193j2b68fj21mw0d6mzv.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414113709773" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h193j2b68fj21mw0d6mzv.jpg" /></a></p>
<p>ÂÆûÈôÖ‰∏äÊú¨Ë¥®ËøòÊòØÂõ†‰∏∫ÈîÅÁöÑË∂ÖÊó∂Êó∂Èó¥‰∏çÂ§™Â•ΩË°°ÈáèÔºåÂ¶ÇÊûúË∂ÖÊó∂Êó∂Èó¥ËÉΩÂ§üËÆæÂÆöÂú∞ÊØîËæÉÊÅ∞ÂΩìÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÈÅøÂÖçËøôÁßçÈóÆÈ¢ò‰∫Ü„ÄÇ</p>
<p>Ë¶ÅËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÊàë‰ª¨ÂèØ‰ª•ÂÄüÂä©‰∏Ä‰∏ãRedissonÊ°ÜÊû∂ÔºåÂÆÉÊòØRedisÂÆòÊñπÊé®ËçêÁöÑJavaÁâàÁöÑRedisÂÆ¢Êà∑Á´Ø„ÄÇÂÆÉÊèê‰æõÁöÑÂäüËÉΩÈùûÂ∏∏Â§öÔºå‰πüÈùûÂ∏∏Âº∫Â§ßÔºåRedissonÂÜÖÈÉ®Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÁõëÊéßÈîÅÁöÑÁúãÈó®ÁãóÔºåÂÆÉÁöÑ‰ΩúÁî®ÊòØÂú®RedissonÂÆû‰æãË¢´ÂÖ≥Èó≠ÂâçÔºå‰∏çÊñ≠ÁöÑÂª∂ÈïøÈîÅÁöÑÊúâÊïàÊúüÔºåÂÆÉ‰∏∫Êàë‰ª¨Êèê‰æõ‰∫ÜÂæàÂ§öÁßçÂàÜÂ∏ÉÂºèÈîÅÁöÑÂÆûÁé∞Ôºå‰ΩøÁî®Ëµ∑Êù•‰πüÁ±ª‰ººÊàë‰ª¨Âú®JUC‰∏≠Â≠¶‰π†ÁöÑÈîÅÔºåËøôÈáåÊàë‰ª¨Â∞ùËØï‰ΩøÁî®‰∏Ä‰∏ãÂÆÉÁöÑÂàÜÂ∏ÉÂºèÈîÅÂäüËÉΩ„ÄÇ</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>org.redisson<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>redisson<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>3.17.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;groupId&gt;</span>io.netty<span class="nt">&lt;/groupId&gt;</span>
<span class="w">    </span><span class="nt">&lt;artifactId&gt;</span>netty-all<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">    </span><span class="nt">&lt;version&gt;</span>4.1.75.Final<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
<p>È¶ñÂÖàÊàë‰ª¨Êù•ÁúãÁúã‰∏çÂä†ÈîÅÁöÑÊÉÖÂÜµ‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">try</span><span class="p">(</span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;192.168.0.10&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6379</span><span class="p">)){</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">//ÊØè‰∏™ÂÆ¢Êà∑Á´ØËé∑ÂèñaÁÑ∂ÂêéÂ¢ûÂä†aÁöÑÂÄºÂÜçÂÜôÂõûÂéªÔºåÂ¶ÇÊûú‰∏çÂä†ÈîÅÈÇ£‰πàËÇØÂÆö‰ºöÂá∫ÈóÆÈ¢ò</span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                    </span><span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}).</span><span class="na">start</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ËøôÈáåÊ≤°ÊúâÁõ¥Êé•Áî®<code>incr</code>ËÄåÊòØÊàë‰ª¨Ëá™Â∑±ËøõË°åËÆ°ÁÆóÔºåÊñπ‰æøÊ®°ÊãüÔºåÂèØ‰ª•ÁúãÂà∞ËøêË°åÁªìÊùü‰πãÂêéaÁöÑÂÄºÂπ∂‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h196vkaykrj21ce022dft.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414133258227" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h196vkaykrj21ce022dft.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨Êù•ÁªôÂÆÉÂä†‰∏ÄÊääÈîÅÔºåÊ≥®ÊÑèËøô‰∏™ÈîÅÊòØÂü∫‰∫éRedisÁöÑÔºå‰∏ç‰ªÖ‰ªÖÂè™ÂèØ‰ª•Áî®‰∫éÂΩìÂâçÂ∫îÁî®ÔºåÊòØËÉΩÂ§üÂûÆÁ≥ªÁªüÁöÑÔºö</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">Config</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Config</span><span class="p">();</span>
<span class="w">    </span><span class="n">config</span><span class="p">.</span><span class="na">useSingleServer</span><span class="p">().</span><span class="na">setAddress</span><span class="p">(</span><span class="s">&quot;redis://192.168.0.10:6379&quot;</span><span class="p">);</span><span class="w">   </span><span class="c1">//ÈÖçÁΩÆËøûÊé•ÁöÑRedisÊúçÂä°Âô®Ôºå‰πüÂèØ‰ª•ÊåáÂÆöÈõÜÁæ§</span>
<span class="w">    </span><span class="n">RedissonClient</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="n">Redisson</span><span class="p">.</span><span class="na">create</span><span class="p">(</span><span class="n">config</span><span class="p">);</span><span class="w">   </span><span class="c1">//ÂàõÂª∫RedissonClientÂÆ¢Êà∑Á´Ø</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">new</span><span class="w"> </span><span class="n">Thread</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">try</span><span class="p">(</span><span class="n">Jedis</span><span class="w"> </span><span class="n">jedis</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Jedis</span><span class="p">(</span><span class="s">&quot;192.168.0.10&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">6379</span><span class="p">)){</span>
<span class="w">                </span><span class="n">RLock</span><span class="w"> </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">getLock</span><span class="p">(</span><span class="s">&quot;testLock&quot;</span><span class="p">);</span><span class="w">    </span><span class="c1">//ÊåáÂÆöÈîÅÁöÑÂêçÁß∞ÔºåÊãøÂà∞ÈîÅÂØπË±°</span>
<span class="w">                </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                    </span><span class="n">lock</span><span class="p">.</span><span class="na">lock</span><span class="p">();</span><span class="w">    </span><span class="c1">//Âä†ÈîÅ</span>
<span class="w">                    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Integer</span><span class="p">.</span><span class="na">parseInt</span><span class="p">(</span><span class="n">jedis</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                    </span><span class="n">jedis</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="w">                    </span><span class="n">lock</span><span class="p">.</span><span class="na">unlock</span><span class="p">();</span><span class="w">   </span><span class="c1">//Ëß£ÈîÅ</span>
<span class="w">                </span><span class="p">}</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;ÁªìÊùüÔºÅ&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}).</span><span class="na">start</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞ÁªìÊûúÊ≤°ÊúâÈóÆÈ¢òÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h196wp13naj215202caa3.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414133403403" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h196wp13naj215202caa3.jpg" /></a></p>
<p>Ê≥®ÊÑèÔºåÂ¶ÇÊûúÁî®‰∫éÂ≠òÊîæÈîÅÁöÑRedisÊúçÂä°Âô®ÊåÇ‰∫ÜÔºåÈÇ£‰πàËÇØÂÆöÊòØ‰ºöÂá∫ÈóÆÈ¢òÁöÑÔºåËøô‰∏™Êó∂ÂÄôÊàë‰ª¨Â∞±ÂèØ‰ª•‰ΩøÁî®RedLockÔºåÂÆÉÁöÑÊÄùË∑ØÊòØÔºåÂú®Â§ö‰∏™RedisÊúçÂä°Âô®‰∏ä‰øùÂ≠òÈîÅÔºåÂè™ÈúÄË¶ÅË∂ÖËøáÂçäÊï∞ÁöÑRedisÊúçÂä°Âô®Ëé∑ÂèñÂà∞ÈîÅÔºåÈÇ£‰πàÂ∞±ÁúüÁöÑËé∑ÂèñÂà∞ÈîÅ‰∫ÜÔºåËøôÊ†∑Â∞±ÁÆóÊåÇÊéâ‰∏ÄÈÉ®ÂàÜËäÇÁÇπÔºå‰πüËÉΩ‰øùËØÅÊ≠£Â∏∏ËøêË°åÔºåËøôÈáåÂ∞±‰∏çÂÅöÊºîÁ§∫‰∫Ü„ÄÇ</p>
<hr />
<h2 id="mysql">MySQL‰∏éÂàÜÂ∏ÉÂºè<a class="headerlink" href="#mysql" title="Permanent link">&para;</a></h2>
<p>ÂâçÈù¢ÊàëËÆ≤Ëß£‰∫ÜRedisÂú®ÂàÜÂ∏ÉÂºèÂú∫ÊôØÁöÑ‰∏ãÁöÑÁõ∏ÂÖ≥Â∫îÁî®ÔºåÊé•ÁùÄÊàë‰ª¨Êù•ÁúãÁúãMySQLÊï∞ÊçÆÂ∫ìÂú®ÂàÜÂ∏ÉÂºèÂú∫ÊôØ‰∏ãÁöÑÂ∫îÁî®„ÄÇ</p>
<h3 id="_9">‰∏ª‰ªéÂ§çÂà∂<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<p>ÂΩìÊàë‰ª¨‰ΩøÁî®MySQLÁöÑÊó∂ÂÄôÔºå‰πüÂèØ‰ª•ÈááÂèñ‰∏ª‰ªéÂ§çÂà∂ÁöÑÁ≠ñÁï•ÔºåÂÆÉÁöÑÂÆûÁé∞ÊÄùË∑ØÂü∫Êú¨ÂíåRedisÁõ∏‰ººÔºå‰πüÊòØÈááÁî®Â¢ûÈáèÂ§çÂà∂ÁöÑÊñπÂºèÔºåMySQL‰ºöÂú®ËøêË°åÁöÑËøáÁ®ã‰∏≠Ôºå‰ºöËÆ∞ÂΩï‰∫åËøõÂà∂Êó•ÂøóÔºåÊâÄÊúâÁöÑDMLÂíåDDLÊìç‰ΩúÈÉΩ‰ºöË¢´ËÆ∞ÂΩïËøõÊó•Âøó‰∏≠Ôºå‰∏ªÂ∫ìÂè™ÈúÄË¶ÅÂ∞ÜËÆ∞ÂΩïÁöÑÊìç‰ΩúÂ§çÂà∂Áªô‰ªéÂ∫ìÔºåËÆ©‰ªéÂ∫ì‰πüËøêË°å‰∏ÄÊ¨°ÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•ÂÆûÁé∞‰∏ª‰ªéÂ§çÂà∂„ÄÇ‰ΩÜÊòØÊ≥®ÊÑèÂÆÉ‰∏ç‰ºöÂú®‰∏ÄÂºÄÂßãËøõË°åÂÖ®ÈáèÂ§çÂà∂ÔºåÊâÄ‰ª•ÊúÄÂ•ΩÂÜçÂºÄÂßã‰∏ª‰ªé‰πãÂâçÂ∞ÜÊï∞ÊçÆÂ∫ìÁöÑÂÜÖÂÆπ‰øùÊåÅ‰∏ÄËá¥„ÄÇ</p>
<p>Âíå‰πãÂâç‰∏ÄÊ†∑Ôºå‰∏ÄÊó¶Êàë‰ª¨ÂÆûÁé∞‰∫Ü‰∏ª‰ªéÂ§çÂà∂ÔºåÈÇ£‰πàÂ∞±ÁÆó‰∏ªÂ∫ìÂá∫Áé∞ÊïÖÈöúÔºå‰ªéÂ∫ì‰πüËÉΩÊ≠£Â∏∏Êèê‰æõÊúçÂä°ÔºåÂπ∂‰∏îËøòÂèØ‰ª•ÂÆûÁé∞ËØªÂÜôÂàÜÁ¶ªÁ≠âÊìç‰Ωú„ÄÇËøôÈáåÊàë‰ª¨Â∞±‰ΩøÁî®‰∏§Âè∞‰∏ªÊú∫Êù•Êê≠Âª∫‰∏Ä‰∏ª‰∏Ä‰ªéÁöÑÁéØÂ¢ÉÔºåÈ¶ñÂÖàÁ°Æ‰øù‰∏§Âè∞ÊúçÂä°Âô®ÈÉΩÂÆâË£Ö‰∫ÜMySQLÊï∞ÊçÆÂ∫ìÂπ∂‰∏îÈÉΩÂ∑≤ÁªèÊ≠£Â∏∏ËøêË°å‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19bsu4pv1j21zq0dyn3r.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414162319865" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19bsu4pv1j21zq0dyn3r.jpg" /></a></p>
<p>Êé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÂàõÂª∫ÂØπÂ∫îÁöÑË¥¶Âè∑Ôºå‰∏Ä‰ºöÊñπ‰æø‰ªéÂ∫ìËøõË°åËÆøÈóÆÁöÑÁî®Êà∑Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">USER</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">mysql_native_password</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;123456&#39;</span><span class="p">;</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨ÂºÄÂêØ‰∏Ä‰∏ãÂ§ñÁΩëËÆøÈóÆÔºö</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>vim<span class="w"> </span>/etc/mysql/mysql.conf.d/mysqld.cnf
</code></pre></div>
<p>‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="c1"># If MySQL is running as a replication slave, this should be</span>
<span class="c1"># changed. Ref https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_tmpdir</span>
<span class="c1"># tmpdir                = /tmp</span>
<span class="c1">#</span>
<span class="c1"># Instead of skip-networking the default is now to listen only on</span>
<span class="c1"># localhost which is more compatible and is not less secure.</span>
<span class="c1"># bind-address          = 127.0.0.1    ËøôÈáåÊ≥®ÈáäÊéâÂ∞±Ë°å</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨ÈáçÂêØ‰∏Ä‰∏ãMySQLÊúçÂä°Ôºö</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>mysql.service<span class="w"> </span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨È¶ñÂÖàÊù•ÈÖçÁΩÆ‰∏ªÂ∫ìÔºå‰∏ªÂ∫ìÂè™ÈúÄË¶Å‰∏∫Êàë‰ª¨ÂàöÂàöÂàõÂª∫Â•ΩÁöÑÁî®Êà∑ÂàÜÈÖç‰∏Ä‰∏™‰∏ª‰ªéÂ§çÂà∂ÁöÑÊùÉÈôêÂç≥ÂèØÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">grant</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="n">slave</span><span class="w"> </span><span class="k">on</span><span class="w"> </span><span class="o">*</span><span class="p">.</span><span class="o">*</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">test</span><span class="p">;</span>
<span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÊàë‰ª¨ÂèØ‰ª•ËæìÂÖ•ÂëΩ‰ª§Êù•Êü•Áúã‰∏ªÂ∫ìÁöÑÁõ∏ÂÖ≥ÊÉÖÂÜµÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19ckapbrsj218206s3zi.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414164943974" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19ckapbrsj218206s3zi.jpg" /></a></p>
<p>ËøôÊ†∑‰∏ªÂ∫ìÂ∞±Êê≠Âª∫ÂÆåÊàê‰∫ÜÔºåÊé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÂ∞Ü‰ªéÂ∫ìËøõË°åÈÖçÁΩÆÔºåÈ¶ñÂÖàÊòØÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="c1"># The following can be used as easy to replay backup logs or for replication.</span>
<span class="c1"># note: if you are setting up a replication slave, see README.Debian about</span>
<span class="c1">#       other settings you may need to change.</span>
<span class="c1"># ËøôÈáåÈúÄË¶ÅÂ∞Üserver-idÈÖçÁΩÆ‰∏∫ÂÖ∂‰ªñÁöÑÂÄºÔºàÈªòËÆ§ÊòØ1ÔºâÊâÄÊúâMysql‰∏ª‰ªéÂÆû‰æãÁöÑidÂøÖÈ°ªÂîØ‰∏ÄÔºå‰∏çËÉΩÊâìÊû∂Ôºå‰∏çÁÑ∂‰∏Ä‰ºöÂºÄÂêØ‰ºöÂ§±Ë¥•</span>
<span class="na">server-id</span><span class="w">               </span><span class="o">=</span><span class="w"> </span><span class="s">2</span>
</code></pre></div>
<p>ËøõÂÖ•Êï∞ÊçÆÂ∫ìÔºåËæìÂÖ•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="n">change</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="k">source</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">SOURCE_HOST</span><span class="o">=</span><span class="s1">&#39;192.168.0.8&#39;</span><span class="p">,</span><span class="n">SOURCE_USER</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="n">SOURCE_PASSWORD</span><span class="o">=</span><span class="s1">&#39;123456&#39;</span><span class="p">,</span><span class="n">SOURCE_LOG_FILE</span><span class="o">=</span><span class="s1">&#39;binlog.000004&#39;</span><span class="p">,</span><span class="n">SOURCE_LOG_POS</span><span class="o">=</span><span class="mi">591</span><span class="p">;</span>
</code></pre></div>
<p>Ê≥®ÊÑèÂêéÈù¢ÁöÑlogfileÂíåposÂ∞±ÊòØÊàë‰ª¨‰∏äÈù¢‰ªé‰∏ªÂ∫ì‰∏≠ÊòæÁ§∫ÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19cvd6eypj218m032my0.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414170022303" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19cvd6eypj218m032my0.jpg" /></a></p>
<p>ÊâßË°åÂÆåÊàêÂêéÔºåÊòæÁ§∫OKË°®Á§∫Ê≤°ÊúâÈóÆÈ¢òÔºåÊé•ÁùÄËæìÂÖ•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">start</span><span class="w"> </span><span class="n">replica</span><span class="p">;</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨ÁöÑ‰ªéÊú∫Â∞±Ê≠£ÂºèÂêØÂä®‰∫ÜÔºåÁé∞Âú®Êàë‰ª¨ËæìÂÖ•Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">show</span><span class="w"> </span><span class="n">replica</span><span class="w"> </span><span class="n">status</span><span class="err">\</span><span class="k">G</span><span class="p">;</span>
</code></pre></div>
<p>Êù•Êü•ÁúãÂΩìÂâç‰ªéÊú∫Áä∂ÊÄÅÔºåÂèØ‰ª•ÁúãÂà∞Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19gxft4iwj217i0d4jtm.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414192045320" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19gxft4iwj217i0d4jtm.jpg" /></a></p>
<p>ÊúÄÂÖ≥ÈîÆÁöÑÊòØ‰∏ãÈù¢ÁöÑReplica_IO_RunningÂíåReplica_SQL_RunningÂøÖÈ°ªÂêåÊó∂‰∏∫YesÊâçÂèØ‰ª•ÔºåÂÆûÈôÖ‰∏ä‰ªéÂ∫ì‰ºöÂàõÂª∫‰∏§‰∏™Á∫øÁ®ãÔºå‰∏Ä‰∏™Á∫øÁ®ãË¥üË¥£‰∏é‰∏ªÂ∫ìËøõË°åÈÄö‰ø°ÔºåËé∑Âèñ‰∫åËøõÂà∂Êó•ÂøóÔºåÊöÇÊó∂Â≠òÊîæÂà∞‰∏Ä‰∏™‰∏≠Èó¥Ë°®ÔºàRelay_LogÔºâ‰∏≠ÔºåËÄåÂè¶‰∏Ä‰∏™Á∫øÁ®ãÂàôÊòØÂ∞Ü‰∏≠Èó¥Ë°®‰øùÂ≠òÁöÑ‰∫åËøõÂà∂Êó•ÂøóÁöÑ‰ø°ÊÅØËøõË°åÊâßË°åÔºåÁÑ∂ÂêéÊèíÂÖ•Âà∞‰ªéÂ∫ì‰∏≠„ÄÇ</p>
<p>ÊúÄÂêéÈÖçÁΩÆÂÆåÊàêÔºåÊàë‰ª¨Êù•ÁúãÁúãÂú®‰∏ªÂ∫ìËøõË°åÊìç‰Ωú‰ºö‰∏ç‰ºöÂêåÊ≠•Âà∞‰ªéÂ∫ìÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19h202nr3j21e00aimyl.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414192508849" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19h202nr3j21e00aimyl.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞Âú®‰∏ªÂ∫ì‰∏≠ÂàõÂª∫ÁöÑÊï∞ÊçÆÂ∫ìÔºåË¢´ÂêåÊ≠•Âà∞‰ªéÂ∫ì‰∏≠‰∫ÜÔºåÊàë‰ª¨ÂÜçÊù•ËØïËØïÁúãÂàõÂª∫Ë°®ÂíåÊèíÂÖ•Êï∞ÊçÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">use</span><span class="w"> </span><span class="n">yyds</span><span class="p">;</span>
<span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test</span><span class="w">  </span><span class="p">(</span>
<span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">passwd</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>
</code></pre></div>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19h5hpocfj21dg0e8tbe.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414192829536" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19h5hpocfj21dg0e8tbe.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨Èöè‰æøÊèíÂÖ•‰∏ÄÁÇπÊï∞ÊçÆÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19h6cxnxzj215c08s3zn.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414192920277" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19h6cxnxzj215c08s3zn.jpg" /></a></p>
<p>ËøôÊ†∑ÔºåÊàë‰ª¨ÁöÑMySQL‰∏ª‰ªéÂ∞±Êê≠Âª∫ÂÆåÊàê‰∫ÜÔºåÈÇ£‰πàÂ¶ÇÊûú‰∏ªÊú∫Ê≠§Êó∂ÊåÇ‰∫Ü‰ºöÊÄé‰πàÊ†∑Ôºü</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19i41l2flj211k03oq3b.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414200140191" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19i41l2flj211k03oq3b.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞IOÁ∫øÁ®ãÊòØÂ§Ñ‰∫éÈáçËøûÁä∂ÊÄÅÔºå‰ºöÁ≠âÂæÖ‰∏ªÂ∫ìÈáçÊñ∞ÊÅ¢Â§çËøêË°å„ÄÇ</p>
<h3 id="_10">ÂàÜÂ∫ìÂàÜË°®<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h3>
<p>Âú®Â§ßÂûãÁöÑ‰∫íËÅîÁΩëÁ≥ªÁªü‰∏≠ÔºåÂèØËÉΩÂçïÂè∞MySQLÁöÑÂ≠òÂÇ®ÂÆπÈáèÊó†Ê≥ïÊª°Ë∂≥‰∏öÂä°ÁöÑÈúÄÊ±ÇÔºåËøôÊó∂ÂÄôÂ∞±ÈúÄË¶ÅËøõË°åÊâ©ÂÆπ‰∫Ü„ÄÇ</p>
<p>Âíå‰πãÂâçÁöÑÈóÆÈ¢ò‰∏ÄÊ†∑ÔºåÂçïÂè∞‰∏ªÊú∫ÁöÑÁ°¨‰ª∂ËµÑÊ∫êÊòØÂ≠òÂú®Áì∂È¢àÁöÑÔºå‰∏çÂèØËÉΩÊó†ÈôêÂà∂Âú∞Á∫µÂêëÊâ©Â±ïÔºåËøôÊó∂Êàë‰ª¨Â∞±ÂæóÈÄöËøáÂ§öÂè∞ÂÆû‰æãÊù•ËøõË°åÂÆπÈáèÁöÑÊ®™ÂêëÊâ©ÂÆπÔºåÊàë‰ª¨ÂèØ‰ª•Â∞ÜÊï∞ÊçÆÂàÜÊï£Â≠òÂÇ®ÔºåËÆ©Â§öÂè∞‰∏ªÊú∫ÂÖ±ÂêåÊù•‰øùÂ≠òÊï∞ÊçÆ„ÄÇ</p>
<p>ÈÇ£‰πàÈóÆÈ¢òÊù•‰∫ÜÔºåÊÄé‰πà‰∏™ÂàÜÊï£Ê≥ïÔºü</p>
<ul>
<li><strong>ÂûÇÁõ¥ÊãÜÂàÜÔºö</strong>Êàë‰ª¨ÁöÑË°®ÂíåÊï∞ÊçÆÂ∫ìÈÉΩÂèØ‰ª•ËøõË°åÂûÇÁõ¥ÊãÜÂàÜÔºåÊâÄË∞ìÂûÇÁõ¥ÊãÜÂàÜÔºåÂ∞±ÊòØÂ∞ÜÊï∞ÊçÆÂ∫ì‰∏≠ÊâÄÊúâÁöÑË°®ÔºåÊåâÁÖß‰∏öÂä°ÂäüËÉΩÊãÜÂàÜÂà∞ÂêÑ‰∏™Êï∞ÊçÆÂ∫ì‰∏≠ÔºàÊòØ‰∏çÊòØÊÑüËßâË∑üÂâçÈù¢‰∏§Á´†ÁöÑÂ≠¶‰π†ÁöÑÊû∂ÊûÑÂØπÂ∫îËµ∑Êù•‰∫ÜÔºâËÄåÂØπ‰∫é‰∏ÄÂº†Ë°®Ôºå‰πüÂèØ‰ª•ÈÄöËøáÂ§ñÈîÆ‰πãÁ±ªÁöÑÊú∫Âà∂ÔºåÂ∞ÜÂÖ∂ÊãÜÂàÜ‰∏∫Â§ö‰∏™Ë°®„ÄÇ</li>
</ul>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19jf8adocj21e60gyacl.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414204703883" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19jf8adocj21e60gyacl.jpg" /></a></p>
<ul>
<li><strong>Ê∞¥Âπ≥ÊãÜÂàÜÔºö</strong>Ê∞¥Âπ≥ÊãÜÂàÜÈíàÂØπÁöÑ‰∏çÊòØË°®ÔºåËÄåÊòØÊï∞ÊçÆÔºåÊàë‰ª¨ÂèØ‰ª•ËÆ©ÂæàÂ§ö‰∏™ÂÖ∑ÊúâÁõ∏ÂêåË°®ÁöÑÊï∞ÊçÆÂ∫ìÂ≠òÊîæ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÔºåÁõ∏ÂΩì‰∫éÊòØÂ∞ÜÊï∞ÊçÆÂàÜÊï£Â≠òÂÇ®Âú®ÂêÑ‰∏™ËäÇÁÇπ‰∏ä„ÄÇ</li>
</ul>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19jkrb2pkj21g80eu76c.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414205222383" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19jkrb2pkj21g80eu76c.jpg" /></a></p>
<p>ÈÇ£‰πàË¶ÅÂÆûÁé∞ËøôÊ†∑ÁöÑÊãÜÂàÜÊìç‰ΩúÔºåÊàë‰ª¨Ëá™Ë°åÂéªÁºñÂÜô‰ª£Á†ÅÂ∑•‰ΩúÈáèËÇØÂÆöÊòØÊØîËæÉÂ§ßÁöÑÔºåÂõ†Ê≠§ÁõÆÂâçÂÆûÈôÖ‰∏äÂ∑≤ÁªèÊúâ‰∏Ä‰∫õËß£ÂÜ≥ÊñπÊ°à‰∫ÜÔºåÊØîÂ¶ÇÊàë‰ª¨ÂèØ‰ª•‰ΩøÁî®MyCatÔºà‰πüÊòØ‰∏Ä‰∏™Êï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂ÔºåÁõ∏ÂΩì‰∫éÊåÇ‰∫Ü‰∏ÄÂ±Ç‰ª£ÁêÜÔºåÂÜçÈÄöËøáMyCatËøõË°åÂàÜÂ∫ìÂàÜË°®Êìç‰ΩúÊï∞ÊçÆÂ∫ìÔºåÂè™ÈúÄË¶ÅËøûÊé•Â∞±ËÉΩ‰ΩøÁî®ÔºåÁ±ª‰ººÁöÑËøòÊúâShardingSphere-ProxyÔºâÊàñÊòØSharding JDBCÔºàÂ∫îÁî®Á®ãÂ∫è‰∏≠Áõ¥Êé•ÂØπSQLËØ≠Âè•ËøõË°åÂàÜÊûêÔºåÁÑ∂ÂêéËΩ¨Êç¢ÊàêÂàÜÂ∫ìÂàÜË°®Êìç‰ΩúÔºåÈúÄË¶ÅÊàë‰ª¨Ëá™Â∑±ÁºñÂÜô‰∏Ä‰∫õÈÄªËæë‰ª£Á†ÅÔºâÔºåËøôÈáåÊàë‰ª¨Â∞±ËÆ≤Ëß£‰∏Ä‰∏ãSharding JDBC„ÄÇ</p>
<h3 id="sharding-jdbc">Sharding JDBC<a class="headerlink" href="#sharding-jdbc" title="Permanent link">&para;</a></h3>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19l7msxooj21ps0iego7.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414214856875" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19l7msxooj21ps0iego7.jpg" /></a></p>
<p><strong>ÂÆòÊñπÊñáÊ°£Ôºà‰∏≠ÊñáÔºâÔºö</strong><a href="https://shardingsphere.apache.org/document/5.1.0/cn/overview/#shardingsphere-jdbc">https://shardingsphere.apache.org/document/5.1.0/cn/overview/#shardingsphere-jdbc</a></p>
<p>ÂÆö‰Ωç‰∏∫ËΩªÈáèÁ∫ß Java Ê°ÜÊû∂ÔºåÂú® Java ÁöÑ JDBC Â±ÇÊèê‰æõÁöÑÈ¢ùÂ§ñÊúçÂä°ÔºåÂÆÉ‰ΩøÁî®ÂÆ¢Êà∑Á´ØÁõ¥ËøûÊï∞ÊçÆÂ∫ìÔºå‰ª• jar ÂåÖÂΩ¢ÂºèÊèê‰æõÊúçÂä°ÔºåÊó†ÈúÄÈ¢ùÂ§ñÈÉ®ÁΩ≤Âíå‰æùËµñÔºåÂèØÁêÜËß£‰∏∫Â¢ûÂº∫ÁâàÁöÑ JDBC È©±Âä®ÔºåÂÆåÂÖ®ÂÖºÂÆπ JDBC ÂíåÂêÑÁßç ORM Ê°ÜÊû∂„ÄÇ</p>
<ul>
<li>ÈÄÇÁî®‰∫é‰ªª‰ΩïÂü∫‰∫é JDBC ÁöÑ ORM Ê°ÜÊû∂ÔºåÂ¶ÇÔºöJPA, Hibernate, Mybatis, Spring JDBC Template ÊàñÁõ¥Êé•‰ΩøÁî® JDBCÔºõ</li>
<li>ÊîØÊåÅ‰ªª‰ΩïÁ¨¨‰∏âÊñπÁöÑÊï∞ÊçÆÂ∫ìËøûÊé•Ê±†ÔºåÂ¶ÇÔºöDBCP, C3P0, BoneCP, HikariCP Á≠âÔºõ</li>
<li>ÊîØÊåÅ‰ªªÊÑèÂÆûÁé∞ JDBC ËßÑËåÉÁöÑÊï∞ÊçÆÂ∫ìÔºåÁõÆÂâçÊîØÊåÅ MySQLÔºåPostgreSQLÔºåOracleÔºåSQLServer ‰ª•Âèä‰ªª‰ΩïÂèØ‰ΩøÁî® JDBC ËÆøÈóÆÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ</li>
</ul>
<p>ËøôÈáåÊàë‰ª¨‰∏ªË¶ÅÊºîÁ§∫‰∏Ä‰∏ãÊ∞¥Âπ≥ÂàÜË°®ÊñπÂºèÔºåÊàë‰ª¨Áõ¥Êé•ÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑSpringBootÈ°πÁõÆÂç≥ÂèØÔºå‰æùËµñÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependencies&gt;</span>
<span class="w">    </span><span class="cm">&lt;!--  ShardingJDBC‰æùËµñÔºåÈÇ£ÂøÖÈ°ªÂÆâÊéíÊúÄÊñ∞ÁâàÂïäÔºåÂ∏åÊúõ‰Ω†‰ª¨ÁúãËßÜÈ¢ëÁöÑÊó∂ÂÄôËøòÊòØ5.XÁâàÊú¨  --&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.apache.shardingsphere<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>shardingsphere-jdbc-core-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;version&gt;</span>5.1.0<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>

<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.mybatis.spring.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>mybatis-spring-boot-starter<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;version&gt;</span>2.2.2<span class="nt">&lt;/version&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>

<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.projectlombok<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>lombok<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;optional&gt;</span>true<span class="nt">&lt;/optional&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="w">    </span><span class="nt">&lt;dependency&gt;</span>
<span class="w">        </span><span class="nt">&lt;groupId&gt;</span>org.springframework.boot<span class="nt">&lt;/groupId&gt;</span>
<span class="w">        </span><span class="nt">&lt;artifactId&gt;</span>spring-boot-starter-test<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">        </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="w">    </span><span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</code></pre></div>
<p>Êï∞ÊçÆÂ∫ìÊàë‰ª¨ËøôÈáåÁõ¥Êé•Áî®‰∏äËäÇËØæÁöÑÂç≥ÂèØÔºåÂõ†‰∏∫Âè™ÈúÄË¶Å‰∏§‰∏™Ë°®ÁªìÊûÑ‰∏ÄÊ†∑ÁöÑÊï∞ÊçÆÂ∫ìÂç≥ÂèØÔºåÊ≠£Â•Ω‰∏äËäÇËØæËøõË°å‰∫ÜÂêåÊ≠•ÔºåÊâÄ‰ª•Êàë‰ª¨Áõ¥Êé•Êää‰ªéÂ∫ìÂèòÂõûÊ≠£Â∏∏Áä∂ÊÄÅÂ∞±ÂèØ‰ª•‰∫ÜÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">stop</span><span class="w"> </span><span class="n">replica</span><span class="p">;</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Êää‰∏§‰∏™Ë°®ÁöÑrootÁî®Êà∑ÂØÜÁ†ÅÊîπ‰∏Ä‰∏ãÔºå‰∏Ä‰ºöÁî®Ëøô‰∏™Áî®Êà∑ËøûÊé•Êï∞ÊçÆÂ∫ìÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">update</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">authentication_string</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">user</span><span class="o">=</span><span class="s1">&#39;root&#39;</span><span class="p">;</span>
<span class="k">update</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="k">host</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;%&#39;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;root&#39;</span><span class="p">;</span>
<span class="k">alter</span><span class="w"> </span><span class="k">user</span><span class="w"> </span><span class="n">root</span><span class="w"> </span><span class="n">identified</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">mysql_native_password</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="s1">&#39;123456&#39;</span><span class="p">;</span>
<span class="n">FLUSH</span><span class="w"> </span><span class="k">PRIVILEGES</span><span class="p">;</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Êù•ÁúãÔºåÂ¶ÇÊûúÁõ¥Êé•Â∞ùËØïÂºÄÂêØÊúçÂä°Âô®ÔºåÈÇ£ËÇØÂÆöÊòØÂºÄ‰∏ç‰∫ÜÁöÑÔºåÂõ†‰∏∫Êàë‰ª¨Ë¶ÅÈÖçÁΩÆÊï∞ÊçÆÊ∫êÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19kif2dh4j21sk08en0j.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414212443482" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19kif2dh4j21sk08en0j.jpg" /></a></p>
<p>ÈÇ£‰πàÊï∞ÊçÆÊ∫êËØ•ÊÄé‰πàÈÖçÁΩÆÂë¢ÔºüÁé∞Âú®Êàë‰ª¨ÊòØ‰∏Ä‰∏™ÂàÜÂ∫ìÂàÜË°®ÁöÑÁä∂ÊÄÅÔºåÈúÄË¶ÅÈÖçÁΩÆ‰∏§‰∏™Êï∞ÊçÆÊ∫êÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">shardingsphere</span><span class="p">:</span>
<span class="w">    </span><span class="nt">datasource</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># ÊúâÂá†‰∏™Êï∞ÊçÆÂ∞±ÈÖçÂá†‰∏™ÔºåËøôÈáåÊòØÂêçÁß∞ÔºåÊåâÁÖß‰∏ãÈù¢ÁöÑÊ†ºÂºèÔºåÂêçÁß∞+Êï∞Â≠óÁöÑÂΩ¢Âºè</span>
<span class="w">      </span><span class="nt">names</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db0,db1</span>
<span class="w">      </span><span class="c1"># ‰∏∫ÊØè‰∏™Êï∞ÊçÆÊ∫êÂçïÁã¨ËøõË°åÈÖçÁΩÆ</span>
<span class="w">      </span><span class="nt">db0</span><span class="p">:</span>
<span class="w">        </span><span class="c1"># Êï∞ÊçÆÊ∫êÂÆûÁé∞Á±ªÔºåËøôÈáå‰ΩøÁî®ÈªòËÆ§ÁöÑHikariDataSource</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.zaxxer.hikari.HikariDataSource</span>
<span class="w">        </span><span class="c1"># Êï∞ÊçÆÂ∫ìÈ©±Âä®</span>
<span class="w">        </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.cj.jdbc.Driver</span>
<span class="w">        </span><span class="c1"># ‰∏çÁî®ÊàëÂ§öËØ¥‰∫ÜÂêß</span>
<span class="w">        </span><span class="nt">jdbc-url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://192.168.0.8:3306/yyds</span>
<span class="w">        </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">123456</span>
<span class="w">      </span><span class="nt">db1</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.zaxxer.hikari.HikariDataSource</span>
<span class="w">        </span><span class="nt">driver-class-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">com.mysql.cj.jdbc.Driver</span>
<span class="w">        </span><span class="nt">jdbc-url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jdbc:mysql://192.168.0.13:3306/yyds</span>
<span class="w">        </span><span class="nt">username</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">root</span>
<span class="w">        </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">123456</span>
</code></pre></div>
<p>Â¶ÇÊûúÂêØÂä®Ê≤°ÊúâÈóÆÈ¢òÔºåÈÇ£‰πàÂ∞±ÊòØÈÖçÁΩÆÊàêÂäü‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h19mebpqb7j21su0aqgre.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220414222958901" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h19mebpqb7j21su0aqgre.jpg" /></a></p>
<p>Êé•ÁùÄÊàë‰ª¨ÈúÄË¶ÅÂØπÈ°πÁõÆËøõË°å‰∏Ä‰∫õÁºñÂÜôÔºåÊ∑ªÂä†Êàë‰ª¨ÁöÑÁî®Êà∑ÂÆû‰ΩìÁ±ªÂíåMapperÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Data</span>
<span class="nd">@AllArgsConstructor</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">User</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">name</span><span class="p">;</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">passwd</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@Mapper</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">UserMapper</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from test where id = #{id}&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="n">User</span><span class="w"> </span><span class="nf">getUserById</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">);</span>

<span class="w">    </span><span class="nd">@Insert</span><span class="p">(</span><span class="s">&quot;insert into test(id, name, passwd) values(#{id}, #{name}, #{passwd})&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">addUser</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ÂÆûÈôÖ‰∏äËøô‰∫õÊìç‰ΩúÈÉΩÊòØÂ∏∏ËßÑÊìç‰ΩúÔºåÂú®ÁºñÂÜô‰ª£Á†ÅÊó∂ÂÖ≥Ê≥®ÁÇπ‰æùÁÑ∂ÊîæÂú®‰∏öÂä°Êú¨Ë∫´‰∏äÔºåÁé∞Âú®Êàë‰ª¨Â∞±Êù•ÁºñÂÜôÈÖçÁΩÆÊñá‰ª∂ÔºåÊàë‰ª¨ÈúÄË¶ÅÂëäËØâShardingJDBCË¶ÅÂ¶Ç‰ΩïËøõË°åÂàÜÁâáÔºåÈ¶ñÂÖàÊòéÁ°ÆÔºöÁé∞Âú®ÊòØ‰∏§‰∏™Êï∞ÊçÆÂ∫ìÈÉΩÊúâtestË°®Â≠òÊîæÁî®Êà∑Êï∞ÊçÆÔºåÊàë‰ª¨ÁõÆÊ†áÊòØÂ∞ÜÁî®Êà∑‰ø°ÊÅØÂàÜÂà´Â≠òÊîæÂà∞Ëøô‰∏§‰∏™Êï∞ÊçÆÂ∫ìÁöÑË°®‰∏≠„ÄÇ</p>
<p>‰∏çÂ∫üËØù‰∫ÜÔºåÁõ¥Êé•‰∏äÈÖçÁΩÆÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">shardingsphere</span><span class="p">:</span>
<span class="w">    </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sharding</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tables</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#ËøôÈáåÂ°´ÂÜôË°®ÂêçÁß∞ÔºåÁ®ãÂ∫è‰∏≠ÂØπËøôÂº†Ë°®ÁöÑÊâÄÊúâÊìç‰ΩúÔºåÈÉΩ‰ºöÈááÁî®‰∏ãÈù¢ÁöÑË∑ØÁî±ÊñπÊ°à</span>
<span class="w">            </span><span class="c1">#ÊØîÂ¶ÇÊàë‰ª¨‰∏äÈù¢MybatisÂ∞±ÊòØÂØπtestË°®ËøõË°åÊìç‰ΩúÔºåÊâÄ‰ª•‰ºöËµ∞‰∏ãÈù¢ÁöÑË∑ØÁî±ÊñπÊ°à</span>
<span class="w">          </span><span class="nt">test</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#ËøôÈáåÂ°´ÂÜôÂÆûÈôÖÁöÑË∑ØÁî±ËäÇÁÇπÔºåÊØîÂ¶ÇÁé∞Âú®Êàë‰ª¨Ë¶ÅÂàÜ‰∏§‰∏™Â∫ìÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Êää‰∏§‰∏™Â∫ìÈÉΩÂÜô‰∏äÔºå‰ª•ÂèäÂØπÂ∫îÁöÑË°®</span>
<span class="w">            </span><span class="c1">#‰πüÂèØ‰ª•‰ΩøÁî®Ë°®ËææÂºèÔºåÊØîÂ¶Ç‰∏ãÈù¢ÁöÑÂèØ‰ª•ÁÆÄÂÜô‰∏∫ db$-&gt;{0..1}.test</span>
<span class="w">            </span><span class="nt">actual-data-nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db0.test,db1.test</span>
<span class="w">            </span><span class="c1">#ËøôÈáåÊòØÂàÜÂ∫ìÁ≠ñÁï•ÈÖçÁΩÆ</span>
<span class="w">            </span><span class="nt">database-strategy</span><span class="p">:</span>
<span class="w">                </span><span class="c1">#ËøôÈáåÈÄâÊã©Ê†áÂáÜÁ≠ñÁï•Ôºå‰πüÂèØ‰ª•ÈÖçÁΩÆÂ§çÊùÇÁ≠ñÁï•ÔºåÂü∫‰∫éÂ§ö‰∏™ÈîÆËøõË°åÂàÜÁâá</span>
<span class="w">              </span><span class="nt">standard</span><span class="p">:</span>
<span class="w">                </span><span class="c1">#ÂèÇ‰∏éÂàÜÁâáËøêÁÆóÁöÑÂ≠óÊÆµÔºå‰∏ãÈù¢ÁöÑÁÆóÊ≥ï‰ºöÊ†πÊçÆËøôÈáåÊèê‰æõÁöÑÂ≠óÊÆµËøõË°åËøêÁÆó</span>
<span class="w">                </span><span class="nt">sharding-column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">id</span>
<span class="w">                </span><span class="c1">#ËøôÈáåÂ°´ÂÜôÊàë‰ª¨‰∏ãÈù¢Ëá™ÂÆö‰πâÁöÑÁÆóÊ≥ïÂêçÁß∞</span>
<span class="w">                </span><span class="nt">sharding-algorithm-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-alg</span>
<span class="w">        </span><span class="nt">sharding-algorithms</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#Ëá™ÂÆö‰πâ‰∏Ä‰∏™Êñ∞ÁöÑÁÆóÊ≥ïÔºåÂêçÁß∞ÈöèÊÑè</span>
<span class="w">          </span><span class="nt">my-alg</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#ÁÆóÊ≥ïÁ±ªÂûãÔºåÂÆòÊñπÂÜÖÁΩÆ‰∫ÜÂæàÂ§öÁßçÔºåËøôÈáåÊºîÁ§∫ÊúÄÁÆÄÂçïÁöÑ‰∏ÄÁßç</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MOD</span>
<span class="w">            </span><span class="nt">props</span><span class="p">:</span>
<span class="w">              </span><span class="nt">sharding-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">    </span><span class="nt">props</span><span class="p">:</span>
<span class="w">        </span><span class="c1">#ÂºÄÂêØÊó•ÂøóÔºå‰∏Ä‰ºöÊñπ‰æøÊàë‰ª¨ËßÇÂØü</span>
<span class="w">            </span><span class="nt">sql-show</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>ÂÖ∂‰∏≠ÔºåÂàÜÁâáÁÆóÊ≥ïÊúâÂæàÂ§öÂÜÖÁΩÆÁöÑÔºåÂèØ‰ª•Âú®ËøôÈáåÊü•ËØ¢Ôºö<a href="https://shardingsphere.apache.org/document/5.1.0/cn/user-manual/shardingsphere-jdbc/builtin-algorithm/sharding/">https://shardingsphere.apache.org/document/5.1.0/cn/user-manual/shardingsphere-jdbc/builtin-algorithm/sharding/</a>ÔºåËøôÈáåÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØMODÔºå‰πüÂ∞±ÊòØÂèñÊ®°ÂàÜÁâáÁÆóÊ≥ïÔºåÂÆÉ‰ºöÊ†πÊçÆ‰∏ªÈîÆÁöÑÂÄºËøõË°åÂèñÊ®°ËøêÁÆóÔºåÊØîÂ¶ÇÊàë‰ª¨ËøôÈáåÂ°´ÂÜôÁöÑÊòØ2ÔºåÈÇ£‰πàÂ∞±Ë°®Á§∫ÂØπ‰∏ªÈîÆËøõË°åÊ®°2ËøêÁÆóÔºåÊ†πÊçÆÊï∞ÊçÆÊ∫êÁöÑÂêçÁß∞ÔºåÊØîÂ¶Çdb0Â∞±ÊòØÂèñÊ®°Âêé‰∏∫0Ôºådb1Â∞±ÊòØÂèñÊ®°Âêé‰∏∫1ÔºàÂÆòÊñπÊñáÊ°£ÊèèËø∞ÁöÑÂπ∂‰∏çÊòØÂæàÊ∏ÖÊ•öÔºâÔºå‰πüÂ∞±ÊòØËØ¥ÔºåÊúÄÁªàÂÆûÁé∞ÁöÑÊïàÊûúÂ∞±ÊòØÂçïÊï∞ÊîæÂú®<code>db1</code>ÔºåÂèåÊï∞ÊîæÂú®<code>db0</code>ÔºåÂΩìÁÑ∂ÂÆÉËøòÊîØÊåÅ‰∏Ä‰∫õÂÖ∂‰ªñÁöÑÁÆóÊ≥ïÔºåËøôÈáåÂ∞±‰∏çÂ§ö‰ªãÁªç‰∫Ü„ÄÇ</p>
<p>ÈÇ£‰πàÁé∞Âú®Êàë‰ª¨ÁºñÂÜô‰∏Ä‰∏™ÊµãËØïÁî®‰æãÊù•ÁúãÁúãÔºåÊòØÂê¶ËÉΩÂ§üÊåâÁÖßÊàë‰ª¨‰∏äÈù¢ÁöÑËßÑÂàôËøõË°åË∑ØÁî±Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ShardingJdbcTestApplicationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">//ËøôÈáåIDËá™Âä®ÁîüÊàê1-10ÔºåÁÑ∂ÂêéÊèíÂÖ•Êï∞ÊçÆÂ∫ì</span>
<span class="w">            </span><span class="n">mapper</span><span class="p">.</span><span class="na">addUser</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;xxx&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ccc&quot;</span><span class="p">));</span><span class="w">   </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨ÂèØ‰ª•ÂºÄÂßãËøêË°å‰∫ÜÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a7m3cjm6j21qe0b6aej.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415104401263" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a7m3cjm6j21qe0b6aej.jpg" /></a></p>
<p>ÊµãËØïÈÄöËøáÔºåÊàë‰ª¨Êù•ÁúãÁúãÊï∞ÊçÆÂ∫ìÈáåÈù¢ÊòØ‰∏çÊòØÊåâÁÖßÊàë‰ª¨ÁöÑËßÑÂàôËøõË°åÊï∞ÊçÆÊèíÂÖ•ÁöÑÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a7mx6u30j217g0d075w.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415104449502" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a7mx6u30j217g0d075w.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞Ëøô‰∏§Âº†Ë°®ÔºåÈÉΩÊàêÂäüÊåâÁÖßÊàë‰ª¨ÊåáÂÆöÁöÑË∑ØÁî±ËßÑÂàôËøõË°åÊèíÂÖ•‰∫ÜÔºåÊàë‰ª¨Êù•ÁúãÁúãËØ¶ÁªÜÁöÑË∑ØÁî±ÊÉÖÂÜµÔºåÈÄöËøáÊéßÂà∂Âè∞ËæìÂá∫ÁöÑSQLÂ∞±ÂèØ‰ª•ÁúãÂà∞Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a7vvcqsij21g20amgpd.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415105325917" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a7vvcqsij21g20amgpd.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÊâÄÊúâÁöÑSQLËØ≠Âè•ÈÉΩÊúâ‰∏Ä‰∏™Logic SQLÔºàËøô‰∏™Â∞±ÊòØÊàë‰ª¨Âú®MybatisÈáåÈù¢ÂÜôÁöÑÔºåÊòØ‰ªÄ‰πàÂ∞±ÊòØ‰ªÄ‰πàÔºâÁ¥ßÊé•ÁùÄ‰∏ãÈù¢Â∞±ÊòØActual SQLÔºå‰πüÂ∞±ÊòØËØ¥ÊØè‰∏™ÈÄªËæëSQLÊúÄÁªà‰ºöÊ†πÊçÆÊàë‰ª¨ÁöÑÁ≠ñÁï•ËΩ¨Êç¢‰∏∫ÂÆûÈôÖSQLÔºåÊØîÂ¶ÇÁ¨¨‰∏ÄÊù°Êï∞ÊçÆÔºåÂÆÉÁöÑidÊòØ0ÔºåÈÇ£‰πàÂÆûÈôÖËΩ¨Êç¢Âá∫Êù•ÁöÑSQL‰ºöÂú®db0Ëøô‰∏™Êï∞ÊçÆÊ∫êËøõË°åÊèíÂÖ•„ÄÇ</p>
<p>ËøôÊ†∑Êàë‰ª¨Â∞±ÂæàËΩªÊùæÂú∞ÂÆûÁé∞‰∫ÜÂàÜÂ∫ìÁ≠ñÁï•„ÄÇ</p>
<p>ÂàÜÂ∫ìÂÆåÊàê‰πãÂêéÔºåÊé•ÁùÄÊàë‰ª¨Êù•ÁúãÂàÜË°®ÔºåÊØîÂ¶ÇÁé∞Âú®Êàë‰ª¨ÁöÑÊï∞ÊçÆÂ∫ì‰∏≠Êúâ<code>test_0</code>Âíå<code>test_1</code>‰∏§Âº†Ë°®ÔºåË°®ÁªìÊûÑ‰∏ÄÊ†∑Ôºå‰ΩÜÊòØÊàë‰ª¨‰πüÊòØÂ∏åÊúõËÉΩÂ§üÊ†πÊçÆidÂèñÊ®°ËøêÁÆóÁöÑÁªìÊûúÂàÜÂà´ÊîæÂà∞Ëøô‰∏§‰∏™‰∏çÂêåÁöÑË°®‰∏≠ÔºåÂÆûÁé∞ÊÄùË∑ØÂÖ∂ÂÆûÊòØÂ∑Æ‰∏çÂ§öÁöÑÔºåËøôÈáåÈ¶ñÂÖàÈúÄË¶Å‰ªãÁªç‰∏Ä‰∏ã‰∏§ÁßçË°®Ê¶ÇÂøµÔºö</p>
<ul>
<li><strong>ÈÄªËæëË°®Ôºö</strong>Áõ∏ÂêåÁªìÊûÑÁöÑÊ∞¥Âπ≥ÊãÜÂàÜÊï∞ÊçÆÂ∫ìÔºàË°®ÔºâÁöÑÈÄªËæëÂêçÁß∞ÔºåÊòØ SQL ‰∏≠Ë°®ÁöÑÈÄªËæëÊ†áËØÜ„ÄÇ ‰æãÔºöËÆ¢ÂçïÊï∞ÊçÆÊ†πÊçÆ‰∏ªÈîÆÂ∞æÊï∞ÊãÜÂàÜ‰∏∫ 10 Âº†Ë°®ÔºåÂàÜÂà´ÊòØ <code>t_order_0</code> Âà∞ <code>t_order_9</code>Ôºå‰ªñ‰ª¨ÁöÑÈÄªËæëË°®Âêç‰∏∫ <code>t_order</code></li>
<li><strong>ÁúüÂÆûË°®Ôºö</strong>Âú®Ê∞¥Âπ≥ÊãÜÂàÜÁöÑÊï∞ÊçÆÂ∫ì‰∏≠ÁúüÂÆûÂ≠òÂú®ÁöÑÁâ©ÁêÜË°®„ÄÇ Âç≥‰∏ä‰∏™Á§∫‰æã‰∏≠ÁöÑ <code>t_order_0</code> Âà∞ <code>t_order_9</code></li>
</ul>
<p>Áé∞Âú®Êàë‰ª¨Â∞±‰ª•‰∏ÄÂè∑Êï∞ÊçÆÂ∫ì‰∏∫‰æãÔºåÈÇ£‰πàÊàë‰ª¨Âú®ÈáåÈù¢ÂàõÂª∫‰∏äÈù¢ÊèêÂà∞ÁöÑ‰∏§Âº†Ë°®Ôºå‰πãÂâçÁöÑÈÇ£‰∏™<code>test</code>Ë°®Âà†‰∏çÂà†ÈÉΩÂèØ‰ª•ÔºåÂ∞±ÂΩìÂÅö‰∏çÂ≠òÂú®Â∞±Ë°å‰∫ÜÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_0</span><span class="w">  </span><span class="p">(</span>
<span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">passwd</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>

<span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test_1</span><span class="w">  </span><span class="p">(</span>
<span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="nb">int</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">passwd</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>
</code></pre></div>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8681w2ej211608u3z0.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415110322981" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8681w2ej211608u3z0.jpg" /></a></p>
<p>Êé•ÁùÄÊàë‰ª¨‰∏çË¶ÅÂéª‰øÆÊîπ‰ªª‰ΩïÁöÑ‰∏öÂä°‰ª£Á†ÅÔºåMybatisÈáåÈù¢ÂÜôÁöÑÊòØ‰ªÄ‰πà‰æùÁÑ∂‰øùÊåÅÂéüÊ†∑ÔºåÂç≥‰ΩøÊàë‰ª¨ÁöÑË°®ÂêçÂ∑≤ÁªèÂèò‰∫ÜÔºåÊàë‰ª¨ÈúÄË¶ÅÂÅöÁöÑÊòØÈÄöËøáË∑ØÁî±Êù•‰øÆÊîπÂéüÊúâÁöÑSQLÔºåÈÖçÁΩÆÂ¶Ç‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">shardingsphere</span><span class="p">:</span>
<span class="w">    </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sharding</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tables</span><span class="p">:</span>
<span class="w">          </span><span class="nt">test</span><span class="p">:</span>
<span class="w">            </span><span class="nt">actual-data-nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db0.test_$-&gt;{0..1}</span>
<span class="w">            </span><span class="c1">#Áé∞Âú®Êàë‰ª¨Êù•ÈÖçÁΩÆ‰∏Ä‰∏ãÂàÜË°®Á≠ñÁï•ÔºåÊ≥®ÊÑèËøôÈáåÊòØtable-strategy‰∏äÈù¢ÊòØdatabase-strategy</span>
<span class="w">            </span><span class="nt">table-strategy</span><span class="p">:</span>
<span class="w">                </span><span class="c1">#Âü∫Êú¨ÈÉΩË∑ü‰πãÂâçÊòØ‰∏ÄÊ†∑ÁöÑ</span>
<span class="w">              </span><span class="nt">standard</span><span class="p">:</span>
<span class="w">                </span><span class="nt">sharding-column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">id</span>
<span class="w">                </span><span class="nt">sharding-algorithm-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-alg</span>
<span class="w">        </span><span class="nt">sharding-algorithms</span><span class="p">:</span>
<span class="w">          </span><span class="nt">my-alg</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#ËøôÈáåÊàë‰ª¨ÊºîÁ§∫‰∏Ä‰∏ãINLINEÊñπÂºèÔºåÊàë‰ª¨ÂèØ‰ª•Ëá™Ë°åÁºñÂÜôË°®ËææÂºèÊù•ÂÜ≥ÂÆö</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">INLINE</span>
<span class="w">            </span><span class="nt">props</span><span class="p">:</span>
<span class="w">                </span><span class="c1">#ÊØîÂ¶ÇÊàë‰ª¨ËøòÊòØÂ∏åÊúõËøõË°åÊ®°2ËÆ°ÁÆóÂæóÂà∞Êï∞ÊçÆËØ•ÂéªÁöÑË°®</span>
<span class="w">                </span><span class="c1">#Âè™ÈúÄË¶ÅÁªô‰∏Ä‰∏™ÊúÄÁªàÁöÑË°®ÂêçÁß∞Â∞±Ë°å‰∫Ütest_ÔºåÂêéÈù¢ÁöÑÊï∞Â≠óÊòØË°®ËææÂºèÂèñÊ®°ÁÆóÂá∫ÁöÑ</span>
<span class="w">                </span><span class="c1">#ÂÆûÈôÖ‰∏äËøôÊ†∑ÂÜôÂíåMODÊ®°Âºè‰∏ÄÊ®°‰∏ÄÊ†∑</span>
<span class="w">              </span><span class="nt">algorithm-expression</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_$-&gt;{id % 2}</span>
<span class="w">              </span><span class="c1">#Ê≤°ÈîôÔºåÊü•ËØ¢‰πü‰ºöÊ†πÊçÆÂàÜÁâáÁ≠ñÁï•Êù•ËøõË°åÔºå‰ΩÜÊòØÂ¶ÇÊûúÊàë‰ª¨‰ΩøÁî®ÁöÑÊòØËåÉÂõ¥Êü•ËØ¢ÔºåÈÇ£‰πà‰æùÁÑ∂‰ºöËøõË°åÂÖ®ÈáèÊü•ËØ¢</span>
<span class="w">              </span><span class="c1">#Ëøô‰∏™Êàë‰ª¨ÂêéÈù¢Á¥ßÊé•ÁùÄ‰ºöËÆ≤ÔºåËøôÈáåÂÖàÂÜô‰∏äÂêß</span>
<span class="w">              </span><span class="nt">allow-range-query-with-inline-sharding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨Êù•ÊµãËØï‰∏Ä‰∏ãÔºåÁúãÁúã‰ºö‰∏ç‰ºöÊåâÁÖßÊàë‰ª¨ÁöÑÁ≠ñÁï•ËøõË°åÂàÜË°®ÊèíÂÖ•Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8w0j0ubj21q80bkgq4.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415112809843" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8w0j0ubj21q80bkgq4.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊ†πÊçÆÊàë‰ª¨ÁöÑÁÆóÊ≥ïÔºåÂéüÊú¨ÁöÑÈÄªËæëË°®Ë¢´‰øÆÊîπ‰∏∫‰∫ÜÊúÄÁªàËøõË°åÂàÜË°®ËÆ°ÁÆóÂêéÁöÑÁªìÊûúÔºåÊàë‰ª¨Êù•Êü•Áúã‰∏Ä‰∏ãÊï∞ÊçÆÂ∫ìÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8x1l1coj21800lqgnj.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415112908760" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8x1l1coj21800lqgnj.jpg" /></a></p>
<p>ÊèíÂÖ•Êàë‰ª¨‰∫ÜËß£ÂÆåÊØï‰∫ÜÔºåÊàë‰ª¨Êù•ÁúãÁúãÊü•ËØ¢Âë¢Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ShardingJdbcTestApplicationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mapper</span><span class="p">.</span><span class="na">getUserById</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mapper</span><span class="p">.</span><span class="na">getUserById</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8znk6tuj21j408uacr.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415113139917" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a8znk6tuj21j408uacr.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊ†πÊçÆÊàë‰ª¨ÈÖçÁΩÆÁöÑÁ≠ñÁï•ÔºåÊü•ËØ¢‰πü‰ºöËá™Âä®ÈÄâÊã©ÂØπÂ∫îÁöÑË°®ËøõË°åÔºåÊòØ‰∏çÊòØÊÑüËßâÊúâÂÜÖÂë≥‰∫Ü„ÄÇ</p>
<p>ÈÇ£‰πàÂ¶ÇÊûúÊòØËåÉÂõ¥Êü•ËØ¢Âë¢Ôºü</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Select</span><span class="p">(</span><span class="s">&quot;select * from test where id between #{start} and #{end}&quot;</span><span class="p">)</span>
<span class="n">List</span><span class="o">&lt;</span><span class="n">User</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">getUsersByIdRange</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">start</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">end</span><span class="p">);</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ShardingJdbcTestApplicationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mapper</span><span class="p">.</span><span class="na">getUsersByIdRange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p>Êàë‰ª¨Êù•ÁúãÁúãÊâßË°åÁªìÊûú‰ºöÊÄé‰πàÊ†∑Ôºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a93ntucij21qa07wwim.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415113530971" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a93ntucij21qa07wwim.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞INLINEÁÆóÊ≥ïÈªòËÆ§ÊòØ‰∏çÊîØÊåÅËøõË°åÂÖ®ÈáèÊü•ËØ¢ÁöÑÔºåÊàë‰ª¨ÂæóÂ∞Ü‰∏äÈù¢ÁöÑÈÖçÁΩÆÈ°πÊîπÊàêtrueÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">allow-range-query-with-inline-sharding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>ÂÜçÊ¨°ËøõË°åÊµãËØïÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a952ev2ej21rq04wwg8.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415113652038" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1a952ev2ej21rq04wwg8.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÊúÄÁªàÂá∫Êù•ÁöÑSQLËØ≠Âè•ÊòØÁõ¥Êé•ÂØπ‰∏§‰∏™Ë°®ÈÉΩËøõË°åÊü•ËØ¢ÔºåÁÑ∂ÂêéÊ±ÇÂá∫‰∏Ä‰∏™Âπ∂ÈõÜÂá∫Êù•‰Ωú‰∏∫ÊúÄÂêéÁöÑÁªìÊûú„ÄÇ</p>
<p>ÂΩìÁÑ∂Èô§‰∫ÜÂàÜÁâá‰πãÂ§ñÔºåËøòÊúâÂπøÊí≠Ë°®ÂíåÁªëÂÆöË°®Êú∫Âà∂ÔºåÁî®‰∫éÂ§öÁßç‰∏öÂä°Âú∫ÊôØ‰∏ãÔºåËøôÈáåÂ∞±‰∏çÂ§öÂÅö‰ªãÁªç‰∫ÜÔºåËØ¶ÁªÜËØ∑Êü•ÈòÖÂÆòÊñπÊñáÊ°£„ÄÇ</p>
<h3 id="_11">ÂàÜÂ∏ÉÂºèÂ∫èÂàóÁÆóÊ≥ï<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>ÂâçÈù¢Êàë‰ª¨ËÆ≤Ëß£‰∫ÜÂ¶Ç‰ΩïËøõË°åÂàÜÂ∫ìÂàÜË°®ÔºåÊé•ÁùÄÊàë‰ª¨Êù•ÁúãÁúãÂàÜÂ∏ÉÂºèÂ∫èÂàóÁÆóÊ≥ï„ÄÇ</p>
<p>Âú®Â§çÊùÇÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏≠ÔºåÁâπÂà´ÊòØÂæÆÊúçÊûÑÊû∂‰∏≠ÔºåÂæÄÂæÄÈúÄË¶ÅÂØπÂ§ßÈáèÁöÑÊï∞ÊçÆÂíåÊ∂àÊÅØËøõË°åÂîØ‰∏ÄÊ†áËØÜ„ÄÇÈöèÁùÄÁ≥ªÁªüÁöÑÂ§çÊùÇÔºåÊï∞ÊçÆÁöÑÂ¢ûÂ§öÔºåÂàÜÂ∫ìÂàÜË°®Êàê‰∏∫‰∫ÜÂ∏∏ËßÅÁöÑÊñπÊ°àÔºåÂØπÊï∞ÊçÆÂàÜÂ∫ìÂàÜË°®ÂêéÈúÄË¶ÅÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄIDÊù•Ê†áËØÜ‰∏ÄÊù°Êï∞ÊçÆÊàñÊ∂àÊÅØÔºàÂ¶ÇËÆ¢ÂçïÂè∑„ÄÅ‰∫§ÊòìÊµÅÊ∞¥„ÄÅ‰∫ã‰ª∂ÁºñÂè∑Á≠âÔºâÔºåÊ≠§Êó∂‰∏Ä‰∏™ËÉΩÂ§üÁîüÊàêÂÖ®Â±ÄÂîØ‰∏ÄIDÁöÑÁ≥ªÁªüÊòØÈùûÂ∏∏ÂøÖË¶ÅÁöÑ„ÄÇ</p>
<p>ÊØîÂ¶ÇÊàë‰ª¨‰πãÂâçÂàõÂª∫ËøáÂ≠¶Áîü‰ø°ÊÅØË°®„ÄÅÂõæ‰π¶ÂÄüÈòÖË°®„ÄÅÂõæ‰π¶ÁÆ°ÁêÜË°®ÔºåÊâÄÊúâÁöÑ‰ø°ÊÅØÈÉΩ‰ºöÊúâ‰∏Ä‰∏™ID‰Ωú‰∏∫‰∏ªÈîÆÔºåÂπ∂‰∏îËøô‰∏™IDÊúâ‰ª•‰∏ãË¶ÅÊ±ÇÔºö</p>
<ul>
<li>‰∏∫‰∫ÜÂå∫Âà´‰∫éÂÖ∂‰ªñÁöÑÊï∞ÊçÆÔºåËøô‰∏™IDÂøÖÈ°ªÊòØÂÖ®Â±ÄÂîØ‰∏ÄÁöÑ„ÄÇ</li>
<li>‰∏ªÈîÆÂ∫îËØ•Â∞ΩÂèØËÉΩÁöÑ‰øùÊåÅÊúâÂ∫èÔºåËøôÊ†∑‰ºöÂ§ßÂ§ßÊèêÂçáÁ¥¢ÂºïÁöÑÊü•ËØ¢ÊïàÁéá„ÄÇ</li>
</ul>
<p>ÈÇ£‰πàÊàë‰ª¨Âú®ÂàÜÂ∏ÉÂºèÁ≥ªÁªü‰∏ãÔºåÂ¶Ç‰Ωï‰øùËØÅIDÁöÑÁîüÊàêÊª°Ë∂≥‰∏äÈù¢ÁöÑÈúÄÊ±ÇÂë¢Ôºü</p>
<ol>
<li><strong>‰ΩøÁî®UUIDÔºö</strong>UUIDÊòØÁî±‰∏ÄÁªÑ32‰ΩçÊï∞ÁöÑ16ËøõÂà∂Êï∞Â≠óÈöèÊú∫ÊûÑÊàêÁöÑÔºåÊàë‰ª¨ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®JDK‰∏∫Êàë‰ª¨Êèê‰æõÁöÑUUIDÁ±ªÊù•ÂàõÂª∫Ôºö</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="p">(</span><span class="n">String</span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">uuid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UUID</span><span class="p">.</span><span class="na">randomUUID</span><span class="p">().</span><span class="na">toString</span><span class="p">();</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">uuid</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>ÁªìÊûú‰∏∫<code>73d5219b-dc0f-4282-ac6e-8df17bcd5860</code>ÔºåÁîüÊàêÈÄüÂ∫¶ÈùûÂ∏∏Âø´ÔºåÂèØ‰ª•ÁúãÂà∞Á°ÆÂÆûÊòØËÉΩÂ§ü‰øùËØÅÂîØ‰∏ÄÊÄßÔºåÂõ†‰∏∫ÊØèÊ¨°ÈÉΩ‰∏ç‰∏ÄÊ†∑ÔºåËÄå‰∏îËøô‰πàÈïø‰∏Ä‰∏≤ÈÇ£ÈáçÂ§çÁöÑÊ¶ÇÁéáÁúüÁöÑÊòØÂ∞èÁöÑÂèØÊÄú„ÄÇ</p>
<p>‰ΩÜÊòØÂÆÉÂπ∂‰∏çÊª°Ë∂≥Êàë‰ª¨‰∏äÈù¢ÁöÑÁ¨¨‰∫å‰∏™Ë¶ÅÊ±ÇÔºå‰πüÂ∞±ÊòØËØ¥Êàë‰ª¨ÈúÄË¶ÅÂ∞ΩÂèØËÉΩÁöÑ‰øùËØÅÊúâÂ∫èÔºåËÄåËøôÈáåÊàë‰ª¨ÂæóÂà∞ÁöÑÈÉΩÊòØ‰∏Ä‰∫õÊó†Â∫èÁöÑID„ÄÇ</p>
<ol>
<li><strong>Èõ™Ëä±ÁÆóÊ≥ïÔºàSnowflakeÔºâÔºö</strong></li>
</ol>
<p>Êàë‰ª¨Êù•ÁúãÈõ™Ëä±ÁÆóÊ≥ïÔºåÂÆÉ‰ºöÁîüÊàê‰∏Ä‰∏™‰∏Ä‰∏™64bitÂ§ßÂ∞èÁöÑÊï¥ÂûãÁöÑIDÔºåintËÇØÂÆöÊòØË£Ö‰∏ç‰∏ã‰∫Ü„ÄÇ</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1af7y9xpyj213609kwf6.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415150713707" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1af7y9xpyj213609kwf6.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÂÆÉ‰∏ªË¶ÅÊòØ‰∏â‰∏™ÈÉ®ÂàÜÁªÑÊàêÔºåÊó∂Èó¥+Â∑•‰ΩúÊú∫Âô®ID+Â∫èÂàóÂè∑ÔºåÊó∂Èó¥‰ª•ÊØ´Áßí‰∏∫Âçï‰ΩçÔºå41‰∏™bit‰ΩçËÉΩË°®Á§∫Á∫¶70Âπ¥ÁöÑÊó∂Èó¥ÔºåÊó∂Èó¥Á∫™ÂÖÉ‰ªé2016Âπ¥11Êúà1Êó•Èõ∂ÁÇπÂºÄÂßãÔºåÂèØ‰ª•‰ΩøÁî®Âà∞2086Âπ¥ÔºåÂ∑•‰ΩúÊú∫Âô®IDÂÖ∂ÂÆûÂ∞±ÊòØËäÇÁÇπIDÔºåÊØè‰∏™ËäÇÁÇπÁöÑIDÈÉΩ‰∏çÁõ∏ÂêåÔºåÈÇ£‰πàÂ∞±ÂèØ‰ª•Âå∫ÂàÜÂá∫Êù•Ôºå10‰∏™bit‰ΩçÂèØ‰ª•Ë°®Á§∫ÊúÄÂ§ö1024‰∏™ËäÇÁÇπÔºåÊúÄÂêé12‰ΩçÂ∞±ÊòØÊØè‰∏™ËäÇÁÇπ‰∏ãÁöÑÂ∫èÂàóÂè∑ÔºåÂõ†Ê≠§ÊØèÂè∞Êú∫Âô®ÊØèÊØ´ÁßíÂ∞±ÂèØ‰ª•Êúâ4096‰∏™Á≥ªÂàóÂè∑„ÄÇ</p>
<p>ËøôÊ†∑ÔºåÂÆÉÂ∞±ÂÖºÂÖ∑‰∫Ü‰∏äÈù¢ÊâÄËØ¥ÁöÑÂîØ‰∏ÄÊÄßÂíåÊúâÂ∫èÊÄß‰∫ÜÔºå‰ΩÜÊòØ‰æùÁÑ∂ÊòØÊúâÁº∫ÁÇπÁöÑÔºåÁ¨¨‰∏Ä‰∏™ÊòØÊó∂Èó¥ÈóÆÈ¢òÔºåÂ¶ÇÊûúÊú∫Âô®Êó∂Èó¥Âá∫Áé∞ÂÄíÈÄÄÔºåÈÇ£‰πàÂ∞±‰ºöÂØºËá¥ÁîüÊàêÈáçÂ§çÁöÑIDÔºåÂπ∂‰∏îËäÇÁÇπÂÆπÈáèÂè™Êúâ1024‰∏™ÔºåÂ¶ÇÊûúÊòØË∂ÖÂ§ßËßÑÊ®°ÈõÜÁæ§Ôºå‰πüÊòØÂ≠òÂú®ÈöêÊÇ£ÁöÑ„ÄÇ</p>
<p>ShardingJDBCÊîØÊåÅ‰ª•‰∏ä‰∏§ÁßçÁÆóÊ≥ï‰∏∫Êàë‰ª¨Ëá™Âä®ÁîüÊàêIDÔºåÊñáÊ°£Ôºö<a href="https://shardingsphere.apache.org/document/5.1.0/cn/user-manual/shardingsphere-jdbc/builtin-algorithm/keygen/">https://shardingsphere.apache.org/document/5.1.0/cn/user-manual/shardingsphere-jdbc/builtin-algorithm/keygen/</a></p>
<p>ËøôÈáåÔºåÊàë‰ª¨Â∞±ÊòØË¶ÅShardingJDBCÊù•ËÆ©Êàë‰ª¨ÁöÑ‰∏ªÈîÆID‰ª•Èõ™Ëä±ÁÆóÊ≥ïËøõË°åÁîüÊàêÔºåÈ¶ñÂÖàÊòØÈÖçÁΩÆÊï∞ÊçÆÂ∫ìÔºåÂõ†‰∏∫Êàë‰ª¨ÈªòËÆ§ÁöÑidÊòØintÁ±ªÂûãÔºåË£Ö‰∏ç‰∏ã64‰ΩçÁöÑÔºåÊîπ‰∏Ä‰∏ãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="o">`</span><span class="n">yyds</span><span class="o">`</span><span class="p">.</span><span class="o">`</span><span class="n">test</span><span class="o">`</span><span class="w"> </span><span class="k">MODIFY</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">FIRST</span><span class="p">;</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨ÈúÄË¶Å‰øÆÊîπ‰∏Ä‰∏ãMybatisÁöÑÊèíÂÖ•ËØ≠Âè•ÔºåÂõ†‰∏∫Áé∞Âú®idÊòØÁî±ShardingJDBCËá™Âä®ÁîüÊàêÔºåÊàë‰ª¨Â∞±‰∏çÈúÄË¶ÅËá™Â∑±Âä†‰∫ÜÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Insert</span><span class="p">(</span><span class="s">&quot;insert into test(name, passwd) values(#{name}, #{passwd})&quot;</span><span class="p">)</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">addUser</span><span class="p">(</span><span class="n">User</span><span class="w"> </span><span class="n">user</span><span class="p">);</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Âú®ÈÖçÁΩÆÊñá‰ª∂‰∏≠Â∞ÜÊàë‰ª¨ÁöÑÁÆóÊ≥ïÂÜô‰∏äÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">shardingsphere</span><span class="p">:</span>
<span class="w">    </span><span class="nt">datasource</span><span class="p">:</span>
<span class="w">      </span><span class="nt">sharding</span><span class="p">:</span>
<span class="w">        </span><span class="nt">tables</span><span class="p">:</span>
<span class="w">          </span><span class="nt">test</span><span class="p">:</span>
<span class="w">            </span><span class="nt">actual-data-nodes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db0.test,db1.test</span>
<span class="w">            </span><span class="c1">#ËøôÈáåËøòÊòØ‰ΩøÁî®ÂàÜÂ∫ìÁ≠ñÁï•</span>
<span class="w">            </span><span class="nt">database-strategy</span><span class="p">:</span>
<span class="w">              </span><span class="nt">standard</span><span class="p">:</span>
<span class="w">                </span><span class="nt">sharding-column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">id</span>
<span class="w">                </span><span class="nt">sharding-algorithm-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-alg</span>
<span class="w">            </span><span class="c1">#ËøôÈáå‰ΩøÁî®Ëá™ÂÆö‰πâÁöÑ‰∏ªÈîÆÁîüÊàêÁ≠ñÁï•</span>
<span class="w">            </span><span class="nt">key-generate-strategy</span><span class="p">:</span>
<span class="w">              </span><span class="nt">column</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">id</span>
<span class="w">              </span><span class="nt">key-generator-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-gen</span>
<span class="w">        </span><span class="nt">key-generators</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#ËøôÈáåÂÜôÊàë‰ª¨Ëá™ÂÆö‰πâÁöÑ‰∏ªÈîÆÁîüÊàêÁÆóÊ≥ï</span>
<span class="w">          </span><span class="nt">my-gen</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#‰ΩøÁî®Èõ™Ëä±ÁÆóÊ≥ï</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SNOWFLAKE</span>
<span class="w">            </span><span class="nt">props</span><span class="p">:</span>
<span class="w">                </span><span class="c1">#Â∑•‰ΩúÊú∫Âô®IDÔºå‰øùËØÅÂîØ‰∏ÄÂ∞±Ë°å</span>
<span class="w">              </span><span class="nt">worker-id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">666</span>
<span class="w">        </span><span class="nt">sharding-algorithms</span><span class="p">:</span>
<span class="w">          </span><span class="nt">my-alg</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">MOD</span>
<span class="w">            </span><span class="nt">props</span><span class="p">:</span>
<span class="w">              </span><span class="nt">sharding-count</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</code></pre></div>
<p>Êé•ÁùÄÊàë‰ª¨Êù•ÁºñÂÜô‰∏Ä‰∏ãÊµãËØïÁî®‰æãÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ShardingJdbcTestApplicationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">20</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">mapper</span><span class="p">.</span><span class="na">addUser</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="s">&quot;aaa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bbb&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p>ÂèØ‰ª•ÁúãÂà∞Êó•ÂøóÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1agbo7cqhj21fi0ein3c.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415154524545" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1agbo7cqhj21fi0ein3c.jpg" /></a></p>
<p>Âú®ÊèíÂÖ•ÁöÑÊó∂ÂÄôÔºåÂ∞ÜÊàë‰ª¨ÁöÑSQLËØ≠Âè•Ëá™Ë°åÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™idÂ≠óÊÆµÔºåÂπ∂‰∏î‰ΩøÁî®ÁöÑÊòØÈõ™Ëä±ÁÆóÊ≥ïÁîüÊàêÁöÑÂÄºÔºåÂπ∂‰∏î‰πüÊòØÊ†πÊçÆÊàë‰ª¨ÁöÑÂàÜÂ∫ìÁ≠ñÁï•Âú®ËøõË°åÊèíÂÖ•Êìç‰Ωú„ÄÇ</p>
<h3 id="_12">ËØªÂÜôÂàÜÁ¶ª<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h3>
<p>ÊúÄÂêéÊàë‰ª¨Êù•ÁúãÁúãËØªÂÜôÂàÜÁ¶ªÔºåÊàë‰ª¨‰πãÂâçÂÆûÁé∞‰∫ÜMySQLÁöÑ‰∏ª‰ªéÔºåÈÇ£‰πàÊàë‰ª¨Â∞±ÂèØ‰ª•Â∞Ü‰∏ªÂ∫ì‰Ωú‰∏∫ËØªÔºå‰ªéÂ∫ì‰Ωú‰∏∫ÂÜôÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1agpivkf5j21og0ge76c.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415155842834" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1agpivkf5j21og0ge76c.jpg" /></a></p>
<p>ËøôÈáåÊàë‰ª¨ËøòÊòØÂ∞ÜÊï∞ÊçÆÂ∫ìÂèòÂõû‰∏ª‰ªéÁä∂ÊÄÅÔºåÁõ¥Êé•Âà†Èô§ÂΩìÂâçÁöÑË°®ÔºåÊàë‰ª¨ÈáçÊñ∞Êù•ËøáÔºö</p>
<div class="highlight"><pre><span></span><code><span class="k">drop</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test</span><span class="p">;</span>
</code></pre></div>
<p>Êàë‰ª¨ÈúÄË¶ÅÂ∞Ü‰ªéÂ∫ìÂºÄÂêØÂè™ËØªÊ®°ÂºèÔºåÂú®MySQLÈÖçÁΩÆ‰∏≠ËøõË°å‰øÆÊîπÔºö</p>
<div class="highlight"><pre><span></span><code><span class="na">read-only</span><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="s">1</span>
</code></pre></div>
<p>ËøôÊ†∑‰ªéÂ∫ìÂ∞±Âè™ËÉΩËØªÊï∞ÊçÆ‰∫ÜÔºà‰ΩÜÊòØrootË¥¶Âè∑ËøòÊòØÂèØ‰ª•ÂÜôÊï∞ÊçÆÔºâÔºåÊé•ÁùÄÊàë‰ª¨ÈáçÂêØÊúçÂä°Âô®Ôºö</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>mysql.service
</code></pre></div>
<p>ÁÑ∂ÂêéËøõÂÖ•‰∏ªÂ∫ìÔºåÁúãÁúãÁä∂ÊÄÅÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1agtsg7urj217k07s0tx.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415160249024" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1agtsg7urj217k07s0tx.jpg" /></a></p>
<p>Áé∞Âú®Êàë‰ª¨ÈÖçÁΩÆ‰∏Ä‰∏ã‰ªéÂ∫ìÔºö</p>
<div class="highlight"><pre><span></span><code><span class="n">change</span><span class="w"> </span><span class="n">replication</span><span class="w"> </span><span class="k">source</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">SOURCE_HOST</span><span class="o">=</span><span class="s1">&#39;192.168.0.13&#39;</span><span class="p">,</span><span class="n">SOURCE_USER</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span><span class="n">SOURCE_PASSWORD</span><span class="o">=</span><span class="s1">&#39;123456&#39;</span><span class="p">,</span><span class="n">SOURCE_LOG_FILE</span><span class="o">=</span><span class="s1">&#39;binlog.000007&#39;</span><span class="p">,</span><span class="n">SOURCE_LOG_POS</span><span class="o">=</span><span class="mi">19845</span><span class="p">;</span>
<span class="k">start</span><span class="w"> </span><span class="n">replica</span><span class="p">;</span>
</code></pre></div>
<p>Áé∞Âú®Êàë‰ª¨Âú®‰∏ªÂ∫ìÂàõÂª∫Ë°®Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="k">create</span><span class="w"> </span><span class="k">table</span><span class="w"> </span><span class="n">test</span><span class="w">  </span><span class="p">(</span>
<span class="w">  </span><span class="o">`</span><span class="n">id</span><span class="o">`</span><span class="w"> </span><span class="nb">bigint</span><span class="w"> </span><span class="k">primary</span><span class="w"> </span><span class="k">key</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">name</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">  </span><span class="o">`</span><span class="n">passwd</span><span class="o">`</span><span class="w"> </span><span class="nb">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span><span class="w"> </span><span class="k">NULL</span>
<span class="p">);</span>
</code></pre></div>
<p>ÁÑ∂ÂêéÊàë‰ª¨Â∞±ÂèØ‰ª•ÈÖçÁΩÆShardingJDBC‰∫ÜÔºåÊâìÂºÄÈÖçÁΩÆÊñá‰ª∂Ôºö</p>
<div class="highlight"><pre><span></span><code><span class="nt">spring</span><span class="p">:</span>
<span class="w">  </span><span class="nt">shardingsphere</span><span class="p">:</span>
<span class="w">    </span><span class="nt">rules</span><span class="p">:</span>
<span class="w">        </span><span class="c1">#ÈÖçÁΩÆËØªÂÜôÂàÜÁ¶ª</span>
<span class="w">      </span><span class="nt">readwrite-splitting</span><span class="p">:</span>
<span class="w">        </span><span class="nt">data-sources</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#ÂêçÁß∞Èöè‰æøÂÜô</span>
<span class="w">          </span><span class="nt">user-db</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#‰ΩøÁî®ÈùôÊÄÅÁ±ªÂûãÔºåÂä®ÊÄÅDynamicÁ±ªÂûãÂèØ‰ª•Ëá™Âä®ÂèëÁé∞auto-aware-data-source-nameÔºåËøôÈáå‰∏çÊºîÁ§∫</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Static</span>
<span class="w">            </span><span class="nt">props</span><span class="p">:</span>
<span class="w">                </span><span class="c1">#ÈÖçÁΩÆÂÜôÂ∫ìÔºàÂè™ËÉΩ‰∏Ä‰∏™Ôºâ</span>
<span class="w">              </span><span class="nt">write-data-source-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db0</span>
<span class="w">              </span><span class="c1">#ÈÖçÁΩÆ‰ªéÂ∫ìÔºàÂ§ö‰∏™ÔºåÈÄóÂè∑ÈöîÂºÄÔºâ</span>
<span class="w">              </span><span class="nt">read-data-source-names</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">db1</span>
<span class="w">              </span><span class="c1">#Ë¥üËΩΩÂùáË°°Á≠ñÁï•ÔºåÂèØ‰ª•Ëá™ÂÆö‰πâ</span>
<span class="w">              </span><span class="nt">load-balancer-name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-load</span>
<span class="w">        </span><span class="nt">load-balancers</span><span class="p">:</span>
<span class="w">            </span><span class="c1">#Ëá™ÂÆö‰πâÁöÑË¥üËΩΩÂùáË°°Á≠ñÁï•</span>
<span class="w">          </span><span class="nt">my-load</span><span class="p">:</span>
<span class="w">            </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ROUND_ROBIN</span>
</code></pre></div>
<p>Ê≥®ÊÑèÊää‰πãÂâçÊîπÁöÑÁî®Êà∑ÂÆû‰ΩìÁ±ªÂíåMapperÊîπÂõûÂéªÔºåËøôÈáåÊàë‰ª¨Â∞±‰∏çÁî®Ëá™Âä®ÁîüÊàêIDÁöÑ‰∫Ü„ÄÇÊâÄÊúâÁöÑË¥üËΩΩÂùáË°°ÁÆóÊ≥ïÂú∞ÂùÄÔºö<a href="https://shardingsphere.apache.org/document/5.1.0/cn/user-manual/shardingsphere-jdbc/builtin-algorithm/load-balance/">https://shardingsphere.apache.org/document/5.1.0/cn/user-manual/shardingsphere-jdbc/builtin-algorithm/load-balance/</a></p>
<p>Áé∞Âú®Êàë‰ª¨Â∞±Êù•ÊµãËØï‰∏Ä‰∏ãÂêßÔºö</p>
<div class="highlight"><pre><span></span><code><span class="nd">@SpringBootTest</span>
<span class="kd">class</span> <span class="nc">ShardingJdbcTestApplicationTests</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Resource</span>
<span class="w">    </span><span class="n">UserMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">contextLoads</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">mapper</span><span class="p">.</span><span class="na">addUser</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">User</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;aaa&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bbb&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">mapper</span><span class="p">.</span><span class="na">getUserById</span><span class="p">(</span><span class="mi">10</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>
</code></pre></div>
<p>ËøêË°åÁúãÁúãSQLÊó•ÂøóÔºö</p>
<p><a class="glightbox" href="https://tva1.sinaimg.cn/large/e6c9d24ely1h1ahjo682tj21je07udik.jpg" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image-20220415162741466" src="https://tva1.sinaimg.cn/large/e6c9d24ely1h1ahjo682tj21je07udik.jpg" /></a></p>
<p>ÂèØ‰ª•ÁúãÂà∞ÔºåÂΩìÊàë‰ª¨ÊâßË°åÊèíÂÖ•Êìç‰ΩúÊó∂Ôºå‰ºöÁõ¥Êé•Âêëdb0ËøõË°åÊìç‰ΩúÔºåËÄåËØªÂèñÊìç‰ΩúÊòØ‰ºöÊ†πÊçÆÊàë‰ª¨ÁöÑÈÖçÁΩÆÔºåÈÄâÊã©db1ËøõË°åÊìç‰Ωú„ÄÇ</p>
<p>Ëá≥Ê≠§ÔºåÂæÆÊúçÂä°Â∫îÁî®Á´†ËäÇÂà∞Ê≠§ÁªìÊùü„ÄÇ</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" class="md-footer__link md-footer__link--prev" aria-label="Previous: SpringCloudÁ¨îËÆ∞Ôºà‰∏ÄÔºâ">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                SpringCloudÁ¨îËÆ∞Ôºà‰∏ÄÔºâ
              </div>
            </div>
          </a>
        
        
          
          <a href="../SpringCloud%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89/" class="md-footer__link md-footer__link--next" aria-label="Next: SpringCloudÁ¨îËÆ∞ÔºàÂõõÔºâ">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                SpringCloudÁ¨îËÆ∞ÔºàÂõõÔºâ
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["navigation.footer", "navigation.instant", "navigation.instant.preview", "navigation.tabs", "navigation.top", "navigation.tracking", "navigation.tabs.sticky", "content.code.copy"], "search": "../../../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>